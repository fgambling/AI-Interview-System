function H0(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function K0(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var my={exports:{}},Mc={},yy={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=Symbol.for("react.element"),J0=Symbol.for("react.portal"),Q0=Symbol.for("react.fragment"),G0=Symbol.for("react.strict_mode"),X0=Symbol.for("react.profiler"),Y0=Symbol.for("react.provider"),Z0=Symbol.for("react.context"),ew=Symbol.for("react.forward_ref"),tw=Symbol.for("react.suspense"),nw=Symbol.for("react.memo"),rw=Symbol.for("react.lazy"),af=Symbol.iterator;function iw(e){return e===null||typeof e!="object"?null:(e=af&&e[af]||e["@@iterator"],typeof e=="function"?e:null)}var Sy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cy=Object.assign,Ry={};function ni(e,t,n){this.props=e,this.context=t,this.refs=Ry,this.updater=n||Sy}ni.prototype.isReactComponent={};ni.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ni.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Py(){}Py.prototype=ni.prototype;function _d(e,t,n){this.props=e,this.context=t,this.refs=Ry,this.updater=n||Sy}var Ad=_d.prototype=new Py;Ad.constructor=_d;Cy(Ad,ni.prototype);Ad.isPureReactComponent=!0;var cf=Array.isArray,wy=Object.prototype.hasOwnProperty,bd={current:null},Ey={key:!0,ref:!0,__self:!0,__source:!0};function Ty(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)wy.call(t,r)&&!Ey.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Jo,type:e,key:o,ref:a,props:i,_owner:bd.current}}function sw(e,t){return{$$typeof:Jo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jo}function ow(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lf=/\/+/g;function Ru(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ow(""+e.key):t.toString(36)}function za(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Jo:case J0:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Ru(a,0):r,cf(i)?(n="",e!=null&&(n=e.replace(lf,"$&/")+"/"),za(i,t,n,"",function(l){return l})):i!=null&&(kd(i)&&(i=sw(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(lf,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",cf(e))for(var s=0;s<e.length;s++){o=e[s];var c=r+Ru(o,s);a+=za(o,t,n,c,i)}else if(c=iw(e),typeof c=="function")for(e=c.call(e),s=0;!(o=e.next()).done;)o=o.value,c=r+Ru(o,s++),a+=za(o,t,n,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ma(e,t,n){if(e==null)return e;var r=[],i=0;return za(e,r,"","",function(o){return t.call(n,o,i++)}),r}function aw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ue={current:null},La={transition:null},cw={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:La,ReactCurrentOwner:bd};function Iy(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:ma,forEach:function(e,t,n){ma(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ma(e,function(){t++}),t},toArray:function(e){return ma(e,function(t){return t})||[]},only:function(e){if(!kd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};V.Component=ni;V.Fragment=Q0;V.Profiler=X0;V.PureComponent=_d;V.StrictMode=G0;V.Suspense=tw;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cw;V.act=Iy;V.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Cy({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=bd.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)wy.call(t,c)&&!Ey.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:Jo,type:e.type,key:i,ref:o,props:r,_owner:a}};V.createContext=function(e){return e={$$typeof:Z0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Y0,_context:e},e.Consumer=e};V.createElement=Ty;V.createFactory=function(e){var t=Ty.bind(null,e);return t.type=e,t};V.createRef=function(){return{current:null}};V.forwardRef=function(e){return{$$typeof:ew,render:e}};V.isValidElement=kd;V.lazy=function(e){return{$$typeof:rw,_payload:{_status:-1,_result:e},_init:aw}};V.memo=function(e,t){return{$$typeof:nw,type:e,compare:t===void 0?null:t}};V.startTransition=function(e){var t=La.transition;La.transition={};try{e()}finally{La.transition=t}};V.unstable_act=Iy;V.useCallback=function(e,t){return Ue.current.useCallback(e,t)};V.useContext=function(e){return Ue.current.useContext(e)};V.useDebugValue=function(){};V.useDeferredValue=function(e){return Ue.current.useDeferredValue(e)};V.useEffect=function(e,t){return Ue.current.useEffect(e,t)};V.useId=function(){return Ue.current.useId()};V.useImperativeHandle=function(e,t,n){return Ue.current.useImperativeHandle(e,t,n)};V.useInsertionEffect=function(e,t){return Ue.current.useInsertionEffect(e,t)};V.useLayoutEffect=function(e,t){return Ue.current.useLayoutEffect(e,t)};V.useMemo=function(e,t){return Ue.current.useMemo(e,t)};V.useReducer=function(e,t,n){return Ue.current.useReducer(e,t,n)};V.useRef=function(e){return Ue.current.useRef(e)};V.useState=function(e){return Ue.current.useState(e)};V.useSyncExternalStore=function(e,t,n){return Ue.current.useSyncExternalStore(e,t,n)};V.useTransition=function(){return Ue.current.useTransition()};V.version="18.3.1";yy.exports=V;var _=yy.exports;const xd=gy(_),lw=H0({__proto__:null,default:xd},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw=_,pw=Symbol.for("react.element"),dw=Symbol.for("react.fragment"),hw=Object.prototype.hasOwnProperty,fw=uw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vw={key:!0,ref:!0,__self:!0,__source:!0};function _y(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)hw.call(t,r)&&!vw.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:pw,type:e,key:o,ref:a,props:i,_owner:fw.current}}Mc.Fragment=dw;Mc.jsx=_y;Mc.jsxs=_y;my.exports=Mc;var m=my.exports,Sp={},Ay={exports:{}},it={},by={exports:{}},ky={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,O){var j=A.length;A.push(O);e:for(;0<j;){var H=j-1>>>1,ue=A[H];if(0<i(ue,O))A[H]=O,A[j]=ue,j=H;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var O=A[0],j=A.pop();if(j!==O){A[0]=j;e:for(var H=0,ue=A.length,Rr=ue>>>1;H<Rr;){var Mt=2*(H+1)-1,fi=A[Mt],Dt=Mt+1,Pr=A[Dt];if(0>i(fi,j))Dt<ue&&0>i(Pr,fi)?(A[H]=Pr,A[Dt]=j,H=Dt):(A[H]=fi,A[Mt]=j,H=Mt);else if(Dt<ue&&0>i(Pr,j))A[H]=Pr,A[Dt]=j,H=Dt;else break e}}return O}function i(A,O){var j=A.sortIndex-O.sortIndex;return j!==0?j:A.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var c=[],l=[],u=1,p=null,d=3,h=!1,v=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(A){for(var O=n(l);O!==null;){if(O.callback===null)r(l);else if(O.startTime<=A)r(l),O.sortIndex=O.expirationTime,t(c,O);else break;O=n(l)}}function R(A){if(S=!1,y(A),!v)if(n(c)!==null)v=!0,en(P);else{var O=n(l);O!==null&&zn(R,O.startTime-A)}}function P(A,O){v=!1,S&&(S=!1,f(E),E=-1),h=!0;var j=d;try{for(y(O),p=n(c);p!==null&&(!(p.expirationTime>O)||A&&!G());){var H=p.callback;if(typeof H=="function"){p.callback=null,d=p.priorityLevel;var ue=H(p.expirationTime<=O);O=e.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(c)&&r(c),y(O)}else r(c);p=n(c)}if(p!==null)var Rr=!0;else{var Mt=n(l);Mt!==null&&zn(R,Mt.startTime-O),Rr=!1}return Rr}finally{p=null,d=j,h=!1}}var w=!1,T=null,E=-1,x=5,D=-1;function G(){return!(e.unstable_now()-D<x)}function We(){if(T!==null){var A=e.unstable_now();D=A;var O=!0;try{O=T(!0,A)}finally{O?ne():(w=!1,T=null)}}else w=!1}var ne;if(typeof g=="function")ne=function(){g(We)};else if(typeof MessageChannel<"u"){var jn=new MessageChannel,hi=jn.port2;jn.port1.onmessage=We,ne=function(){hi.postMessage(null)}}else ne=function(){C(We,0)};function en(A){T=A,w||(w=!0,ne())}function zn(A,O){E=C(function(){A(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){v||h||(v=!0,en(P))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var j=d;d=O;try{return A()}finally{d=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,O){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var j=d;d=A;try{return O()}finally{d=j}},e.unstable_scheduleCallback=function(A,O,j){var H=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?H+j:H):j=H,A){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=j+ue,A={id:u++,callback:O,priorityLevel:A,startTime:j,expirationTime:ue,sortIndex:-1},j>H?(A.sortIndex=j,t(l,A),n(c)===null&&A===n(l)&&(S?(f(E),E=-1):S=!0,zn(R,j-H))):(A.sortIndex=ue,t(c,A),v||h||(v=!0,en(P))),A},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(A){var O=d;return function(){var j=d;d=O;try{return A.apply(this,arguments)}finally{d=j}}}})(ky);by.exports=ky;var gw=by.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw=_,rt=gw;function k(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xy=new Set,To={};function vr(e,t){Wr(e,t),Wr(e+"Capture",t)}function Wr(e,t){for(To[e]=t,e=0;e<t.length;e++)xy.add(t[e])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cp=Object.prototype.hasOwnProperty,yw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uf={},pf={};function Sw(e){return Cp.call(pf,e)?!0:Cp.call(uf,e)?!1:yw.test(e)?pf[e]=!0:(uf[e]=!0,!1)}function Cw(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Rw(e,t,n,r){if(t===null||typeof t>"u"||Cw(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $e(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Te[e]=new $e(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Te[t]=new $e(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Te[e]=new $e(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Te[e]=new $e(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Te[e]=new $e(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Te[e]=new $e(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Te[e]=new $e(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Te[e]=new $e(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Te[e]=new $e(e,5,!1,e.toLowerCase(),null,!1,!1)});var Od=/[\-:]([a-z])/g;function Nd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Od,Nd);Te[t]=new $e(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Od,Nd);Te[t]=new $e(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Od,Nd);Te[t]=new $e(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Te[e]=new $e(e,1,!1,e.toLowerCase(),null,!1,!1)});Te.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Te[e]=new $e(e,1,!1,e.toLowerCase(),null,!0,!0)});function Md(e,t,n,r){var i=Te.hasOwnProperty(t)?Te[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Rw(t,n,i,r)&&(n=null),r||i===null?Sw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Xt=mw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ya=Symbol.for("react.element"),Ir=Symbol.for("react.portal"),_r=Symbol.for("react.fragment"),Dd=Symbol.for("react.strict_mode"),Rp=Symbol.for("react.profiler"),Oy=Symbol.for("react.provider"),Ny=Symbol.for("react.context"),jd=Symbol.for("react.forward_ref"),Pp=Symbol.for("react.suspense"),wp=Symbol.for("react.suspense_list"),zd=Symbol.for("react.memo"),sn=Symbol.for("react.lazy"),My=Symbol.for("react.offscreen"),df=Symbol.iterator;function vi(e){return e===null||typeof e!="object"?null:(e=df&&e[df]||e["@@iterator"],typeof e=="function"?e:null)}var se=Object.assign,Pu;function lo(e){if(Pu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Pu=t&&t[1]||""}return`
`+Pu+e}var wu=!1;function Eu(e,t){if(!e||wu)return"";wu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=s);break}}}finally{wu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?lo(e):""}function Pw(e){switch(e.tag){case 5:return lo(e.type);case 16:return lo("Lazy");case 13:return lo("Suspense");case 19:return lo("SuspenseList");case 0:case 2:case 15:return e=Eu(e.type,!1),e;case 11:return e=Eu(e.type.render,!1),e;case 1:return e=Eu(e.type,!0),e;default:return""}}function Ep(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _r:return"Fragment";case Ir:return"Portal";case Rp:return"Profiler";case Dd:return"StrictMode";case Pp:return"Suspense";case wp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ny:return(e.displayName||"Context")+".Consumer";case Oy:return(e._context.displayName||"Context")+".Provider";case jd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zd:return t=e.displayName||null,t!==null?t:Ep(e.type)||"Memo";case sn:t=e._payload,e=e._init;try{return Ep(e(t))}catch{}}return null}function ww(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ep(t);case 8:return t===Dd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ew(e){var t=Dy(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sa(e){e._valueTracker||(e._valueTracker=Ew(e))}function jy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Dy(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function nc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Tp(e,t){var n=t.checked;return se({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Tn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zy(e,t){t=t.checked,t!=null&&Md(e,"checked",t,!1)}function Ip(e,t){zy(e,t);var n=Tn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_p(e,t.type,n):t.hasOwnProperty("defaultValue")&&_p(e,t.type,Tn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ff(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function _p(e,t,n){(t!=="number"||nc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var uo=Array.isArray;function Lr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Tn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ap(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(k(91));return se({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(k(92));if(uo(n)){if(1<n.length)throw Error(k(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Tn(n)}}function Ly(e,t){var n=Tn(t.value),r=Tn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function gf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function By(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?By(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ca,Fy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ca=Ca||document.createElement("div"),Ca.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ca.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Io(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tw=["Webkit","ms","Moz","O"];Object.keys(vo).forEach(function(e){Tw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),vo[t]=vo[e]})});function qy(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||vo.hasOwnProperty(e)&&vo[e]?(""+t).trim():t+"px"}function Uy(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=qy(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Iw=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kp(e,t){if(t){if(Iw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(k(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(k(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(k(61))}if(t.style!=null&&typeof t.style!="object")throw Error(k(62))}}function xp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Op=null;function Ld(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Np=null,Br=null,Fr=null;function mf(e){if(e=Xo(e)){if(typeof Np!="function")throw Error(k(280));var t=e.stateNode;t&&(t=Bc(t),Np(e.stateNode,e.type,t))}}function $y(e){Br?Fr?Fr.push(e):Fr=[e]:Br=e}function Wy(){if(Br){var e=Br,t=Fr;if(Fr=Br=null,mf(e),t)for(e=0;e<t.length;e++)mf(t[e])}}function Vy(e,t){return e(t)}function Hy(){}var Tu=!1;function Ky(e,t,n){if(Tu)return e(t,n);Tu=!0;try{return Vy(e,t,n)}finally{Tu=!1,(Br!==null||Fr!==null)&&(Hy(),Wy())}}function _o(e,t){var n=e.stateNode;if(n===null)return null;var r=Bc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(k(231,t,typeof n));return n}var Mp=!1;if(Kt)try{var gi={};Object.defineProperty(gi,"passive",{get:function(){Mp=!0}}),window.addEventListener("test",gi,gi),window.removeEventListener("test",gi,gi)}catch{Mp=!1}function _w(e,t,n,r,i,o,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var go=!1,rc=null,ic=!1,Dp=null,Aw={onError:function(e){go=!0,rc=e}};function bw(e,t,n,r,i,o,a,s,c){go=!1,rc=null,_w.apply(Aw,arguments)}function kw(e,t,n,r,i,o,a,s,c){if(bw.apply(this,arguments),go){if(go){var l=rc;go=!1,rc=null}else throw Error(k(198));ic||(ic=!0,Dp=l)}}function gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Jy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yf(e){if(gr(e)!==e)throw Error(k(188))}function xw(e){var t=e.alternate;if(!t){if(t=gr(e),t===null)throw Error(k(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return yf(i),e;if(o===r)return yf(i),t;o=o.sibling}throw Error(k(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(k(189))}}if(n.alternate!==r)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?e:t}function Qy(e){return e=xw(e),e!==null?Gy(e):null}function Gy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gy(e);if(t!==null)return t;e=e.sibling}return null}var Xy=rt.unstable_scheduleCallback,Sf=rt.unstable_cancelCallback,Ow=rt.unstable_shouldYield,Nw=rt.unstable_requestPaint,le=rt.unstable_now,Mw=rt.unstable_getCurrentPriorityLevel,Bd=rt.unstable_ImmediatePriority,Yy=rt.unstable_UserBlockingPriority,sc=rt.unstable_NormalPriority,Dw=rt.unstable_LowPriority,Zy=rt.unstable_IdlePriority,Dc=null,Ot=null;function jw(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Dc,e,void 0,(e.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:Bw,zw=Math.log,Lw=Math.LN2;function Bw(e){return e>>>=0,e===0?32:31-(zw(e)/Lw|0)|0}var Ra=64,Pa=4194304;function po(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function oc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=po(s):(o&=a,o!==0&&(r=po(o)))}else a=n&~i,a!==0?r=po(a):o!==0&&(r=po(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-St(t),i=1<<n,r|=e[n],t&=~i;return r}function Fw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qw(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-St(o),s=1<<a,c=i[a];c===-1?(!(s&n)||s&r)&&(i[a]=Fw(s,t)):c<=t&&(e.expiredLanes|=s),o&=~s}}function jp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function eS(){var e=Ra;return Ra<<=1,!(Ra&4194240)&&(Ra=64),e}function Iu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-St(t),e[t]=n}function Uw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-St(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function Fd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-St(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Q=0;function tS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var nS,qd,rS,iS,sS,zp=!1,wa=[],vn=null,gn=null,mn=null,Ao=new Map,bo=new Map,ln=[],$w="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cf(e,t){switch(e){case"focusin":case"focusout":vn=null;break;case"dragenter":case"dragleave":gn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":Ao.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(t.pointerId)}}function mi(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Xo(t),t!==null&&qd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Ww(e,t,n,r,i){switch(t){case"focusin":return vn=mi(vn,e,t,n,r,i),!0;case"dragenter":return gn=mi(gn,e,t,n,r,i),!0;case"mouseover":return mn=mi(mn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ao.set(o,mi(Ao.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,bo.set(o,mi(bo.get(o)||null,e,t,n,r,i)),!0}return!1}function oS(e){var t=nr(e.target);if(t!==null){var n=gr(t);if(n!==null){if(t=n.tag,t===13){if(t=Jy(n),t!==null){e.blockedOn=t,sS(e.priority,function(){rS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ba(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Lp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Op=r,n.target.dispatchEvent(r),Op=null}else return t=Xo(n),t!==null&&qd(t),e.blockedOn=n,!1;t.shift()}return!0}function Rf(e,t,n){Ba(e)&&n.delete(t)}function Vw(){zp=!1,vn!==null&&Ba(vn)&&(vn=null),gn!==null&&Ba(gn)&&(gn=null),mn!==null&&Ba(mn)&&(mn=null),Ao.forEach(Rf),bo.forEach(Rf)}function yi(e,t){e.blockedOn===t&&(e.blockedOn=null,zp||(zp=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,Vw)))}function ko(e){function t(i){return yi(i,e)}if(0<wa.length){yi(wa[0],e);for(var n=1;n<wa.length;n++){var r=wa[n];r.blockedOn===e&&(r.blockedOn=null)}}for(vn!==null&&yi(vn,e),gn!==null&&yi(gn,e),mn!==null&&yi(mn,e),Ao.forEach(t),bo.forEach(t),n=0;n<ln.length;n++)r=ln[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ln.length&&(n=ln[0],n.blockedOn===null);)oS(n),n.blockedOn===null&&ln.shift()}var qr=Xt.ReactCurrentBatchConfig,ac=!0;function Hw(e,t,n,r){var i=Q,o=qr.transition;qr.transition=null;try{Q=1,Ud(e,t,n,r)}finally{Q=i,qr.transition=o}}function Kw(e,t,n,r){var i=Q,o=qr.transition;qr.transition=null;try{Q=4,Ud(e,t,n,r)}finally{Q=i,qr.transition=o}}function Ud(e,t,n,r){if(ac){var i=Lp(e,t,n,r);if(i===null)ju(e,t,r,cc,n),Cf(e,r);else if(Ww(i,e,t,n,r))r.stopPropagation();else if(Cf(e,r),t&4&&-1<$w.indexOf(e)){for(;i!==null;){var o=Xo(i);if(o!==null&&nS(o),o=Lp(e,t,n,r),o===null&&ju(e,t,r,cc,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ju(e,t,r,null,n)}}var cc=null;function Lp(e,t,n,r){if(cc=null,e=Ld(r),e=nr(e),e!==null)if(t=gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Jy(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cc=e,null}function aS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mw()){case Bd:return 1;case Yy:return 4;case sc:case Dw:return 16;case Zy:return 536870912;default:return 16}default:return 16}}var pn=null,$d=null,Fa=null;function cS(){if(Fa)return Fa;var e,t=$d,n=t.length,r,i="value"in pn?pn.value:pn.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return Fa=i.slice(e,1<r?1-r:void 0)}function qa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ea(){return!0}function Pf(){return!1}function st(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ea:Pf,this.isPropagationStopped=Pf,this}return se(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){},isPersistent:Ea}),t}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wd=st(ri),Go=se({},ri,{view:0,detail:0}),Jw=st(Go),_u,Au,Si,jc=se({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Si&&(Si&&e.type==="mousemove"?(_u=e.screenX-Si.screenX,Au=e.screenY-Si.screenY):Au=_u=0,Si=e),_u)},movementY:function(e){return"movementY"in e?e.movementY:Au}}),wf=st(jc),Qw=se({},jc,{dataTransfer:0}),Gw=st(Qw),Xw=se({},Go,{relatedTarget:0}),bu=st(Xw),Yw=se({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),Zw=st(Yw),eE=se({},ri,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tE=st(eE),nE=se({},ri,{data:0}),Ef=st(nE),rE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sE[e])?!!t[e]:!1}function Vd(){return oE}var aE=se({},Go,{key:function(e){if(e.key){var t=rE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vd,charCode:function(e){return e.type==="keypress"?qa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cE=st(aE),lE=se({},jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tf=st(lE),uE=se({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vd}),pE=st(uE),dE=se({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),hE=st(dE),fE=se({},jc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vE=st(fE),gE=[9,13,27,32],Hd=Kt&&"CompositionEvent"in window,mo=null;Kt&&"documentMode"in document&&(mo=document.documentMode);var mE=Kt&&"TextEvent"in window&&!mo,lS=Kt&&(!Hd||mo&&8<mo&&11>=mo),If=String.fromCharCode(32),_f=!1;function uS(e,t){switch(e){case"keyup":return gE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ar=!1;function yE(e,t){switch(e){case"compositionend":return pS(t);case"keypress":return t.which!==32?null:(_f=!0,If);case"textInput":return e=t.data,e===If&&_f?null:e;default:return null}}function SE(e,t){if(Ar)return e==="compositionend"||!Hd&&uS(e,t)?(e=cS(),Fa=$d=pn=null,Ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lS&&t.locale!=="ko"?null:t.data;default:return null}}var CE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Af(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!CE[e.type]:t==="textarea"}function dS(e,t,n,r){$y(r),t=lc(t,"onChange"),0<t.length&&(n=new Wd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var yo=null,xo=null;function RE(e){wS(e,0)}function zc(e){var t=xr(e);if(jy(t))return e}function PE(e,t){if(e==="change")return t}var hS=!1;if(Kt){var ku;if(Kt){var xu="oninput"in document;if(!xu){var bf=document.createElement("div");bf.setAttribute("oninput","return;"),xu=typeof bf.oninput=="function"}ku=xu}else ku=!1;hS=ku&&(!document.documentMode||9<document.documentMode)}function kf(){yo&&(yo.detachEvent("onpropertychange",fS),xo=yo=null)}function fS(e){if(e.propertyName==="value"&&zc(xo)){var t=[];dS(t,xo,e,Ld(e)),Ky(RE,t)}}function wE(e,t,n){e==="focusin"?(kf(),yo=t,xo=n,yo.attachEvent("onpropertychange",fS)):e==="focusout"&&kf()}function EE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zc(xo)}function TE(e,t){if(e==="click")return zc(t)}function IE(e,t){if(e==="input"||e==="change")return zc(t)}function _E(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pt=typeof Object.is=="function"?Object.is:_E;function Oo(e,t){if(Pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Cp.call(t,i)||!Pt(e[i],t[i]))return!1}return!0}function xf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Of(e,t){var n=xf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xf(n)}}function vS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gS(){for(var e=window,t=nc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=nc(e.document)}return t}function Kd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function AE(e){var t=gS(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&vS(n.ownerDocument.documentElement,n)){if(r!==null&&Kd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Of(n,o);var a=Of(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var bE=Kt&&"documentMode"in document&&11>=document.documentMode,br=null,Bp=null,So=null,Fp=!1;function Nf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fp||br==null||br!==nc(r)||(r=br,"selectionStart"in r&&Kd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),So&&Oo(So,r)||(So=r,r=lc(Bp,"onSelect"),0<r.length&&(t=new Wd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}function Ta(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionend:Ta("Transition","TransitionEnd")},Ou={},mS={};Kt&&(mS=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);function Lc(e){if(Ou[e])return Ou[e];if(!kr[e])return e;var t=kr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in mS)return Ou[e]=t[n];return e}var yS=Lc("animationend"),SS=Lc("animationiteration"),CS=Lc("animationstart"),RS=Lc("transitionend"),PS=new Map,Mf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bn(e,t){PS.set(e,t),vr(t,[e])}for(var Nu=0;Nu<Mf.length;Nu++){var Mu=Mf[Nu],kE=Mu.toLowerCase(),xE=Mu[0].toUpperCase()+Mu.slice(1);bn(kE,"on"+xE)}bn(yS,"onAnimationEnd");bn(SS,"onAnimationIteration");bn(CS,"onAnimationStart");bn("dblclick","onDoubleClick");bn("focusin","onFocus");bn("focusout","onBlur");bn(RS,"onTransitionEnd");Wr("onMouseEnter",["mouseout","mouseover"]);Wr("onMouseLeave",["mouseout","mouseover"]);Wr("onPointerEnter",["pointerout","pointerover"]);Wr("onPointerLeave",["pointerout","pointerover"]);vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ho));function Df(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,kw(r,t,void 0,e),e.currentTarget=null}function wS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;Df(i,s,l),o=c}else for(a=0;a<r.length;a++){if(s=r[a],c=s.instance,l=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;Df(i,s,l),o=c}}}if(ic)throw e=Dp,ic=!1,Dp=null,e}function Y(e,t){var n=t[Vp];n===void 0&&(n=t[Vp]=new Set);var r=e+"__bubble";n.has(r)||(ES(t,e,2,!1),n.add(r))}function Du(e,t,n){var r=0;t&&(r|=4),ES(n,e,r,t)}var Ia="_reactListening"+Math.random().toString(36).slice(2);function No(e){if(!e[Ia]){e[Ia]=!0,xy.forEach(function(n){n!=="selectionchange"&&(OE.has(n)||Du(n,!1,e),Du(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ia]||(t[Ia]=!0,Du("selectionchange",!1,t))}}function ES(e,t,n,r){switch(aS(t)){case 1:var i=Hw;break;case 4:i=Kw;break;default:i=Ud}n=i.bind(null,t,n,e),i=void 0,!Mp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ju(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;s!==null;){if(a=nr(s),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}s=s.parentNode}}r=r.return}Ky(function(){var l=o,u=Ld(n),p=[];e:{var d=PS.get(e);if(d!==void 0){var h=Wd,v=e;switch(e){case"keypress":if(qa(n)===0)break e;case"keydown":case"keyup":h=cE;break;case"focusin":v="focus",h=bu;break;case"focusout":v="blur",h=bu;break;case"beforeblur":case"afterblur":h=bu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Gw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=pE;break;case yS:case SS:case CS:h=Zw;break;case RS:h=hE;break;case"scroll":h=Jw;break;case"wheel":h=vE;break;case"copy":case"cut":case"paste":h=tE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Tf}var S=(t&4)!==0,C=!S&&e==="scroll",f=S?d!==null?d+"Capture":null:d;S=[];for(var g=l,y;g!==null;){y=g;var R=y.stateNode;if(y.tag===5&&R!==null&&(y=R,f!==null&&(R=_o(g,f),R!=null&&S.push(Mo(g,R,y)))),C)break;g=g.return}0<S.length&&(d=new h(d,v,null,n,u),p.push({event:d,listeners:S}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==Op&&(v=n.relatedTarget||n.fromElement)&&(nr(v)||v[Jt]))break e;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(v=n.relatedTarget||n.toElement,h=l,v=v?nr(v):null,v!==null&&(C=gr(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=l),h!==v)){if(S=wf,R="onMouseLeave",f="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(S=Tf,R="onPointerLeave",f="onPointerEnter",g="pointer"),C=h==null?d:xr(h),y=v==null?d:xr(v),d=new S(R,g+"leave",h,n,u),d.target=C,d.relatedTarget=y,R=null,nr(u)===l&&(S=new S(f,g+"enter",v,n,u),S.target=y,S.relatedTarget=C,R=S),C=R,h&&v)t:{for(S=h,f=v,g=0,y=S;y;y=wr(y))g++;for(y=0,R=f;R;R=wr(R))y++;for(;0<g-y;)S=wr(S),g--;for(;0<y-g;)f=wr(f),y--;for(;g--;){if(S===f||f!==null&&S===f.alternate)break t;S=wr(S),f=wr(f)}S=null}else S=null;h!==null&&jf(p,d,h,S,!1),v!==null&&C!==null&&jf(p,C,v,S,!0)}}e:{if(d=l?xr(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var P=PE;else if(Af(d))if(hS)P=IE;else{P=EE;var w=wE}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(P=TE);if(P&&(P=P(e,l))){dS(p,P,n,u);break e}w&&w(e,d,l),e==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&_p(d,"number",d.value)}switch(w=l?xr(l):window,e){case"focusin":(Af(w)||w.contentEditable==="true")&&(br=w,Bp=l,So=null);break;case"focusout":So=Bp=br=null;break;case"mousedown":Fp=!0;break;case"contextmenu":case"mouseup":case"dragend":Fp=!1,Nf(p,n,u);break;case"selectionchange":if(bE)break;case"keydown":case"keyup":Nf(p,n,u)}var T;if(Hd)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ar?uS(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(lS&&n.locale!=="ko"&&(Ar||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ar&&(T=cS()):(pn=u,$d="value"in pn?pn.value:pn.textContent,Ar=!0)),w=lc(l,E),0<w.length&&(E=new Ef(E,e,null,n,u),p.push({event:E,listeners:w}),T?E.data=T:(T=pS(n),T!==null&&(E.data=T)))),(T=mE?yE(e,n):SE(e,n))&&(l=lc(l,"onBeforeInput"),0<l.length&&(u=new Ef("onBeforeInput","beforeinput",null,n,u),p.push({event:u,listeners:l}),u.data=T))}wS(p,t)})}function Mo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function lc(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=_o(e,n),o!=null&&r.unshift(Mo(e,o,i)),o=_o(e,t),o!=null&&r.push(Mo(e,o,i))),e=e.return}return r}function wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jf(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(c!==null&&c===r)break;s.tag===5&&l!==null&&(s=l,i?(c=_o(n,o),c!=null&&a.unshift(Mo(n,c,s))):i||(c=_o(n,o),c!=null&&a.push(Mo(n,c,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var NE=/\r\n?/g,ME=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(NE,`
`).replace(ME,"")}function _a(e,t,n){if(t=zf(t),zf(e)!==t&&n)throw Error(k(425))}function uc(){}var qp=null,Up=null;function $p(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wp=typeof setTimeout=="function"?setTimeout:void 0,DE=typeof clearTimeout=="function"?clearTimeout:void 0,Lf=typeof Promise=="function"?Promise:void 0,jE=typeof queueMicrotask=="function"?queueMicrotask:typeof Lf<"u"?function(e){return Lf.resolve(null).then(e).catch(zE)}:Wp;function zE(e){setTimeout(function(){throw e})}function zu(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ko(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ko(t)}function yn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ii=Math.random().toString(36).slice(2),kt="__reactFiber$"+ii,Do="__reactProps$"+ii,Jt="__reactContainer$"+ii,Vp="__reactEvents$"+ii,LE="__reactListeners$"+ii,BE="__reactHandles$"+ii;function nr(e){var t=e[kt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jt]||n[kt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Bf(e);e!==null;){if(n=e[kt])return n;e=Bf(e)}return t}e=n,n=e.parentNode}return null}function Xo(e){return e=e[kt]||e[Jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(k(33))}function Bc(e){return e[Do]||null}var Hp=[],Or=-1;function kn(e){return{current:e}}function Z(e){0>Or||(e.current=Hp[Or],Hp[Or]=null,Or--)}function X(e,t){Or++,Hp[Or]=e.current,e.current=t}var In={},Le=kn(In),Qe=kn(!1),cr=In;function Vr(e,t){var n=e.type.contextTypes;if(!n)return In;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ge(e){return e=e.childContextTypes,e!=null}function pc(){Z(Qe),Z(Le)}function Ff(e,t,n){if(Le.current!==In)throw Error(k(168));X(Le,t),X(Qe,n)}function TS(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(k(108,ww(e)||"Unknown",i));return se({},n,r)}function dc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||In,cr=Le.current,X(Le,e),X(Qe,Qe.current),!0}function qf(e,t,n){var r=e.stateNode;if(!r)throw Error(k(169));n?(e=TS(e,t,cr),r.__reactInternalMemoizedMergedChildContext=e,Z(Qe),Z(Le),X(Le,e)):Z(Qe),X(Qe,n)}var Ut=null,Fc=!1,Lu=!1;function IS(e){Ut===null?Ut=[e]:Ut.push(e)}function FE(e){Fc=!0,IS(e)}function xn(){if(!Lu&&Ut!==null){Lu=!0;var e=0,t=Q;try{var n=Ut;for(Q=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ut=null,Fc=!1}catch(i){throw Ut!==null&&(Ut=Ut.slice(e+1)),Xy(Bd,xn),i}finally{Q=t,Lu=!1}}return null}var Nr=[],Mr=0,hc=null,fc=0,ct=[],lt=0,lr=null,$t=1,Wt="";function Zn(e,t){Nr[Mr++]=fc,Nr[Mr++]=hc,hc=e,fc=t}function _S(e,t,n){ct[lt++]=$t,ct[lt++]=Wt,ct[lt++]=lr,lr=e;var r=$t;e=Wt;var i=32-St(r)-1;r&=~(1<<i),n+=1;var o=32-St(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,$t=1<<32-St(t)+i|n<<i|r,Wt=o+e}else $t=1<<o|n<<i|r,Wt=e}function Jd(e){e.return!==null&&(Zn(e,1),_S(e,1,0))}function Qd(e){for(;e===hc;)hc=Nr[--Mr],Nr[Mr]=null,fc=Nr[--Mr],Nr[Mr]=null;for(;e===lr;)lr=ct[--lt],ct[lt]=null,Wt=ct[--lt],ct[lt]=null,$t=ct[--lt],ct[lt]=null}var nt=null,tt=null,ee=!1,yt=null;function AS(e,t){var n=ut(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Uf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nt=e,tt=yn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nt=e,tt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=lr!==null?{id:$t,overflow:Wt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ut(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,nt=e,tt=null,!0):!1;default:return!1}}function Kp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Jp(e){if(ee){var t=tt;if(t){var n=t;if(!Uf(e,t)){if(Kp(e))throw Error(k(418));t=yn(n.nextSibling);var r=nt;t&&Uf(e,t)?AS(r,n):(e.flags=e.flags&-4097|2,ee=!1,nt=e)}}else{if(Kp(e))throw Error(k(418));e.flags=e.flags&-4097|2,ee=!1,nt=e}}}function $f(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nt=e}function Aa(e){if(e!==nt)return!1;if(!ee)return $f(e),ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$p(e.type,e.memoizedProps)),t&&(t=tt)){if(Kp(e))throw bS(),Error(k(418));for(;t;)AS(e,t),t=yn(t.nextSibling)}if($f(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(k(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tt=yn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tt=null}}else tt=nt?yn(e.stateNode.nextSibling):null;return!0}function bS(){for(var e=tt;e;)e=yn(e.nextSibling)}function Hr(){tt=nt=null,ee=!1}function Gd(e){yt===null?yt=[e]:yt.push(e)}var qE=Xt.ReactCurrentBatchConfig;function Ci(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(k(309));var r=n.stateNode}if(!r)throw Error(k(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(k(284));if(!n._owner)throw Error(k(290,e))}return e}function ba(e,t){throw e=Object.prototype.toString.call(t),Error(k(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wf(e){var t=e._init;return t(e._payload)}function kS(e){function t(f,g){if(e){var y=f.deletions;y===null?(f.deletions=[g],f.flags|=16):y.push(g)}}function n(f,g){if(!e)return null;for(;g!==null;)t(f,g),g=g.sibling;return null}function r(f,g){for(f=new Map;g!==null;)g.key!==null?f.set(g.key,g):f.set(g.index,g),g=g.sibling;return f}function i(f,g){return f=Pn(f,g),f.index=0,f.sibling=null,f}function o(f,g,y){return f.index=y,e?(y=f.alternate,y!==null?(y=y.index,y<g?(f.flags|=2,g):y):(f.flags|=2,g)):(f.flags|=1048576,g)}function a(f){return e&&f.alternate===null&&(f.flags|=2),f}function s(f,g,y,R){return g===null||g.tag!==6?(g=Vu(y,f.mode,R),g.return=f,g):(g=i(g,y),g.return=f,g)}function c(f,g,y,R){var P=y.type;return P===_r?u(f,g,y.props.children,R,y.key):g!==null&&(g.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===sn&&Wf(P)===g.type)?(R=i(g,y.props),R.ref=Ci(f,g,y),R.return=f,R):(R=Ja(y.type,y.key,y.props,null,f.mode,R),R.ref=Ci(f,g,y),R.return=f,R)}function l(f,g,y,R){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Hu(y,f.mode,R),g.return=f,g):(g=i(g,y.children||[]),g.return=f,g)}function u(f,g,y,R,P){return g===null||g.tag!==7?(g=ar(y,f.mode,R,P),g.return=f,g):(g=i(g,y),g.return=f,g)}function p(f,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Vu(""+g,f.mode,y),g.return=f,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ya:return y=Ja(g.type,g.key,g.props,null,f.mode,y),y.ref=Ci(f,null,g),y.return=f,y;case Ir:return g=Hu(g,f.mode,y),g.return=f,g;case sn:var R=g._init;return p(f,R(g._payload),y)}if(uo(g)||vi(g))return g=ar(g,f.mode,y,null),g.return=f,g;ba(f,g)}return null}function d(f,g,y,R){var P=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return P!==null?null:s(f,g,""+y,R);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ya:return y.key===P?c(f,g,y,R):null;case Ir:return y.key===P?l(f,g,y,R):null;case sn:return P=y._init,d(f,g,P(y._payload),R)}if(uo(y)||vi(y))return P!==null?null:u(f,g,y,R,null);ba(f,y)}return null}function h(f,g,y,R,P){if(typeof R=="string"&&R!==""||typeof R=="number")return f=f.get(y)||null,s(g,f,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ya:return f=f.get(R.key===null?y:R.key)||null,c(g,f,R,P);case Ir:return f=f.get(R.key===null?y:R.key)||null,l(g,f,R,P);case sn:var w=R._init;return h(f,g,y,w(R._payload),P)}if(uo(R)||vi(R))return f=f.get(y)||null,u(g,f,R,P,null);ba(g,R)}return null}function v(f,g,y,R){for(var P=null,w=null,T=g,E=g=0,x=null;T!==null&&E<y.length;E++){T.index>E?(x=T,T=null):x=T.sibling;var D=d(f,T,y[E],R);if(D===null){T===null&&(T=x);break}e&&T&&D.alternate===null&&t(f,T),g=o(D,g,E),w===null?P=D:w.sibling=D,w=D,T=x}if(E===y.length)return n(f,T),ee&&Zn(f,E),P;if(T===null){for(;E<y.length;E++)T=p(f,y[E],R),T!==null&&(g=o(T,g,E),w===null?P=T:w.sibling=T,w=T);return ee&&Zn(f,E),P}for(T=r(f,T);E<y.length;E++)x=h(T,f,E,y[E],R),x!==null&&(e&&x.alternate!==null&&T.delete(x.key===null?E:x.key),g=o(x,g,E),w===null?P=x:w.sibling=x,w=x);return e&&T.forEach(function(G){return t(f,G)}),ee&&Zn(f,E),P}function S(f,g,y,R){var P=vi(y);if(typeof P!="function")throw Error(k(150));if(y=P.call(y),y==null)throw Error(k(151));for(var w=P=null,T=g,E=g=0,x=null,D=y.next();T!==null&&!D.done;E++,D=y.next()){T.index>E?(x=T,T=null):x=T.sibling;var G=d(f,T,D.value,R);if(G===null){T===null&&(T=x);break}e&&T&&G.alternate===null&&t(f,T),g=o(G,g,E),w===null?P=G:w.sibling=G,w=G,T=x}if(D.done)return n(f,T),ee&&Zn(f,E),P;if(T===null){for(;!D.done;E++,D=y.next())D=p(f,D.value,R),D!==null&&(g=o(D,g,E),w===null?P=D:w.sibling=D,w=D);return ee&&Zn(f,E),P}for(T=r(f,T);!D.done;E++,D=y.next())D=h(T,f,E,D.value,R),D!==null&&(e&&D.alternate!==null&&T.delete(D.key===null?E:D.key),g=o(D,g,E),w===null?P=D:w.sibling=D,w=D);return e&&T.forEach(function(We){return t(f,We)}),ee&&Zn(f,E),P}function C(f,g,y,R){if(typeof y=="object"&&y!==null&&y.type===_r&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ya:e:{for(var P=y.key,w=g;w!==null;){if(w.key===P){if(P=y.type,P===_r){if(w.tag===7){n(f,w.sibling),g=i(w,y.props.children),g.return=f,f=g;break e}}else if(w.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===sn&&Wf(P)===w.type){n(f,w.sibling),g=i(w,y.props),g.ref=Ci(f,w,y),g.return=f,f=g;break e}n(f,w);break}else t(f,w);w=w.sibling}y.type===_r?(g=ar(y.props.children,f.mode,R,y.key),g.return=f,f=g):(R=Ja(y.type,y.key,y.props,null,f.mode,R),R.ref=Ci(f,g,y),R.return=f,f=R)}return a(f);case Ir:e:{for(w=y.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(f,g.sibling),g=i(g,y.children||[]),g.return=f,f=g;break e}else{n(f,g);break}else t(f,g);g=g.sibling}g=Hu(y,f.mode,R),g.return=f,f=g}return a(f);case sn:return w=y._init,C(f,g,w(y._payload),R)}if(uo(y))return v(f,g,y,R);if(vi(y))return S(f,g,y,R);ba(f,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(f,g.sibling),g=i(g,y),g.return=f,f=g):(n(f,g),g=Vu(y,f.mode,R),g.return=f,f=g),a(f)):n(f,g)}return C}var Kr=kS(!0),xS=kS(!1),vc=kn(null),gc=null,Dr=null,Xd=null;function Yd(){Xd=Dr=gc=null}function Zd(e){var t=vc.current;Z(vc),e._currentValue=t}function Qp(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ur(e,t){gc=e,Xd=Dr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Je=!0),e.firstContext=null)}function dt(e){var t=e._currentValue;if(Xd!==e)if(e={context:e,memoizedValue:t,next:null},Dr===null){if(gc===null)throw Error(k(308));Dr=e,gc.dependencies={lanes:0,firstContext:e}}else Dr=Dr.next=e;return t}var rr=null;function eh(e){rr===null?rr=[e]:rr.push(e)}function OS(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,eh(t)):(n.next=i.next,i.next=n),t.interleaved=n,Qt(e,r)}function Qt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var on=!1;function th(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Qt(e,n)}return i=r.interleaved,i===null?(t.next=t,eh(r)):(t.next=i.next,i.next=t),r.interleaved=t,Qt(e,n)}function Ua(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fd(e,n)}}function Vf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function mc(e,t,n,r){var i=e.updateQueue;on=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,a===null?o=l:a.next=l,a=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(o!==null){var p=i.baseState;a=0,u=l=c=null,s=o;do{var d=s.lane,h=s.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=e,S=s;switch(d=t,h=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){p=v.call(h,p,d);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,d=typeof v=="function"?v.call(h,p,d):v,d==null)break e;p=se({},p,d);break e;case 2:on=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=h,c=p):u=u.next=h,a|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(u===null&&(c=p),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);pr|=a,e.lanes=a,e.memoizedState=p}}function Hf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(k(191,i));i.call(r)}}}var Yo={},Nt=kn(Yo),jo=kn(Yo),zo=kn(Yo);function ir(e){if(e===Yo)throw Error(k(174));return e}function nh(e,t){switch(X(zo,t),X(jo,e),X(Nt,Yo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:bp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=bp(t,e)}Z(Nt),X(Nt,t)}function Jr(){Z(Nt),Z(jo),Z(zo)}function MS(e){ir(zo.current);var t=ir(Nt.current),n=bp(t,e.type);t!==n&&(X(jo,e),X(Nt,n))}function rh(e){jo.current===e&&(Z(Nt),Z(jo))}var re=kn(0);function yc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bu=[];function ih(){for(var e=0;e<Bu.length;e++)Bu[e]._workInProgressVersionPrimary=null;Bu.length=0}var $a=Xt.ReactCurrentDispatcher,Fu=Xt.ReactCurrentBatchConfig,ur=0,ie=null,fe=null,ge=null,Sc=!1,Co=!1,Lo=0,UE=0;function Ae(){throw Error(k(321))}function sh(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pt(e[n],t[n]))return!1;return!0}function oh(e,t,n,r,i,o){if(ur=o,ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=e===null||e.memoizedState===null?HE:KE,e=n(r,i),Co){o=0;do{if(Co=!1,Lo=0,25<=o)throw Error(k(301));o+=1,ge=fe=null,t.updateQueue=null,$a.current=JE,e=n(r,i)}while(Co)}if($a.current=Cc,t=fe!==null&&fe.next!==null,ur=0,ge=fe=ie=null,Sc=!1,t)throw Error(k(300));return e}function ah(){var e=Lo!==0;return Lo=0,e}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?ie.memoizedState=ge=e:ge=ge.next=e,ge}function ht(){if(fe===null){var e=ie.alternate;e=e!==null?e.memoizedState:null}else e=fe.next;var t=ge===null?ie.memoizedState:ge.next;if(t!==null)ge=t,fe=e;else{if(e===null)throw Error(k(310));fe=e,e={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},ge===null?ie.memoizedState=ge=e:ge=ge.next=e}return ge}function Bo(e,t){return typeof t=="function"?t(e):t}function qu(e){var t=ht(),n=t.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=e;var r=fe,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,c=null,l=o;do{var u=l.lane;if((ur&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var p={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(s=c=p,a=r):c=c.next=p,ie.lanes|=u,pr|=u}l=l.next}while(l!==null&&l!==o);c===null?a=r:c.next=s,Pt(r,t.memoizedState)||(Je=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,ie.lanes|=o,pr|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Uu(e){var t=ht(),n=t.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);Pt(o,t.memoizedState)||(Je=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function DS(){}function jS(e,t){var n=ie,r=ht(),i=t(),o=!Pt(r.memoizedState,i);if(o&&(r.memoizedState=i,Je=!0),r=r.queue,ch(BS.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ge!==null&&ge.memoizedState.tag&1){if(n.flags|=2048,Fo(9,LS.bind(null,n,r,i,t),void 0,null),me===null)throw Error(k(349));ur&30||zS(n,t,i)}return i}function zS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ie.updateQueue,t===null?(t={lastEffect:null,stores:null},ie.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function LS(e,t,n,r){t.value=n,t.getSnapshot=r,FS(t)&&qS(e)}function BS(e,t,n){return n(function(){FS(t)&&qS(e)})}function FS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pt(e,n)}catch{return!0}}function qS(e){var t=Qt(e,1);t!==null&&Ct(t,e,1,-1)}function Kf(e){var t=bt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:e},t.queue=e,e=e.dispatch=VE.bind(null,ie,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ie.updateQueue,t===null?(t={lastEffect:null,stores:null},ie.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function US(){return ht().memoizedState}function Wa(e,t,n,r){var i=bt();ie.flags|=e,i.memoizedState=Fo(1|t,n,void 0,r===void 0?null:r)}function qc(e,t,n,r){var i=ht();r=r===void 0?null:r;var o=void 0;if(fe!==null){var a=fe.memoizedState;if(o=a.destroy,r!==null&&sh(r,a.deps)){i.memoizedState=Fo(t,n,o,r);return}}ie.flags|=e,i.memoizedState=Fo(1|t,n,o,r)}function Jf(e,t){return Wa(8390656,8,e,t)}function ch(e,t){return qc(2048,8,e,t)}function $S(e,t){return qc(4,2,e,t)}function WS(e,t){return qc(4,4,e,t)}function VS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function HS(e,t,n){return n=n!=null?n.concat([e]):null,qc(4,4,VS.bind(null,t,e),n)}function lh(){}function KS(e,t){var n=ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&sh(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function JS(e,t){var n=ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&sh(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function QS(e,t,n){return ur&21?(Pt(n,t)||(n=eS(),ie.lanes|=n,pr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Je=!0),e.memoizedState=n)}function $E(e,t){var n=Q;Q=n!==0&&4>n?n:4,e(!0);var r=Fu.transition;Fu.transition={};try{e(!1),t()}finally{Q=n,Fu.transition=r}}function GS(){return ht().memoizedState}function WE(e,t,n){var r=Rn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},XS(e))YS(t,n);else if(n=OS(e,t,n,r),n!==null){var i=qe();Ct(n,e,r,i),ZS(n,t,r)}}function VE(e,t,n){var r=Rn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(XS(e))YS(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Pt(s,a)){var c=t.interleaved;c===null?(i.next=i,eh(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=OS(e,t,i,r),n!==null&&(i=qe(),Ct(n,e,r,i),ZS(n,t,r))}}function XS(e){var t=e.alternate;return e===ie||t!==null&&t===ie}function YS(e,t){Co=Sc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ZS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fd(e,n)}}var Cc={readContext:dt,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useInsertionEffect:Ae,useLayoutEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useMutableSource:Ae,useSyncExternalStore:Ae,useId:Ae,unstable_isNewReconciler:!1},HE={readContext:dt,useCallback:function(e,t){return bt().memoizedState=[e,t===void 0?null:t],e},useContext:dt,useEffect:Jf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Wa(4194308,4,VS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wa(4,2,e,t)},useMemo:function(e,t){var n=bt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=WE.bind(null,ie,e),[r.memoizedState,e]},useRef:function(e){var t=bt();return e={current:e},t.memoizedState=e},useState:Kf,useDebugValue:lh,useDeferredValue:function(e){return bt().memoizedState=e},useTransition:function(){var e=Kf(!1),t=e[0];return e=$E.bind(null,e[1]),bt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ie,i=bt();if(ee){if(n===void 0)throw Error(k(407));n=n()}else{if(n=t(),me===null)throw Error(k(349));ur&30||zS(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Jf(BS.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,LS.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=bt(),t=me.identifierPrefix;if(ee){var n=Wt,r=$t;n=(r&~(1<<32-St(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Lo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=UE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},KE={readContext:dt,useCallback:KS,useContext:dt,useEffect:ch,useImperativeHandle:HS,useInsertionEffect:$S,useLayoutEffect:WS,useMemo:JS,useReducer:qu,useRef:US,useState:function(){return qu(Bo)},useDebugValue:lh,useDeferredValue:function(e){var t=ht();return QS(t,fe.memoizedState,e)},useTransition:function(){var e=qu(Bo)[0],t=ht().memoizedState;return[e,t]},useMutableSource:DS,useSyncExternalStore:jS,useId:GS,unstable_isNewReconciler:!1},JE={readContext:dt,useCallback:KS,useContext:dt,useEffect:ch,useImperativeHandle:HS,useInsertionEffect:$S,useLayoutEffect:WS,useMemo:JS,useReducer:Uu,useRef:US,useState:function(){return Uu(Bo)},useDebugValue:lh,useDeferredValue:function(e){var t=ht();return fe===null?t.memoizedState=e:QS(t,fe.memoizedState,e)},useTransition:function(){var e=Uu(Bo)[0],t=ht().memoizedState;return[e,t]},useMutableSource:DS,useSyncExternalStore:jS,useId:GS,unstable_isNewReconciler:!1};function gt(e,t){if(e&&e.defaultProps){t=se({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Gp(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:se({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Uc={isMounted:function(e){return(e=e._reactInternals)?gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qe(),i=Rn(e),o=Vt(r,i);o.payload=t,n!=null&&(o.callback=n),t=Sn(e,o,i),t!==null&&(Ct(t,e,i,r),Ua(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qe(),i=Rn(e),o=Vt(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Sn(e,o,i),t!==null&&(Ct(t,e,i,r),Ua(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qe(),r=Rn(e),i=Vt(n,r);i.tag=2,t!=null&&(i.callback=t),t=Sn(e,i,r),t!==null&&(Ct(t,e,r,n),Ua(t,e,r))}};function Qf(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Oo(n,r)||!Oo(i,o):!0}function eC(e,t,n){var r=!1,i=In,o=t.contextType;return typeof o=="object"&&o!==null?o=dt(o):(i=Ge(t)?cr:Le.current,r=t.contextTypes,o=(r=r!=null)?Vr(e,i):In),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Uc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Gf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Uc.enqueueReplaceState(t,t.state,null)}function Xp(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},th(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=dt(o):(o=Ge(t)?cr:Le.current,i.context=Vr(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Gp(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Uc.enqueueReplaceState(i,i.state,null),mc(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Qr(e,t){try{var n="",r=t;do n+=Pw(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function $u(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Yp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var QE=typeof WeakMap=="function"?WeakMap:Map;function tC(e,t,n){n=Vt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Pc||(Pc=!0,cd=r),Yp(e,t)},n}function nC(e,t,n){n=Vt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Yp(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Yp(e,t),typeof r!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Xf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new QE;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=lT.bind(null,e,t,n),t.then(e,e))}function Yf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zf(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vt(-1,1),t.tag=2,Sn(n,t,1))),n.lanes|=1),e)}var GE=Xt.ReactCurrentOwner,Je=!1;function Fe(e,t,n,r){t.child=e===null?xS(t,null,n,r):Kr(t,e.child,n,r)}function ev(e,t,n,r,i){n=n.render;var o=t.ref;return Ur(t,i),r=oh(e,t,n,r,o,i),n=ah(),e!==null&&!Je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gt(e,t,i)):(ee&&n&&Jd(t),t.flags|=1,Fe(e,t,r,i),t.child)}function tv(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!mh(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,rC(e,t,o,r,i)):(e=Ja(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(a,r)&&e.ref===t.ref)return Gt(e,t,i)}return t.flags|=1,e=Pn(o,r),e.ref=t.ref,e.return=t,t.child=e}function rC(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Oo(o,r)&&e.ref===t.ref)if(Je=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Je=!0);else return t.lanes=e.lanes,Gt(e,t,i)}return Zp(e,t,n,r,i)}function iC(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},X(zr,et),et|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,X(zr,et),et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,X(zr,et),et|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,X(zr,et),et|=r;return Fe(e,t,i,n),t.child}function sC(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Zp(e,t,n,r,i){var o=Ge(n)?cr:Le.current;return o=Vr(t,o),Ur(t,i),n=oh(e,t,n,r,o,i),r=ah(),e!==null&&!Je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gt(e,t,i)):(ee&&r&&Jd(t),t.flags|=1,Fe(e,t,n,i),t.child)}function nv(e,t,n,r,i){if(Ge(n)){var o=!0;dc(t)}else o=!1;if(Ur(t,i),t.stateNode===null)Va(e,t),eC(t,n,r),Xp(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=dt(l):(l=Ge(n)?cr:Le.current,l=Vr(t,l));var u=n.getDerivedStateFromProps,p=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||c!==l)&&Gf(t,a,r,l),on=!1;var d=t.memoizedState;a.state=d,mc(t,r,a,i),c=t.memoizedState,s!==r||d!==c||Qe.current||on?(typeof u=="function"&&(Gp(t,n,u,r),c=t.memoizedState),(s=on||Qf(t,n,s,r,d,c,l))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,NS(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:gt(t.type,s),a.props=l,p=t.pendingProps,d=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=dt(c):(c=Ge(n)?cr:Le.current,c=Vr(t,c));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==p||d!==c)&&Gf(t,a,r,c),on=!1,d=t.memoizedState,a.state=d,mc(t,r,a,i);var v=t.memoizedState;s!==p||d!==v||Qe.current||on?(typeof h=="function"&&(Gp(t,n,h,r),v=t.memoizedState),(l=on||Qf(t,n,l,r,d,v,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=c,r=l):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return ed(e,t,n,r,o,i)}function ed(e,t,n,r,i,o){sC(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&qf(t,n,!1),Gt(e,t,o);r=t.stateNode,GE.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Kr(t,e.child,null,o),t.child=Kr(t,null,s,o)):Fe(e,t,s,o),t.memoizedState=r.state,i&&qf(t,n,!0),t.child}function oC(e){var t=e.stateNode;t.pendingContext?Ff(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ff(e,t.context,!1),nh(e,t.containerInfo)}function rv(e,t,n,r,i){return Hr(),Gd(i),t.flags|=256,Fe(e,t,n,r),t.child}var td={dehydrated:null,treeContext:null,retryLane:0};function nd(e){return{baseLanes:e,cachePool:null,transitions:null}}function aC(e,t,n){var r=t.pendingProps,i=re.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),X(re,i&1),e===null)return Jp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Vc(a,r,0,null),e=ar(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=nd(n),t.memoizedState=td,e):uh(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return XE(e,t,a,r,s,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,s=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Pn(i,c),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Pn(s,o):(o=ar(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?nd(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=td,r}return o=e.child,e=o.sibling,r=Pn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function uh(e,t){return t=Vc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ka(e,t,n,r){return r!==null&&Gd(r),Kr(t,e.child,null,n),e=uh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function XE(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=$u(Error(k(422))),ka(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Vc({mode:"visible",children:r.children},i,0,null),o=ar(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Kr(t,e.child,null,a),t.child.memoizedState=nd(a),t.memoizedState=td,o);if(!(t.mode&1))return ka(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(k(419)),r=$u(o,r,void 0),ka(e,t,a,r)}if(s=(a&e.childLanes)!==0,Je||s){if(r=me,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Qt(e,i),Ct(r,e,i,-1))}return gh(),r=$u(Error(k(421))),ka(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=uT.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,tt=yn(i.nextSibling),nt=t,ee=!0,yt=null,e!==null&&(ct[lt++]=$t,ct[lt++]=Wt,ct[lt++]=lr,$t=e.id,Wt=e.overflow,lr=t),t=uh(t,r.children),t.flags|=4096,t)}function iv(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Qp(e.return,t,n)}function Wu(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function cC(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Fe(e,t,r.children,n),r=re.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iv(e,n,t);else if(e.tag===19)iv(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(X(re,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&yc(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Wu(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&yc(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Wu(t,!0,n,null,o);break;case"together":Wu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Va(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),pr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(k(153));if(t.child!==null){for(e=t.child,n=Pn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Pn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function YE(e,t,n){switch(t.tag){case 3:oC(t),Hr();break;case 5:MS(t);break;case 1:Ge(t.type)&&dc(t);break;case 4:nh(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;X(vc,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(X(re,re.current&1),t.flags|=128,null):n&t.child.childLanes?aC(e,t,n):(X(re,re.current&1),e=Gt(e,t,n),e!==null?e.sibling:null);X(re,re.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return cC(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),X(re,re.current),r)break;return null;case 22:case 23:return t.lanes=0,iC(e,t,n)}return Gt(e,t,n)}var lC,rd,uC,pC;lC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rd=function(){};uC=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ir(Nt.current);var o=null;switch(n){case"input":i=Tp(e,i),r=Tp(e,r),o=[];break;case"select":i=se({},i,{value:void 0}),r=se({},r,{value:void 0}),o=[];break;case"textarea":i=Ap(e,i),r=Ap(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=uc)}kp(n,r);var a;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(To.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(c!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(o=o||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(To.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Y("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}};pC=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ri(e,t){if(!ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function be(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ZE(e,t,n){var r=t.pendingProps;switch(Qd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(t),null;case 1:return Ge(t.type)&&pc(),be(t),null;case 3:return r=t.stateNode,Jr(),Z(Qe),Z(Le),ih(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Aa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yt!==null&&(pd(yt),yt=null))),rd(e,t),be(t),null;case 5:rh(t);var i=ir(zo.current);if(n=t.type,e!==null&&t.stateNode!=null)uC(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(k(166));return be(t),null}if(e=ir(Nt.current),Aa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[kt]=t,r[Do]=o,e=(t.mode&1)!==0,n){case"dialog":Y("cancel",r),Y("close",r);break;case"iframe":case"object":case"embed":Y("load",r);break;case"video":case"audio":for(i=0;i<ho.length;i++)Y(ho[i],r);break;case"source":Y("error",r);break;case"img":case"image":case"link":Y("error",r),Y("load",r);break;case"details":Y("toggle",r);break;case"input":hf(r,o),Y("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Y("invalid",r);break;case"textarea":vf(r,o),Y("invalid",r)}kp(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&_a(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&_a(r.textContent,s,e),i=["children",""+s]):To.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Y("scroll",r)}switch(n){case"input":Sa(r),ff(r,o,!0);break;case"textarea":Sa(r),gf(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=uc)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=By(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[kt]=t,e[Do]=r,lC(e,t,!1,!1),t.stateNode=e;e:{switch(a=xp(n,r),n){case"dialog":Y("cancel",e),Y("close",e),i=r;break;case"iframe":case"object":case"embed":Y("load",e),i=r;break;case"video":case"audio":for(i=0;i<ho.length;i++)Y(ho[i],e);i=r;break;case"source":Y("error",e),i=r;break;case"img":case"image":case"link":Y("error",e),Y("load",e),i=r;break;case"details":Y("toggle",e),i=r;break;case"input":hf(e,r),i=Tp(e,r),Y("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=se({},r,{value:void 0}),Y("invalid",e);break;case"textarea":vf(e,r),i=Ap(e,r),Y("invalid",e);break;default:i=r}kp(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="style"?Uy(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Fy(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Io(e,c):typeof c=="number"&&Io(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(To.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Y("scroll",e):c!=null&&Md(e,o,c,a))}switch(n){case"input":Sa(e),ff(e,r,!1);break;case"textarea":Sa(e),gf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Tn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Lr(e,!!r.multiple,o,!1):r.defaultValue!=null&&Lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=uc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return be(t),null;case 6:if(e&&t.stateNode!=null)pC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(k(166));if(n=ir(zo.current),ir(Nt.current),Aa(t)){if(r=t.stateNode,n=t.memoizedProps,r[kt]=t,(o=r.nodeValue!==n)&&(e=nt,e!==null))switch(e.tag){case 3:_a(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_a(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kt]=t,t.stateNode=r}return be(t),null;case 13:if(Z(re),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ee&&tt!==null&&t.mode&1&&!(t.flags&128))bS(),Hr(),t.flags|=98560,o=!1;else if(o=Aa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(k(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(k(317));o[kt]=t}else Hr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;be(t),o=!1}else yt!==null&&(pd(yt),yt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||re.current&1?ve===0&&(ve=3):gh())),t.updateQueue!==null&&(t.flags|=4),be(t),null);case 4:return Jr(),rd(e,t),e===null&&No(t.stateNode.containerInfo),be(t),null;case 10:return Zd(t.type._context),be(t),null;case 17:return Ge(t.type)&&pc(),be(t),null;case 19:if(Z(re),o=t.memoizedState,o===null)return be(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Ri(o,!1);else{if(ve!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=yc(e),a!==null){for(t.flags|=128,Ri(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return X(re,re.current&1|2),t.child}e=e.sibling}o.tail!==null&&le()>Gr&&(t.flags|=128,r=!0,Ri(o,!1),t.lanes=4194304)}else{if(!r)if(e=yc(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ri(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ee)return be(t),null}else 2*le()-o.renderingStartTime>Gr&&n!==1073741824&&(t.flags|=128,r=!0,Ri(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=le(),t.sibling=null,n=re.current,X(re,r?n&1|2:n&1),t):(be(t),null);case 22:case 23:return vh(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?et&1073741824&&(be(t),t.subtreeFlags&6&&(t.flags|=8192)):be(t),null;case 24:return null;case 25:return null}throw Error(k(156,t.tag))}function eT(e,t){switch(Qd(t),t.tag){case 1:return Ge(t.type)&&pc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jr(),Z(Qe),Z(Le),ih(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return rh(t),null;case 13:if(Z(re),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(k(340));Hr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Z(re),null;case 4:return Jr(),null;case 10:return Zd(t.type._context),null;case 22:case 23:return vh(),null;case 24:return null;default:return null}}var xa=!1,je=!1,tT=typeof WeakSet=="function"?WeakSet:Set,N=null;function jr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ce(e,t,r)}else n.current=null}function id(e,t,n){try{n()}catch(r){ce(e,t,r)}}var sv=!1;function nT(e,t){if(qp=ac,e=gS(),Kd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,c=-1,l=0,u=0,p=e,d=null;t:for(;;){for(var h;p!==n||i!==0&&p.nodeType!==3||(s=a+i),p!==o||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(h=p.firstChild)!==null;)d=p,p=h;for(;;){if(p===e)break t;if(d===n&&++l===i&&(s=a),d===o&&++u===r&&(c=a),(h=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=h}n=s===-1||c===-1?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Up={focusedElem:e,selectionRange:n},ac=!1,N=t;N!==null;)if(t=N,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,N=e;else for(;N!==null;){t=N;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,C=v.memoizedState,f=t.stateNode,g=f.getSnapshotBeforeUpdate(t.elementType===t.type?S:gt(t.type,S),C);f.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(k(163))}}catch(R){ce(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,N=e;break}N=t.return}return v=sv,sv=!1,v}function Ro(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&id(t,n,o)}i=i.next}while(i!==r)}}function $c(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function dC(e){var t=e.alternate;t!==null&&(e.alternate=null,dC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kt],delete t[Do],delete t[Vp],delete t[LE],delete t[BE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hC(e){return e.tag===5||e.tag===3||e.tag===4}function ov(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function od(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=uc));else if(r!==4&&(e=e.child,e!==null))for(od(e,t,n),e=e.sibling;e!==null;)od(e,t,n),e=e.sibling}function ad(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ad(e,t,n),e=e.sibling;e!==null;)ad(e,t,n),e=e.sibling}var Re=null,mt=!1;function tn(e,t,n){for(n=n.child;n!==null;)fC(e,t,n),n=n.sibling}function fC(e,t,n){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Dc,n)}catch{}switch(n.tag){case 5:je||jr(n,t);case 6:var r=Re,i=mt;Re=null,tn(e,t,n),Re=r,mt=i,Re!==null&&(mt?(e=Re,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Re.removeChild(n.stateNode));break;case 18:Re!==null&&(mt?(e=Re,n=n.stateNode,e.nodeType===8?zu(e.parentNode,n):e.nodeType===1&&zu(e,n),ko(e)):zu(Re,n.stateNode));break;case 4:r=Re,i=mt,Re=n.stateNode.containerInfo,mt=!0,tn(e,t,n),Re=r,mt=i;break;case 0:case 11:case 14:case 15:if(!je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&id(n,t,a),i=i.next}while(i!==r)}tn(e,t,n);break;case 1:if(!je&&(jr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){ce(n,t,s)}tn(e,t,n);break;case 21:tn(e,t,n);break;case 22:n.mode&1?(je=(r=je)||n.memoizedState!==null,tn(e,t,n),je=r):tn(e,t,n);break;default:tn(e,t,n)}}function av(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new tT),t.forEach(function(r){var i=pT.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Re=s.stateNode,mt=!1;break e;case 3:Re=s.stateNode.containerInfo,mt=!0;break e;case 4:Re=s.stateNode.containerInfo,mt=!0;break e}s=s.return}if(Re===null)throw Error(k(160));fC(o,a,i),Re=null,mt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){ce(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vC(t,e),t=t.sibling}function vC(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vt(t,e),_t(e),r&4){try{Ro(3,e,e.return),$c(3,e)}catch(S){ce(e,e.return,S)}try{Ro(5,e,e.return)}catch(S){ce(e,e.return,S)}}break;case 1:vt(t,e),_t(e),r&512&&n!==null&&jr(n,n.return);break;case 5:if(vt(t,e),_t(e),r&512&&n!==null&&jr(n,n.return),e.flags&32){var i=e.stateNode;try{Io(i,"")}catch(S){ce(e,e.return,S)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&zy(i,o),xp(s,a);var l=xp(s,o);for(a=0;a<c.length;a+=2){var u=c[a],p=c[a+1];u==="style"?Uy(i,p):u==="dangerouslySetInnerHTML"?Fy(i,p):u==="children"?Io(i,p):Md(i,u,p,l)}switch(s){case"input":Ip(i,o);break;case"textarea":Ly(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Lr(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?Lr(i,!!o.multiple,o.defaultValue,!0):Lr(i,!!o.multiple,o.multiple?[]:"",!1))}i[Do]=o}catch(S){ce(e,e.return,S)}}break;case 6:if(vt(t,e),_t(e),r&4){if(e.stateNode===null)throw Error(k(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(S){ce(e,e.return,S)}}break;case 3:if(vt(t,e),_t(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ko(t.containerInfo)}catch(S){ce(e,e.return,S)}break;case 4:vt(t,e),_t(e);break;case 13:vt(t,e),_t(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(hh=le())),r&4&&av(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(je=(l=je)||u,vt(t,e),je=l):vt(t,e),_t(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!u&&e.mode&1)for(N=e,u=e.child;u!==null;){for(p=N=u;N!==null;){switch(d=N,h=d.child,d.tag){case 0:case 11:case 14:case 15:Ro(4,d,d.return);break;case 1:jr(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(S){ce(r,n,S)}}break;case 5:jr(d,d.return);break;case 22:if(d.memoizedState!==null){lv(p);continue}}h!==null?(h.return=d,N=h):lv(p)}u=u.sibling}e:for(u=null,p=e;;){if(p.tag===5){if(u===null){u=p;try{i=p.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=qy("display",a))}catch(S){ce(e,e.return,S)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=l?"":p.memoizedProps}catch(S){ce(e,e.return,S)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vt(t,e),_t(e),r&4&&av(e);break;case 21:break;default:vt(t,e),_t(e)}}function _t(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(hC(n)){var r=n;break e}n=n.return}throw Error(k(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Io(i,""),r.flags&=-33);var o=ov(e);ad(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=ov(e);od(e,s,a);break;default:throw Error(k(161))}}catch(c){ce(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rT(e,t,n){N=e,gC(e)}function gC(e,t,n){for(var r=(e.mode&1)!==0;N!==null;){var i=N,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||xa;if(!a){var s=i.alternate,c=s!==null&&s.memoizedState!==null||je;s=xa;var l=je;if(xa=a,(je=c)&&!l)for(N=i;N!==null;)a=N,c=a.child,a.tag===22&&a.memoizedState!==null?uv(i):c!==null?(c.return=a,N=c):uv(i);for(;o!==null;)N=o,gC(o),o=o.sibling;N=i,xa=s,je=l}cv(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,N=o):cv(e)}}function cv(e){for(;N!==null;){var t=N;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:je||$c(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!je)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Hf(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Hf(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&ko(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(k(163))}je||t.flags&512&&sd(t)}catch(d){ce(t,t.return,d)}}if(t===e){N=null;break}if(n=t.sibling,n!==null){n.return=t.return,N=n;break}N=t.return}}function lv(e){for(;N!==null;){var t=N;if(t===e){N=null;break}var n=t.sibling;if(n!==null){n.return=t.return,N=n;break}N=t.return}}function uv(e){for(;N!==null;){var t=N;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$c(4,t)}catch(c){ce(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){ce(t,i,c)}}var o=t.return;try{sd(t)}catch(c){ce(t,o,c)}break;case 5:var a=t.return;try{sd(t)}catch(c){ce(t,a,c)}}}catch(c){ce(t,t.return,c)}if(t===e){N=null;break}var s=t.sibling;if(s!==null){s.return=t.return,N=s;break}N=t.return}}var iT=Math.ceil,Rc=Xt.ReactCurrentDispatcher,ph=Xt.ReactCurrentOwner,pt=Xt.ReactCurrentBatchConfig,J=0,me=null,pe=null,we=0,et=0,zr=kn(0),ve=0,qo=null,pr=0,Wc=0,dh=0,Po=null,Ke=null,hh=0,Gr=1/0,Ft=null,Pc=!1,cd=null,Cn=null,Oa=!1,dn=null,wc=0,wo=0,ld=null,Ha=-1,Ka=0;function qe(){return J&6?le():Ha!==-1?Ha:Ha=le()}function Rn(e){return e.mode&1?J&2&&we!==0?we&-we:qE.transition!==null?(Ka===0&&(Ka=eS()),Ka):(e=Q,e!==0||(e=window.event,e=e===void 0?16:aS(e.type)),e):1}function Ct(e,t,n,r){if(50<wo)throw wo=0,ld=null,Error(k(185));Qo(e,n,r),(!(J&2)||e!==me)&&(e===me&&(!(J&2)&&(Wc|=n),ve===4&&un(e,we)),Xe(e,r),n===1&&J===0&&!(t.mode&1)&&(Gr=le()+500,Fc&&xn()))}function Xe(e,t){var n=e.callbackNode;qw(e,t);var r=oc(e,e===me?we:0);if(r===0)n!==null&&Sf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Sf(n),t===1)e.tag===0?FE(pv.bind(null,e)):IS(pv.bind(null,e)),jE(function(){!(J&6)&&xn()}),n=null;else{switch(tS(r)){case 1:n=Bd;break;case 4:n=Yy;break;case 16:n=sc;break;case 536870912:n=Zy;break;default:n=sc}n=EC(n,mC.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function mC(e,t){if(Ha=-1,Ka=0,J&6)throw Error(k(327));var n=e.callbackNode;if($r()&&e.callbackNode!==n)return null;var r=oc(e,e===me?we:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ec(e,r);else{t=r;var i=J;J|=2;var o=SC();(me!==e||we!==t)&&(Ft=null,Gr=le()+500,or(e,t));do try{aT();break}catch(s){yC(e,s)}while(1);Yd(),Rc.current=o,J=i,pe!==null?t=0:(me=null,we=0,t=ve)}if(t!==0){if(t===2&&(i=jp(e),i!==0&&(r=i,t=ud(e,i))),t===1)throw n=qo,or(e,0),un(e,r),Xe(e,le()),n;if(t===6)un(e,r);else{if(i=e.current.alternate,!(r&30)&&!sT(i)&&(t=Ec(e,r),t===2&&(o=jp(e),o!==0&&(r=o,t=ud(e,o))),t===1))throw n=qo,or(e,0),un(e,r),Xe(e,le()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(k(345));case 2:er(e,Ke,Ft);break;case 3:if(un(e,r),(r&130023424)===r&&(t=hh+500-le(),10<t)){if(oc(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){qe(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wp(er.bind(null,e,Ke,Ft),t);break}er(e,Ke,Ft);break;case 4:if(un(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-St(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iT(r/1960))-r,10<r){e.timeoutHandle=Wp(er.bind(null,e,Ke,Ft),r);break}er(e,Ke,Ft);break;case 5:er(e,Ke,Ft);break;default:throw Error(k(329))}}}return Xe(e,le()),e.callbackNode===n?mC.bind(null,e):null}function ud(e,t){var n=Po;return e.current.memoizedState.isDehydrated&&(or(e,t).flags|=256),e=Ec(e,t),e!==2&&(t=Ke,Ke=n,t!==null&&pd(t)),e}function pd(e){Ke===null?Ke=e:Ke.push.apply(Ke,e)}function sT(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Pt(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function un(e,t){for(t&=~dh,t&=~Wc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-St(t),r=1<<n;e[n]=-1,t&=~r}}function pv(e){if(J&6)throw Error(k(327));$r();var t=oc(e,0);if(!(t&1))return Xe(e,le()),null;var n=Ec(e,t);if(e.tag!==0&&n===2){var r=jp(e);r!==0&&(t=r,n=ud(e,r))}if(n===1)throw n=qo,or(e,0),un(e,t),Xe(e,le()),n;if(n===6)throw Error(k(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,er(e,Ke,Ft),Xe(e,le()),null}function fh(e,t){var n=J;J|=1;try{return e(t)}finally{J=n,J===0&&(Gr=le()+500,Fc&&xn())}}function dr(e){dn!==null&&dn.tag===0&&!(J&6)&&$r();var t=J;J|=1;var n=pt.transition,r=Q;try{if(pt.transition=null,Q=1,e)return e()}finally{Q=r,pt.transition=n,J=t,!(J&6)&&xn()}}function vh(){et=zr.current,Z(zr)}function or(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,DE(n)),pe!==null)for(n=pe.return;n!==null;){var r=n;switch(Qd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pc();break;case 3:Jr(),Z(Qe),Z(Le),ih();break;case 5:rh(r);break;case 4:Jr();break;case 13:Z(re);break;case 19:Z(re);break;case 10:Zd(r.type._context);break;case 22:case 23:vh()}n=n.return}if(me=e,pe=e=Pn(e.current,null),we=et=t,ve=0,qo=null,dh=Wc=pr=0,Ke=Po=null,rr!==null){for(t=0;t<rr.length;t++)if(n=rr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}rr=null}return e}function yC(e,t){do{var n=pe;try{if(Yd(),$a.current=Cc,Sc){for(var r=ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sc=!1}if(ur=0,ge=fe=ie=null,Co=!1,Lo=0,ph.current=null,n===null||n.return===null){ve=1,qo=t,pe=null;break}e:{var o=e,a=n.return,s=n,c=t;if(t=we,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=s,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=Yf(a);if(h!==null){h.flags&=-257,Zf(h,a,s,o,t),h.mode&1&&Xf(o,l,t),t=h,c=l;var v=t.updateQueue;if(v===null){var S=new Set;S.add(c),t.updateQueue=S}else v.add(c);break e}else{if(!(t&1)){Xf(o,l,t),gh();break e}c=Error(k(426))}}else if(ee&&s.mode&1){var C=Yf(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Zf(C,a,s,o,t),Gd(Qr(c,s));break e}}o=c=Qr(c,s),ve!==4&&(ve=2),Po===null?Po=[o]:Po.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var f=tC(o,c,t);Vf(o,f);break e;case 1:s=c;var g=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Cn===null||!Cn.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var R=nC(o,s,t);Vf(o,R);break e}}o=o.return}while(o!==null)}RC(n)}catch(P){t=P,pe===n&&n!==null&&(pe=n=n.return);continue}break}while(1)}function SC(){var e=Rc.current;return Rc.current=Cc,e===null?Cc:e}function gh(){(ve===0||ve===3||ve===2)&&(ve=4),me===null||!(pr&268435455)&&!(Wc&268435455)||un(me,we)}function Ec(e,t){var n=J;J|=2;var r=SC();(me!==e||we!==t)&&(Ft=null,or(e,t));do try{oT();break}catch(i){yC(e,i)}while(1);if(Yd(),J=n,Rc.current=r,pe!==null)throw Error(k(261));return me=null,we=0,ve}function oT(){for(;pe!==null;)CC(pe)}function aT(){for(;pe!==null&&!Ow();)CC(pe)}function CC(e){var t=wC(e.alternate,e,et);e.memoizedProps=e.pendingProps,t===null?RC(e):pe=t,ph.current=null}function RC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=eT(n,t),n!==null){n.flags&=32767,pe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ve=6,pe=null;return}}else if(n=ZE(n,t,et),n!==null){pe=n;return}if(t=t.sibling,t!==null){pe=t;return}pe=t=e}while(t!==null);ve===0&&(ve=5)}function er(e,t,n){var r=Q,i=pt.transition;try{pt.transition=null,Q=1,cT(e,t,n,r)}finally{pt.transition=i,Q=r}return null}function cT(e,t,n,r){do $r();while(dn!==null);if(J&6)throw Error(k(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(k(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Uw(e,o),e===me&&(pe=me=null,we=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oa||(Oa=!0,EC(sc,function(){return $r(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=pt.transition,pt.transition=null;var a=Q;Q=1;var s=J;J|=4,ph.current=null,nT(e,n),vC(n,e),AE(Up),ac=!!qp,Up=qp=null,e.current=n,rT(n),Nw(),J=s,Q=a,pt.transition=o}else e.current=n;if(Oa&&(Oa=!1,dn=e,wc=i),o=e.pendingLanes,o===0&&(Cn=null),jw(n.stateNode),Xe(e,le()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Pc)throw Pc=!1,e=cd,cd=null,e;return wc&1&&e.tag!==0&&$r(),o=e.pendingLanes,o&1?e===ld?wo++:(wo=0,ld=e):wo=0,xn(),null}function $r(){if(dn!==null){var e=tS(wc),t=pt.transition,n=Q;try{if(pt.transition=null,Q=16>e?16:e,dn===null)var r=!1;else{if(e=dn,dn=null,wc=0,J&6)throw Error(k(331));var i=J;for(J|=4,N=e.current;N!==null;){var o=N,a=o.child;if(N.flags&16){var s=o.deletions;if(s!==null){for(var c=0;c<s.length;c++){var l=s[c];for(N=l;N!==null;){var u=N;switch(u.tag){case 0:case 11:case 15:Ro(8,u,o)}var p=u.child;if(p!==null)p.return=u,N=p;else for(;N!==null;){u=N;var d=u.sibling,h=u.return;if(dC(u),u===l){N=null;break}if(d!==null){d.return=h,N=d;break}N=h}}}var v=o.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}N=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,N=a;else e:for(;N!==null;){if(o=N,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ro(9,o,o.return)}var f=o.sibling;if(f!==null){f.return=o.return,N=f;break e}N=o.return}}var g=e.current;for(N=g;N!==null;){a=N;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,N=y;else e:for(a=g;N!==null;){if(s=N,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:$c(9,s)}}catch(P){ce(s,s.return,P)}if(s===a){N=null;break e}var R=s.sibling;if(R!==null){R.return=s.return,N=R;break e}N=s.return}}if(J=i,xn(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Dc,e)}catch{}r=!0}return r}finally{Q=n,pt.transition=t}}return!1}function dv(e,t,n){t=Qr(n,t),t=tC(e,t,1),e=Sn(e,t,1),t=qe(),e!==null&&(Qo(e,1,t),Xe(e,t))}function ce(e,t,n){if(e.tag===3)dv(e,e,n);else for(;t!==null;){if(t.tag===3){dv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cn===null||!Cn.has(r))){e=Qr(n,e),e=nC(t,e,1),t=Sn(t,e,1),e=qe(),t!==null&&(Qo(t,1,e),Xe(t,e));break}}t=t.return}}function lT(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=qe(),e.pingedLanes|=e.suspendedLanes&n,me===e&&(we&n)===n&&(ve===4||ve===3&&(we&130023424)===we&&500>le()-hh?or(e,0):dh|=n),Xe(e,t)}function PC(e,t){t===0&&(e.mode&1?(t=Pa,Pa<<=1,!(Pa&130023424)&&(Pa=4194304)):t=1);var n=qe();e=Qt(e,t),e!==null&&(Qo(e,t,n),Xe(e,n))}function uT(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),PC(e,n)}function pT(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(k(314))}r!==null&&r.delete(t),PC(e,n)}var wC;wC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qe.current)Je=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Je=!1,YE(e,t,n);Je=!!(e.flags&131072)}else Je=!1,ee&&t.flags&1048576&&_S(t,fc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Va(e,t),e=t.pendingProps;var i=Vr(t,Le.current);Ur(t,n),i=oh(null,t,r,e,i,n);var o=ah();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ge(r)?(o=!0,dc(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,th(t),i.updater=Uc,t.stateNode=i,i._reactInternals=t,Xp(t,r,e,n),t=ed(null,t,r,!0,o,n)):(t.tag=0,ee&&o&&Jd(t),Fe(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Va(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=hT(r),e=gt(r,e),i){case 0:t=Zp(null,t,r,e,n);break e;case 1:t=nv(null,t,r,e,n);break e;case 11:t=ev(null,t,r,e,n);break e;case 14:t=tv(null,t,r,gt(r.type,e),n);break e}throw Error(k(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gt(r,i),Zp(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gt(r,i),nv(e,t,r,i,n);case 3:e:{if(oC(t),e===null)throw Error(k(387));r=t.pendingProps,o=t.memoizedState,i=o.element,NS(e,t),mc(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Qr(Error(k(423)),t),t=rv(e,t,r,n,i);break e}else if(r!==i){i=Qr(Error(k(424)),t),t=rv(e,t,r,n,i);break e}else for(tt=yn(t.stateNode.containerInfo.firstChild),nt=t,ee=!0,yt=null,n=xS(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hr(),r===i){t=Gt(e,t,n);break e}Fe(e,t,r,n)}t=t.child}return t;case 5:return MS(t),e===null&&Jp(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,$p(r,i)?a=null:o!==null&&$p(r,o)&&(t.flags|=32),sC(e,t),Fe(e,t,a,n),t.child;case 6:return e===null&&Jp(t),null;case 13:return aC(e,t,n);case 4:return nh(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Kr(t,null,r,n):Fe(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gt(r,i),ev(e,t,r,i,n);case 7:return Fe(e,t,t.pendingProps,n),t.child;case 8:return Fe(e,t,t.pendingProps.children,n),t.child;case 12:return Fe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,X(vc,r._currentValue),r._currentValue=a,o!==null)if(Pt(o.value,a)){if(o.children===i.children&&!Qe.current){t=Gt(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var c=s.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Vt(-1,n&-n),c.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Qp(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(k(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Qp(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Fe(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ur(t,n),i=dt(i),r=r(i),t.flags|=1,Fe(e,t,r,n),t.child;case 14:return r=t.type,i=gt(r,t.pendingProps),i=gt(r.type,i),tv(e,t,r,i,n);case 15:return rC(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gt(r,i),Va(e,t),t.tag=1,Ge(r)?(e=!0,dc(t)):e=!1,Ur(t,n),eC(t,r,i),Xp(t,r,i,n),ed(null,t,r,!0,e,n);case 19:return cC(e,t,n);case 22:return iC(e,t,n)}throw Error(k(156,t.tag))};function EC(e,t){return Xy(e,t)}function dT(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ut(e,t,n,r){return new dT(e,t,n,r)}function mh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hT(e){if(typeof e=="function")return mh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jd)return 11;if(e===zd)return 14}return 2}function Pn(e,t){var n=e.alternate;return n===null?(n=ut(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ja(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")mh(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case _r:return ar(n.children,i,o,t);case Dd:a=8,i|=8;break;case Rp:return e=ut(12,n,t,i|2),e.elementType=Rp,e.lanes=o,e;case Pp:return e=ut(13,n,t,i),e.elementType=Pp,e.lanes=o,e;case wp:return e=ut(19,n,t,i),e.elementType=wp,e.lanes=o,e;case My:return Vc(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Oy:a=10;break e;case Ny:a=9;break e;case jd:a=11;break e;case zd:a=14;break e;case sn:a=16,r=null;break e}throw Error(k(130,e==null?e:typeof e,""))}return t=ut(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function ar(e,t,n,r){return e=ut(7,e,r,t),e.lanes=n,e}function Vc(e,t,n,r){return e=ut(22,e,r,t),e.elementType=My,e.lanes=n,e.stateNode={isHidden:!1},e}function Vu(e,t,n){return e=ut(6,e,null,t),e.lanes=n,e}function Hu(e,t,n){return t=ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fT(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Iu(0),this.expirationTimes=Iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Iu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yh(e,t,n,r,i,o,a,s,c){return e=new fT(e,t,n,s,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ut(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},th(o),e}function vT(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ir,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function TC(e){if(!e)return In;e=e._reactInternals;e:{if(gr(e)!==e||e.tag!==1)throw Error(k(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ge(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(k(171))}if(e.tag===1){var n=e.type;if(Ge(n))return TS(e,n,t)}return t}function IC(e,t,n,r,i,o,a,s,c){return e=yh(n,r,!0,e,i,o,a,s,c),e.context=TC(null),n=e.current,r=qe(),i=Rn(n),o=Vt(r,i),o.callback=t??null,Sn(n,o,i),e.current.lanes=i,Qo(e,i,r),Xe(e,r),e}function Hc(e,t,n,r){var i=t.current,o=qe(),a=Rn(i);return n=TC(n),t.context===null?t.context=n:t.pendingContext=n,t=Vt(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Sn(i,t,a),e!==null&&(Ct(e,i,a,o),Ua(e,i,a)),a}function Tc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Sh(e,t){hv(e,t),(e=e.alternate)&&hv(e,t)}function gT(){return null}var _C=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ch(e){this._internalRoot=e}Kc.prototype.render=Ch.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(k(409));Hc(e,t,null,null)};Kc.prototype.unmount=Ch.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dr(function(){Hc(null,e,null,null)}),t[Jt]=null}};function Kc(e){this._internalRoot=e}Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=iS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ln.length&&t!==0&&t<ln[n].priority;n++);ln.splice(n,0,e),n===0&&oS(e)}};function Rh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fv(){}function mT(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=Tc(a);o.call(l)}}var a=IC(t,r,e,0,null,!1,!1,"",fv);return e._reactRootContainer=a,e[Jt]=a.current,No(e.nodeType===8?e.parentNode:e),dr(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=Tc(c);s.call(l)}}var c=yh(e,0,!1,null,null,!1,!1,"",fv);return e._reactRootContainer=c,e[Jt]=c.current,No(e.nodeType===8?e.parentNode:e),dr(function(){Hc(t,c,n,r)}),c}function Qc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var c=Tc(a);s.call(c)}}Hc(t,a,e,i)}else a=mT(n,t,e,i,r);return Tc(a)}nS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=po(t.pendingLanes);n!==0&&(Fd(t,n|1),Xe(t,le()),!(J&6)&&(Gr=le()+500,xn()))}break;case 13:dr(function(){var r=Qt(e,1);if(r!==null){var i=qe();Ct(r,e,1,i)}}),Sh(e,1)}};qd=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var n=qe();Ct(t,e,134217728,n)}Sh(e,134217728)}};rS=function(e){if(e.tag===13){var t=Rn(e),n=Qt(e,t);if(n!==null){var r=qe();Ct(n,e,t,r)}Sh(e,t)}};iS=function(){return Q};sS=function(e,t){var n=Q;try{return Q=e,t()}finally{Q=n}};Np=function(e,t,n){switch(t){case"input":if(Ip(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Bc(r);if(!i)throw Error(k(90));jy(r),Ip(r,i)}}}break;case"textarea":Ly(e,n);break;case"select":t=n.value,t!=null&&Lr(e,!!n.multiple,t,!1)}};Vy=fh;Hy=dr;var yT={usingClientEntryPoint:!1,Events:[Xo,xr,Bc,$y,Wy,fh]},Pi={findFiberByHostInstance:nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ST={bundleType:Pi.bundleType,version:Pi.version,rendererPackageName:Pi.rendererPackageName,rendererConfig:Pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Qy(e),e===null?null:e.stateNode},findFiberByHostInstance:Pi.findFiberByHostInstance||gT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Na.isDisabled&&Na.supportsFiber)try{Dc=Na.inject(ST),Ot=Na}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yT;it.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rh(t))throw Error(k(200));return vT(e,t,null,n)};it.createRoot=function(e,t){if(!Rh(e))throw Error(k(299));var n=!1,r="",i=_C;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=yh(e,1,!1,null,null,n,!1,r,i),e[Jt]=t.current,No(e.nodeType===8?e.parentNode:e),new Ch(t)};it.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(k(188)):(e=Object.keys(e).join(","),Error(k(268,e)));return e=Qy(t),e=e===null?null:e.stateNode,e};it.flushSync=function(e){return dr(e)};it.hydrate=function(e,t,n){if(!Jc(t))throw Error(k(200));return Qc(null,e,t,!0,n)};it.hydrateRoot=function(e,t,n){if(!Rh(e))throw Error(k(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=_C;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=IC(t,null,e,1,n??null,i,!1,o,a),e[Jt]=t.current,No(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Kc(t)};it.render=function(e,t,n){if(!Jc(t))throw Error(k(200));return Qc(null,e,t,!1,n)};it.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(k(40));return e._reactRootContainer?(dr(function(){Qc(null,null,e,!1,function(){e._reactRootContainer=null,e[Jt]=null})}),!0):!1};it.unstable_batchedUpdates=fh;it.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(k(200));if(e==null||e._reactInternals===void 0)throw Error(k(38));return Qc(e,t,n,!1,r)};it.version="18.3.1-next-f1338f8080-20240426";function AC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AC)}catch(e){console.error(e)}}AC(),Ay.exports=it;var CT=Ay.exports,vv=CT;Sp.createRoot=vv.createRoot,Sp.hydrateRoot=vv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uo(){return Uo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uo.apply(this,arguments)}var hn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(hn||(hn={}));const gv="popstate";function RT(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:a,hash:s}=r.location;return dd("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ic(i)}return wT(t,n,null,e)}function de(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function PT(){return Math.random().toString(36).substr(2,8)}function mv(e,t){return{usr:e.state,key:e.key,idx:t}}function dd(e,t,n,r){return n===void 0&&(n=null),Uo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?si(t):t,{state:n,key:t&&t.key||r||PT()})}function Ic(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function si(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function wT(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=hn.Pop,c=null,l=u();l==null&&(l=0,a.replaceState(Uo({},a.state,{idx:l}),""));function u(){return(a.state||{idx:null}).idx}function p(){s=hn.Pop;let C=u(),f=C==null?null:C-l;l=C,c&&c({action:s,location:S.location,delta:f})}function d(C,f){s=hn.Push;let g=dd(S.location,C,f);n&&n(g,C),l=u()+1;let y=mv(g,l),R=S.createHref(g);try{a.pushState(y,"",R)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(R)}o&&c&&c({action:s,location:S.location,delta:1})}function h(C,f){s=hn.Replace;let g=dd(S.location,C,f);n&&n(g,C),l=u();let y=mv(g,l),R=S.createHref(g);a.replaceState(y,"",R),o&&c&&c({action:s,location:S.location,delta:0})}function v(C){let f=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof C=="string"?C:Ic(C);return g=g.replace(/ $/,"%20"),de(f,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,f)}let S={get action(){return s},get location(){return e(i,a)},listen(C){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(gv,p),c=C,()=>{i.removeEventListener(gv,p),c=null}},createHref(C){return t(i,C)},createURL:v,encodeLocation(C){let f=v(C);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:d,replace:h,go(C){return a.go(C)}};return S}var yv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(yv||(yv={}));function ET(e,t,n){return n===void 0&&(n="/"),TT(e,t,n,!1)}function TT(e,t,n,r){let i=typeof t=="string"?si(t):t,o=Ph(i.pathname||"/",n);if(o==null)return null;let a=kC(e);IT(a);let s=null;for(let c=0;s==null&&c<a.length;++c){let l=zT(o);s=DT(a[c],l,r)}return s}function kC(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,s)=>{let c={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(de(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=wn([r,c.relativePath]),u=n.concat(c);o.children&&o.children.length>0&&(de(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),kC(o.children,t,u,l)),!(o.path==null&&!o.index)&&t.push({path:l,score:NT(l,o.index),routesMeta:u})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let c of xC(o.path))i(o,a,c)}),t}function xC(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=xC(r.join("/")),s=[];return s.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&s.push(...a),s.map(c=>e.startsWith("/")&&c===""?"/":c)}function IT(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:MT(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _T=/^:[\w-]+$/,AT=3,bT=2,kT=1,xT=10,OT=-2,Sv=e=>e==="*";function NT(e,t){let n=e.split("/"),r=n.length;return n.some(Sv)&&(r+=OT),t&&(r+=bT),n.filter(i=>!Sv(i)).reduce((i,o)=>i+(_T.test(o)?AT:o===""?kT:xT),r)}function MT(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function DT(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let c=r[s],l=s===r.length-1,u=o==="/"?t:t.slice(o.length)||"/",p=Cv({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),d=c.route;if(!p&&l&&n&&!r[r.length-1].route.index&&(p=Cv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:wn([o,p.pathname]),pathnameBase:qT(wn([o,p.pathnameBase])),route:d}),p.pathnameBase!=="/"&&(o=wn([o,p.pathnameBase]))}return a}function Cv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=jT(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,u,p)=>{let{paramName:d,isOptional:h}=u;if(d==="*"){let S=s[p]||"";a=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const v=s[p];return h&&!v?l[d]=void 0:l[d]=(v||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:a,pattern:e}}function jT(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),bC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,c)=>(r.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function zT(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return bC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ph(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function LT(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?si(e):e;return{pathname:n?n.startsWith("/")?n:BT(n,t):t,search:UT(r),hash:$T(i)}}function BT(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ku(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FT(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function OC(e,t){let n=FT(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function NC(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=si(e):(i=Uo({},e),de(!i.pathname||!i.pathname.includes("?"),Ku("?","pathname","search",i)),de(!i.pathname||!i.pathname.includes("#"),Ku("#","pathname","hash",i)),de(!i.search||!i.search.includes("#"),Ku("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=n;else{let p=t.length-1;if(!r&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),p-=1;i.pathname=d.join("/")}s=p>=0?t[p]:"/"}let c=LT(i,s),l=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const wn=e=>e.join("/").replace(/\/\/+/g,"/"),qT=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),UT=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$T=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WT(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const MC=["post","put","patch","delete"];new Set(MC);const VT=["get",...MC];new Set(VT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $o(){return $o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$o.apply(this,arguments)}const wh=_.createContext(null),HT=_.createContext(null),mr=_.createContext(null),Gc=_.createContext(null),On=_.createContext({outlet:null,matches:[],isDataRoute:!1}),DC=_.createContext(null);function KT(e,t){let{relative:n}=t===void 0?{}:t;Zo()||de(!1);let{basename:r,navigator:i}=_.useContext(mr),{hash:o,pathname:a,search:s}=LC(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:wn([r,a])),i.createHref({pathname:c,search:s,hash:o})}function Zo(){return _.useContext(Gc)!=null}function ea(){return Zo()||de(!1),_.useContext(Gc).location}function jC(e){_.useContext(mr).static||_.useLayoutEffect(e)}function yr(){let{isDataRoute:e}=_.useContext(On);return e?o1():JT()}function JT(){Zo()||de(!1);let e=_.useContext(wh),{basename:t,future:n,navigator:r}=_.useContext(mr),{matches:i}=_.useContext(On),{pathname:o}=ea(),a=JSON.stringify(OC(i,n.v7_relativeSplatPath)),s=_.useRef(!1);return jC(()=>{s.current=!0}),_.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let p=NC(l,JSON.parse(a),o,u.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:wn([t,p.pathname])),(u.replace?r.replace:r.push)(p,u.state,u)},[t,r,a,o,e])}function zC(){let{matches:e}=_.useContext(On),t=e[e.length-1];return t?t.params:{}}function LC(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=_.useContext(mr),{matches:i}=_.useContext(On),{pathname:o}=ea(),a=JSON.stringify(OC(i,r.v7_relativeSplatPath));return _.useMemo(()=>NC(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function QT(e,t){return GT(e,t)}function GT(e,t,n,r){Zo()||de(!1);let{navigator:i}=_.useContext(mr),{matches:o}=_.useContext(On),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let l=ea(),u;if(t){var p;let C=typeof t=="string"?si(t):t;c==="/"||(p=C.pathname)!=null&&p.startsWith(c)||de(!1),u=C}else u=l;let d=u.pathname||"/",h=d;if(c!=="/"){let C=c.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(C.length).join("/")}let v=ET(e,{pathname:h}),S=t1(v&&v.map(C=>Object.assign({},C,{params:Object.assign({},s,C.params),pathname:wn([c,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:wn([c,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,r);return t&&S?_.createElement(Gc.Provider,{value:{location:$o({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:hn.Pop}},S):S}function XT(){let e=s1(),t=WT(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),n?_.createElement("pre",{style:i},n):null,o)}const YT=_.createElement(XT,null);class ZT extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?_.createElement(On.Provider,{value:this.props.routeContext},_.createElement(DC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function e1(e){let{routeContext:t,match:n,children:r}=e,i=_.useContext(wh);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(On.Provider,{value:t},r)}function t1(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,s=(i=n)==null?void 0:i.errors;if(s!=null){let u=a.findIndex(p=>p.route.id&&(s==null?void 0:s[p.route.id])!==void 0);u>=0||de(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let p=a[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(l=u),p.route.id){let{loaderData:d,errors:h}=n,v=p.route.loader&&d[p.route.id]===void 0&&(!h||h[p.route.id]===void 0);if(p.route.lazy||v){c=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((u,p,d)=>{let h,v=!1,S=null,C=null;n&&(h=s&&p.route.id?s[p.route.id]:void 0,S=p.route.errorElement||YT,c&&(l<0&&d===0?(a1("route-fallback",!1),v=!0,C=null):l===d&&(v=!0,C=p.route.hydrateFallbackElement||null)));let f=t.concat(a.slice(0,d+1)),g=()=>{let y;return h?y=S:v?y=C:p.route.Component?y=_.createElement(p.route.Component,null):p.route.element?y=p.route.element:y=u,_.createElement(e1,{match:p,routeContext:{outlet:u,matches:f,isDataRoute:n!=null},children:y})};return n&&(p.route.ErrorBoundary||p.route.errorElement||d===0)?_.createElement(ZT,{location:n.location,revalidation:n.revalidation,component:S,error:h,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var BC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(BC||{}),_c=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_c||{});function n1(e){let t=_.useContext(wh);return t||de(!1),t}function r1(e){let t=_.useContext(HT);return t||de(!1),t}function i1(e){let t=_.useContext(On);return t||de(!1),t}function FC(e){let t=i1(),n=t.matches[t.matches.length-1];return n.route.id||de(!1),n.route.id}function s1(){var e;let t=_.useContext(DC),n=r1(_c.UseRouteError),r=FC(_c.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function o1(){let{router:e}=n1(BC.UseNavigateStable),t=FC(_c.UseNavigateStable),n=_.useRef(!1);return jC(()=>{n.current=!0}),_.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,$o({fromRouteId:t},o)))},[e,t])}const Rv={};function a1(e,t,n){!t&&!Rv[e]&&(Rv[e]=!0)}function c1(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function tr(e){de(!1)}function l1(e){let{basename:t="/",children:n=null,location:r,navigationType:i=hn.Pop,navigator:o,static:a=!1,future:s}=e;Zo()&&de(!1);let c=t.replace(/^\/*/,"/"),l=_.useMemo(()=>({basename:c,navigator:o,static:a,future:$o({v7_relativeSplatPath:!1},s)}),[c,s,o,a]);typeof r=="string"&&(r=si(r));let{pathname:u="/",search:p="",hash:d="",state:h=null,key:v="default"}=r,S=_.useMemo(()=>{let C=Ph(u,c);return C==null?null:{location:{pathname:C,search:p,hash:d,state:h,key:v},navigationType:i}},[c,u,p,d,h,v,i]);return S==null?null:_.createElement(mr.Provider,{value:l},_.createElement(Gc.Provider,{children:n,value:S}))}function u1(e){let{children:t,location:n}=e;return QT(hd(t),n)}new Promise(()=>{});function hd(e,t){t===void 0&&(t=[]);let n=[];return _.Children.forEach(e,(r,i)=>{if(!_.isValidElement(r))return;let o=[...t,i];if(r.type===_.Fragment){n.push.apply(n,hd(r.props.children,o));return}r.type!==tr&&de(!1),!r.props.index||!r.props.children||de(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=hd(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fd.apply(this,arguments)}function p1(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function d1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function h1(e,t){return e.button===0&&(!t||t==="_self")&&!d1(e)}const f1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],v1="6";try{window.__reactRouterVersion=v1}catch{}const g1="startTransition",Pv=lw[g1];function m1(e){let{basename:t,children:n,future:r,window:i}=e,o=_.useRef();o.current==null&&(o.current=RT({window:i,v5Compat:!0}));let a=o.current,[s,c]=_.useState({action:a.action,location:a.location}),{v7_startTransition:l}=r||{},u=_.useCallback(p=>{l&&Pv?Pv(()=>c(p)):c(p)},[c,l]);return _.useLayoutEffect(()=>a.listen(u),[a,u]),_.useEffect(()=>c1(r),[r]),_.createElement(l1,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}const y1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wi=_.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:s,target:c,to:l,preventScrollReset:u,viewTransition:p}=t,d=p1(t,f1),{basename:h}=_.useContext(mr),v,S=!1;if(typeof l=="string"&&S1.test(l)&&(v=l,y1))try{let y=new URL(window.location.href),R=l.startsWith("//")?new URL(y.protocol+l):new URL(l),P=Ph(R.pathname,h);R.origin===y.origin&&P!=null?l=P+R.search+R.hash:S=!0}catch{}let C=KT(l,{relative:i}),f=C1(l,{replace:a,state:s,target:c,preventScrollReset:u,relative:i,viewTransition:p});function g(y){r&&r(y),y.defaultPrevented||f(y)}return _.createElement("a",fd({},d,{href:v||C,onClick:S||o?r:g,ref:n,target:c}))});var wv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(wv||(wv={}));var Ev;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ev||(Ev={}));function C1(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:s}=t===void 0?{}:t,c=yr(),l=ea(),u=LC(e,{relative:a});return _.useCallback(p=>{if(h1(p,n)){p.preventDefault();let d=r!==void 0?r:Ic(l)===Ic(u);c(e,{replace:d,state:i,preventScrollReset:o,relative:a,viewTransition:s})}},[l,c,u,r,i,n,e,o,a,s])}const Tv=e=>{let t;const n=new Set,r=(u,p)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const h=t;t=p??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(v=>v(t,h))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{n.clear()}},l=t=e(r,i,c);return c},R1=e=>e?Tv(e):Tv;var qC={exports:{}},UC={},$C={exports:{}},WC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xr=_;function P1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var w1=typeof Object.is=="function"?Object.is:P1,E1=Xr.useState,T1=Xr.useEffect,I1=Xr.useLayoutEffect,_1=Xr.useDebugValue;function A1(e,t){var n=t(),r=E1({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return I1(function(){i.value=n,i.getSnapshot=t,Ju(i)&&o({inst:i})},[e,n,t]),T1(function(){return Ju(i)&&o({inst:i}),e(function(){Ju(i)&&o({inst:i})})},[e]),_1(n),n}function Ju(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!w1(e,n)}catch{return!0}}function b1(e,t){return t()}var k1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?b1:A1;WC.useSyncExternalStore=Xr.useSyncExternalStore!==void 0?Xr.useSyncExternalStore:k1;$C.exports=WC;var x1=$C.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc=_,O1=x1;function N1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var M1=typeof Object.is=="function"?Object.is:N1,D1=O1.useSyncExternalStore,j1=Xc.useRef,z1=Xc.useEffect,L1=Xc.useMemo,B1=Xc.useDebugValue;UC.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=j1(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=L1(function(){function c(h){if(!l){if(l=!0,u=h,h=r(h),i!==void 0&&a.hasValue){var v=a.value;if(i(v,h))return p=v}return p=h}if(v=p,M1(u,h))return v;var S=r(h);return i!==void 0&&i(v,S)?(u=h,v):(u=h,p=S)}var l=!1,u,p,d=n===void 0?null:n;return[function(){return c(t())},d===null?void 0:function(){return c(d())}]},[t,n,r,i]);var s=D1(e,o[0],o[1]);return z1(function(){a.hasValue=!0,a.value=s},[s]),B1(s),s};qC.exports=UC;var F1=qC.exports;const q1=gy(F1),{useDebugValue:U1}=xd,{useSyncExternalStoreWithSelector:$1}=q1;const W1=e=>e;function V1(e,t=W1,n){const r=$1(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return U1(r),r}const Iv=e=>{const t=typeof e=="function"?R1(e):e,n=(r,i)=>V1(t,r,i);return Object.assign(n,t),n},H1=e=>e?Iv(e):Iv,oi=H1(e=>({role:"",technical:[],background:[],sessionId:void 0,selectedQuestions:[],config:{mode:"manual",total:10,ratio:70},setRole:t=>e({role:t}),setQuestions:t=>e({technical:t.technical.map(n=>({...n,id:n.id||`temp_${Date.now()}_${Math.random()}`})),background:t.background.map(n=>({...n,id:n.id||`temp_${Date.now()}_${Math.random()}`}))}),removeQuestion:(t,n)=>{e(n==="technical"?r=>({technical:r.technical.filter(i=>i.id!==t),selectedQuestions:r.selectedQuestions.filter(i=>i!==t)}):r=>({background:r.background.filter(i=>i.id!==t),selectedQuestions:r.selectedQuestions.filter(i=>i!==t)}))},regenerate10x10:()=>{e({selectedQuestions:[]})},appendMore:()=>{},toggleSelect:t=>{e(n=>({selectedQuestions:n.selectedQuestions.includes(t)?n.selectedQuestions.filter(r=>r!==t):[...n.selectedQuestions,t]}))},setConfig:t=>{e(n=>({config:{...n.config,...t}}))},setSessionId:t=>e({sessionId:t}),clearSelection:()=>e({selectedQuestions:[]})})),K1=()=>{const e=ea(),{sessionId:t}=oi(),n=r=>e.pathname===r;return m.jsx("nav",{className:"fixed top-0 left-0 right-0 bg-white shadow-md z-50",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex justify-between h-16",children:[m.jsx("div",{className:"flex items-center",children:m.jsx(wi,{to:"/",className:"flex-shrink-0",children:m.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"AI Interviewer"})})}),m.jsxs("div",{className:"flex items-center space-x-8",children:[m.jsx(wi,{to:"/",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${n("/")?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Home"}),m.jsx(wi,{to:"/questions",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${n("/questions")?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Questions"}),m.jsx(wi,{to:"/mock",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${n("/mock")?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Mock Interview"}),t&&m.jsx(wi,{to:`/report/${t}`,className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${n(`/report/${t}`)?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Report"})]})]})})})};function VC(e,t){return function(){return e.apply(t,arguments)}}const{toString:J1}=Object.prototype,{getPrototypeOf:Eh}=Object,{iterator:Yc,toStringTag:HC}=Symbol,Zc=(e=>t=>{const n=J1.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),wt=e=>(e=e.toLowerCase(),t=>Zc(t)===e),el=e=>t=>typeof t===e,{isArray:ai}=Array,Wo=el("undefined");function ta(e){return e!==null&&!Wo(e)&&e.constructor!==null&&!Wo(e.constructor)&&Ye(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const KC=wt("ArrayBuffer");function Q1(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&KC(e.buffer),t}const G1=el("string"),Ye=el("function"),JC=el("number"),na=e=>e!==null&&typeof e=="object",X1=e=>e===!0||e===!1,Qa=e=>{if(Zc(e)!=="object")return!1;const t=Eh(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(HC in e)&&!(Yc in e)},Y1=e=>{if(!na(e)||ta(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Z1=wt("Date"),eI=wt("File"),tI=wt("Blob"),nI=wt("FileList"),rI=e=>na(e)&&Ye(e.pipe),iI=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ye(e.append)&&((t=Zc(e))==="formdata"||t==="object"&&Ye(e.toString)&&e.toString()==="[object FormData]"))},sI=wt("URLSearchParams"),[oI,aI,cI,lI]=["ReadableStream","Request","Response","Headers"].map(wt),uI=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ra(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),ai(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(ta(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let s;for(r=0;r<a;r++)s=o[r],t.call(null,e[s],s,e)}}function QC(e,t){if(ta(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const sr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),GC=e=>!Wo(e)&&e!==sr;function vd(){const{caseless:e}=GC(this)&&this||{},t={},n=(r,i)=>{const o=e&&QC(t,i)||i;Qa(t[o])&&Qa(r)?t[o]=vd(t[o],r):Qa(r)?t[o]=vd({},r):ai(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ra(arguments[r],n);return t}const pI=(e,t,n,{allOwnKeys:r}={})=>(ra(t,(i,o)=>{n&&Ye(i)?e[o]=VC(i,n):e[o]=i},{allOwnKeys:r}),e),dI=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),hI=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},fI=(e,t,n,r)=>{let i,o,a;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],(!r||r(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=n!==!1&&Eh(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},vI=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},gI=e=>{if(!e)return null;if(ai(e))return e;let t=e.length;if(!JC(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},mI=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Eh(Uint8Array)),yI=(e,t)=>{const r=(e&&e[Yc]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},SI=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},CI=wt("HTMLFormElement"),RI=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),_v=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),PI=wt("RegExp"),XC=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ra(n,(i,o)=>{let a;(a=t(i,o,e))!==!1&&(r[o]=a||i)}),Object.defineProperties(e,r)},wI=e=>{XC(e,(t,n)=>{if(Ye(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Ye(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},EI=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return ai(e)?r(e):r(String(e).split(t)),n},TI=()=>{},II=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function _I(e){return!!(e&&Ye(e.append)&&e[HC]==="FormData"&&e[Yc])}const AI=e=>{const t=new Array(10),n=(r,i)=>{if(na(r)){if(t.indexOf(r)>=0)return;if(ta(r))return r;if(!("toJSON"in r)){t[i]=r;const o=ai(r)?[]:{};return ra(r,(a,s)=>{const c=n(a,i+1);!Wo(c)&&(o[s]=c)}),t[i]=void 0,o}}return r};return n(e,0)},bI=wt("AsyncFunction"),kI=e=>e&&(na(e)||Ye(e))&&Ye(e.then)&&Ye(e.catch),YC=((e,t)=>e?setImmediate:t?((n,r)=>(sr.addEventListener("message",({source:i,data:o})=>{i===sr&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),sr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ye(sr.postMessage)),xI=typeof queueMicrotask<"u"?queueMicrotask.bind(sr):typeof process<"u"&&process.nextTick||YC,OI=e=>e!=null&&Ye(e[Yc]),I={isArray:ai,isArrayBuffer:KC,isBuffer:ta,isFormData:iI,isArrayBufferView:Q1,isString:G1,isNumber:JC,isBoolean:X1,isObject:na,isPlainObject:Qa,isEmptyObject:Y1,isReadableStream:oI,isRequest:aI,isResponse:cI,isHeaders:lI,isUndefined:Wo,isDate:Z1,isFile:eI,isBlob:tI,isRegExp:PI,isFunction:Ye,isStream:rI,isURLSearchParams:sI,isTypedArray:mI,isFileList:nI,forEach:ra,merge:vd,extend:pI,trim:uI,stripBOM:dI,inherits:hI,toFlatObject:fI,kindOf:Zc,kindOfTest:wt,endsWith:vI,toArray:gI,forEachEntry:yI,matchAll:SI,isHTMLForm:CI,hasOwnProperty:_v,hasOwnProp:_v,reduceDescriptors:XC,freezeMethods:wI,toObjectSet:EI,toCamelCase:RI,noop:TI,toFiniteNumber:II,findKey:QC,global:sr,isContextDefined:GC,isSpecCompliantForm:_I,toJSONObject:AI,isAsyncFn:bI,isThenable:kI,setImmediate:YC,asap:xI,isIterable:OI};function U(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}I.inherits(U,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const ZC=U.prototype,eR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{eR[e]={value:e}});Object.defineProperties(U,eR);Object.defineProperty(ZC,"isAxiosError",{value:!0});U.from=(e,t,n,r,i,o)=>{const a=Object.create(ZC);return I.toFlatObject(e,a,function(c){return c!==Error.prototype},s=>s!=="isAxiosError"),U.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const NI=null;function gd(e){return I.isPlainObject(e)||I.isArray(e)}function tR(e){return I.endsWith(e,"[]")?e.slice(0,-2):e}function Av(e,t,n){return e?e.concat(t).map(function(i,o){return i=tR(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function MI(e){return I.isArray(e)&&!e.some(gd)}const DI=I.toFlatObject(I,{},null,function(t){return/^is[A-Z]/.test(t)});function tl(e,t,n){if(!I.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=I.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,C){return!I.isUndefined(C[S])});const r=n.metaTokens,i=n.visitor||u,o=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(t);if(!I.isFunction(i))throw new TypeError("visitor must be a function");function l(v){if(v===null)return"";if(I.isDate(v))return v.toISOString();if(I.isBoolean(v))return v.toString();if(!c&&I.isBlob(v))throw new U("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(v)||I.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,S,C){let f=v;if(v&&!C&&typeof v=="object"){if(I.endsWith(S,"{}"))S=r?S:S.slice(0,-2),v=JSON.stringify(v);else if(I.isArray(v)&&MI(v)||(I.isFileList(v)||I.endsWith(S,"[]"))&&(f=I.toArray(v)))return S=tR(S),f.forEach(function(y,R){!(I.isUndefined(y)||y===null)&&t.append(a===!0?Av([S],R,o):a===null?S:S+"[]",l(y))}),!1}return gd(v)?!0:(t.append(Av(C,S,o),l(v)),!1)}const p=[],d=Object.assign(DI,{defaultVisitor:u,convertValue:l,isVisitable:gd});function h(v,S){if(!I.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+S.join("."));p.push(v),I.forEach(v,function(f,g){(!(I.isUndefined(f)||f===null)&&i.call(t,f,I.isString(g)?g.trim():g,S,d))===!0&&h(f,S?S.concat(g):[g])}),p.pop()}}if(!I.isObject(e))throw new TypeError("data must be an object");return h(e),t}function bv(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Th(e,t){this._pairs=[],e&&tl(e,this,t)}const nR=Th.prototype;nR.append=function(t,n){this._pairs.push([t,n])};nR.toString=function(t){const n=t?function(r){return t.call(this,r,bv)}:bv;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function jI(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rR(e,t,n){if(!t)return e;const r=n&&n.encode||jI;I.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(t,n):o=I.isURLSearchParams(t)?t.toString():new Th(t,n).toString(r),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class zI{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){I.forEach(this.handlers,function(r){r!==null&&t(r)})}}const kv=zI,iR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},LI=typeof URLSearchParams<"u"?URLSearchParams:Th,BI=typeof FormData<"u"?FormData:null,FI=typeof Blob<"u"?Blob:null,qI={isBrowser:!0,classes:{URLSearchParams:LI,FormData:BI,Blob:FI},protocols:["http","https","file","blob","url","data"]},Ih=typeof window<"u"&&typeof document<"u",md=typeof navigator=="object"&&navigator||void 0,UI=Ih&&(!md||["ReactNative","NativeScript","NS"].indexOf(md.product)<0),$I=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),WI=Ih&&window.location.href||"http://localhost",VI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ih,hasStandardBrowserEnv:UI,hasStandardBrowserWebWorkerEnv:$I,navigator:md,origin:WI},Symbol.toStringTag,{value:"Module"})),ze={...VI,...qI};function HI(e,t){return tl(e,new ze.classes.URLSearchParams,{visitor:function(n,r,i,o){return ze.isNode&&I.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function KI(e){return I.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function JI(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function sR(e){function t(n,r,i,o){let a=n[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),c=o>=n.length;return a=!a&&I.isArray(i)?i.length:a,c?(I.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!s):((!i[a]||!I.isObject(i[a]))&&(i[a]=[]),t(n,r,i[a],o)&&I.isArray(i[a])&&(i[a]=JI(i[a])),!s)}if(I.isFormData(e)&&I.isFunction(e.entries)){const n={};return I.forEachEntry(e,(r,i)=>{t(KI(r),i,n,0)}),n}return null}function QI(e,t,n){if(I.isString(e))try{return(t||JSON.parse)(e),I.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const _h={transitional:iR,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=I.isObject(t);if(o&&I.isHTMLForm(t)&&(t=new FormData(t)),I.isFormData(t))return i?JSON.stringify(sR(t)):t;if(I.isArrayBuffer(t)||I.isBuffer(t)||I.isStream(t)||I.isFile(t)||I.isBlob(t)||I.isReadableStream(t))return t;if(I.isArrayBufferView(t))return t.buffer;if(I.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return HI(t,this.formSerializer).toString();if((s=I.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return tl(s?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),QI(t)):t}],transformResponse:[function(t){const n=this.transitional||_h.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(I.isResponse(t)||I.isReadableStream(t))return t;if(t&&I.isString(t)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?U.from(s,U.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ze.classes.FormData,Blob:ze.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],e=>{_h.headers[e]={}});const Ah=_h,GI=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),XI=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||t[n]&&GI[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},xv=Symbol("internals");function Ei(e){return e&&String(e).trim().toLowerCase()}function Ga(e){return e===!1||e==null?e:I.isArray(e)?e.map(Ga):String(e)}function YI(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const ZI=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Qu(e,t,n,r,i){if(I.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!I.isString(t)){if(I.isString(r))return t.indexOf(r)!==-1;if(I.isRegExp(r))return r.test(t)}}function e_(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function t_(e,t){const n=I.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,a){return this[r].call(this,t,i,o,a)},configurable:!0})})}class nl{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(s,c,l){const u=Ei(c);if(!u)throw new Error("header name must be a non-empty string");const p=I.findKey(i,u);(!p||i[p]===void 0||l===!0||l===void 0&&i[p]!==!1)&&(i[p||c]=Ga(s))}const a=(s,c)=>I.forEach(s,(l,u)=>o(l,u,c));if(I.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(I.isString(t)&&(t=t.trim())&&!ZI(t))a(XI(t),n);else if(I.isObject(t)&&I.isIterable(t)){let s={},c,l;for(const u of t){if(!I.isArray(u))throw TypeError("Object iterator must return a key-value pair");s[l=u[0]]=(c=s[l])?I.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}a(s,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=Ei(t),t){const r=I.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return YI(i);if(I.isFunction(n))return n.call(this,i,r);if(I.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ei(t),t){const r=I.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Qu(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(a){if(a=Ei(a),a){const s=I.findKey(r,a);s&&(!n||Qu(r,r[s],s,n))&&(delete r[s],i=!0)}}return I.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||Qu(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return I.forEach(this,(i,o)=>{const a=I.findKey(r,o);if(a){n[a]=Ga(i),delete n[o];return}const s=t?e_(o):String(o).trim();s!==o&&delete n[o],n[s]=Ga(i),r[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return I.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&I.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[xv]=this[xv]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=Ei(a);r[s]||(t_(i,a),r[s]=!0)}return I.isArray(t)?t.forEach(o):o(t),this}}nl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(nl.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});I.freezeMethods(nl);const Rt=nl;function Gu(e,t){const n=this||Ah,r=t||n,i=Rt.from(r.headers);let o=r.data;return I.forEach(e,function(s){o=s.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function oR(e){return!!(e&&e.__CANCEL__)}function ci(e,t,n){U.call(this,e??"canceled",U.ERR_CANCELED,t,n),this.name="CanceledError"}I.inherits(ci,U,{__CANCEL__:!0});function aR(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new U("Request failed with status code "+n.status,[U.ERR_BAD_REQUEST,U.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function n_(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function r_(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,a;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=r[o];a||(a=l),n[i]=c,r[i]=l;let p=o,d=0;for(;p!==i;)d+=n[p++],p=p%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),l-a<t)return;const h=u&&l-u;return h?Math.round(d*1e3/h):void 0}}function i_(e,t){let n=0,r=1e3/t,i,o;const a=(l,u=Date.now())=>{n=u,i=null,o&&(clearTimeout(o),o=null),e(...l)};return[(...l)=>{const u=Date.now(),p=u-n;p>=r?a(l,u):(i=l,o||(o=setTimeout(()=>{o=null,a(i)},r-p)))},()=>i&&a(i)]}const Ac=(e,t,n=3)=>{let r=0;const i=r_(50,250);return i_(o=>{const a=o.loaded,s=o.lengthComputable?o.total:void 0,c=a-r,l=i(c),u=a<=s;r=a;const p={loaded:a,total:s,progress:s?a/s:void 0,bytes:c,rate:l||void 0,estimated:l&&s&&u?(s-a)/l:void 0,event:o,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(p)},n)},Ov=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Nv=e=>(...t)=>I.asap(()=>e(...t)),s_=ze.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ze.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ze.origin),ze.navigator&&/(msie|trident)/i.test(ze.navigator.userAgent)):()=>!0,o_=ze.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const a=[e+"="+encodeURIComponent(t)];I.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),I.isString(r)&&a.push("path="+r),I.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function a_(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function c_(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function cR(e,t,n){let r=!a_(t);return e&&(r||n==!1)?c_(e,t):t}const Mv=e=>e instanceof Rt?{...e}:e;function hr(e,t){t=t||{};const n={};function r(l,u,p,d){return I.isPlainObject(l)&&I.isPlainObject(u)?I.merge.call({caseless:d},l,u):I.isPlainObject(u)?I.merge({},u):I.isArray(u)?u.slice():u}function i(l,u,p,d){if(I.isUndefined(u)){if(!I.isUndefined(l))return r(void 0,l,p,d)}else return r(l,u,p,d)}function o(l,u){if(!I.isUndefined(u))return r(void 0,u)}function a(l,u){if(I.isUndefined(u)){if(!I.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function s(l,u,p){if(p in t)return r(l,u);if(p in e)return r(void 0,l)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,u,p)=>i(Mv(l),Mv(u),p,!0)};return I.forEach(Object.keys({...e,...t}),function(u){const p=c[u]||i,d=p(e[u],t[u],u);I.isUndefined(d)&&p!==s||(n[u]=d)}),n}const lR=e=>{const t=hr({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:s}=t;t.headers=a=Rt.from(a),t.url=rR(cR(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let c;if(I.isFormData(n)){if(ze.hasStandardBrowserEnv||ze.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[l,...u]=c?c.split(";").map(p=>p.trim()).filter(Boolean):[];a.setContentType([l||"multipart/form-data",...u].join("; "))}}if(ze.hasStandardBrowserEnv&&(r&&I.isFunction(r)&&(r=r(t)),r||r!==!1&&s_(t.url))){const l=i&&o&&o_.read(o);l&&a.set(i,l)}return t},l_=typeof XMLHttpRequest<"u",u_=l_&&function(e){return new Promise(function(n,r){const i=lR(e);let o=i.data;const a=Rt.from(i.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:l}=i,u,p,d,h,v;function S(){h&&h(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let C=new XMLHttpRequest;C.open(i.method.toUpperCase(),i.url,!0),C.timeout=i.timeout;function f(){if(!C)return;const y=Rt.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),P={data:!s||s==="text"||s==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:y,config:e,request:C};aR(function(T){n(T),S()},function(T){r(T),S()},P),C=null}"onloadend"in C?C.onloadend=f:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(f)},C.onabort=function(){C&&(r(new U("Request aborted",U.ECONNABORTED,e,C)),C=null)},C.onerror=function(){r(new U("Network Error",U.ERR_NETWORK,e,C)),C=null},C.ontimeout=function(){let R=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const P=i.transitional||iR;i.timeoutErrorMessage&&(R=i.timeoutErrorMessage),r(new U(R,P.clarifyTimeoutError?U.ETIMEDOUT:U.ECONNABORTED,e,C)),C=null},o===void 0&&a.setContentType(null),"setRequestHeader"in C&&I.forEach(a.toJSON(),function(R,P){C.setRequestHeader(P,R)}),I.isUndefined(i.withCredentials)||(C.withCredentials=!!i.withCredentials),s&&s!=="json"&&(C.responseType=i.responseType),l&&([d,v]=Ac(l,!0),C.addEventListener("progress",d)),c&&C.upload&&([p,h]=Ac(c),C.upload.addEventListener("progress",p),C.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(u=y=>{C&&(r(!y||y.type?new ci(null,e,C):y),C.abort(),C=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const g=n_(i.url);if(g&&ze.protocols.indexOf(g)===-1){r(new U("Unsupported protocol "+g+":",U.ERR_BAD_REQUEST,e));return}C.send(o||null)})},p_=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const o=function(l){if(!i){i=!0,s();const u=l instanceof Error?l:this.reason;r.abort(u instanceof U?u:new ci(u instanceof Error?u.message:u))}};let a=t&&setTimeout(()=>{a=null,o(new U(`timeout ${t} of ms exceeded`,U.ETIMEDOUT))},t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(l=>{l.unsubscribe?l.unsubscribe(o):l.removeEventListener("abort",o)}),e=null)};e.forEach(l=>l.addEventListener("abort",o));const{signal:c}=r;return c.unsubscribe=()=>I.asap(s),c}},d_=p_,h_=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},f_=async function*(e,t){for await(const n of v_(e))yield*h_(n,t)},v_=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Dv=(e,t,n,r)=>{const i=f_(e,t);let o=0,a,s=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){s(),c.close();return}let p=u.byteLength;if(n){let d=o+=p;n(d)}c.enqueue(new Uint8Array(u))}catch(l){throw s(l),l}},cancel(c){return s(c),i.return()}},{highWaterMark:2})},rl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",uR=rl&&typeof ReadableStream=="function",g_=rl&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),pR=(e,...t)=>{try{return!!e(...t)}catch{return!1}},m_=uR&&pR(()=>{let e=!1;const t=new Request(ze.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),jv=64*1024,yd=uR&&pR(()=>I.isReadableStream(new Response("").body)),bc={stream:yd&&(e=>e.body)};rl&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!bc[t]&&(bc[t]=I.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new U(`Response type '${t}' is not supported`,U.ERR_NOT_SUPPORT,r)})})})(new Response);const y_=async e=>{if(e==null)return 0;if(I.isBlob(e))return e.size;if(I.isSpecCompliantForm(e))return(await new Request(ze.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(I.isArrayBufferView(e)||I.isArrayBuffer(e))return e.byteLength;if(I.isURLSearchParams(e)&&(e=e+""),I.isString(e))return(await g_(e)).byteLength},S_=async(e,t)=>{const n=I.toFiniteNumber(e.getContentLength());return n??y_(t)},C_=rl&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:l,headers:u,withCredentials:p="same-origin",fetchOptions:d}=lR(e);l=l?(l+"").toLowerCase():"text";let h=d_([i,o&&o.toAbortSignal()],a),v;const S=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let C;try{if(c&&m_&&n!=="get"&&n!=="head"&&(C=await S_(u,r))!==0){let P=new Request(t,{method:"POST",body:r,duplex:"half"}),w;if(I.isFormData(r)&&(w=P.headers.get("content-type"))&&u.setContentType(w),P.body){const[T,E]=Ov(C,Ac(Nv(c)));r=Dv(P.body,jv,T,E)}}I.isString(p)||(p=p?"include":"omit");const f="credentials"in Request.prototype;v=new Request(t,{...d,signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:f?p:void 0});let g=await fetch(v,d);const y=yd&&(l==="stream"||l==="response");if(yd&&(s||y&&S)){const P={};["status","statusText","headers"].forEach(x=>{P[x]=g[x]});const w=I.toFiniteNumber(g.headers.get("content-length")),[T,E]=s&&Ov(w,Ac(Nv(s),!0))||[];g=new Response(Dv(g.body,jv,T,()=>{E&&E(),S&&S()}),P)}l=l||"text";let R=await bc[I.findKey(bc,l)||"text"](g,e);return!y&&S&&S(),await new Promise((P,w)=>{aR(P,w,{data:R,headers:Rt.from(g.headers),status:g.status,statusText:g.statusText,config:e,request:v})})}catch(f){throw S&&S(),f&&f.name==="TypeError"&&/Load failed|fetch/i.test(f.message)?Object.assign(new U("Network Error",U.ERR_NETWORK,e,v),{cause:f.cause||f}):U.from(f,f&&f.code,e,v)}}),Sd={http:NI,xhr:u_,fetch:C_};I.forEach(Sd,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const zv=e=>`- ${e}`,R_=e=>I.isFunction(e)||e===null||e===!1,dR={getAdapter:e=>{e=I.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let a;if(r=n,!R_(n)&&(r=Sd[(a=String(n)).toLowerCase()],r===void 0))throw new U(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+o]=r}if(!r){const o=Object.entries(i).map(([s,c])=>`adapter ${s} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(zv).join(`
`):" "+zv(o[0]):"as no adapter specified";throw new U("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:Sd};function Xu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ci(null,e)}function Lv(e){return Xu(e),e.headers=Rt.from(e.headers),e.data=Gu.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),dR.getAdapter(e.adapter||Ah.adapter)(e).then(function(r){return Xu(e),r.data=Gu.call(e,e.transformResponse,r),r.headers=Rt.from(r.headers),r},function(r){return oR(r)||(Xu(e),r&&r.response&&(r.response.data=Gu.call(e,e.transformResponse,r.response),r.response.headers=Rt.from(r.response.headers))),Promise.reject(r)})}const hR="1.11.0",il={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{il[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Bv={};il.transitional=function(t,n,r){function i(o,a){return"[Axios v"+hR+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,s)=>{if(t===!1)throw new U(i(a," has been removed"+(n?" in "+n:"")),U.ERR_DEPRECATED);return n&&!Bv[a]&&(Bv[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,a,s):!0}};il.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function P_(e,t,n){if(typeof e!="object")throw new U("options must be an object",U.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],a=t[o];if(a){const s=e[o],c=s===void 0||a(s,o,e);if(c!==!0)throw new U("option "+o+" must be "+c,U.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new U("Unknown option "+o,U.ERR_BAD_OPTION)}}const Xa={assertOptions:P_,validators:il},At=Xa.validators;class kc{constructor(t){this.defaults=t||{},this.interceptors={request:new kv,response:new kv}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=hr(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&Xa.assertOptions(r,{silentJSONParsing:At.transitional(At.boolean),forcedJSONParsing:At.transitional(At.boolean),clarifyTimeoutError:At.transitional(At.boolean)},!1),i!=null&&(I.isFunction(i)?n.paramsSerializer={serialize:i}:Xa.assertOptions(i,{encode:At.function,serialize:At.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Xa.assertOptions(n,{baseUrl:At.spelling("baseURL"),withXsrfToken:At.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&I.merge(o.common,o[n.method]);o&&I.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),n.headers=Rt.concat(a,o);const s=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(c=c&&S.synchronous,s.unshift(S.fulfilled,S.rejected))});const l=[];this.interceptors.response.forEach(function(S){l.push(S.fulfilled,S.rejected)});let u,p=0,d;if(!c){const v=[Lv.bind(this),void 0];for(v.unshift(...s),v.push(...l),d=v.length,u=Promise.resolve(n);p<d;)u=u.then(v[p++],v[p++]);return u}d=s.length;let h=n;for(p=0;p<d;){const v=s[p++],S=s[p++];try{h=v(h)}catch(C){S.call(this,C);break}}try{u=Lv.call(this,h)}catch(v){return Promise.reject(v)}for(p=0,d=l.length;p<d;)u=u.then(l[p++],l[p++]);return u}getUri(t){t=hr(this.defaults,t);const n=cR(t.baseURL,t.url,t.allowAbsoluteUrls);return rR(n,t.params,t.paramsSerializer)}}I.forEach(["delete","get","head","options"],function(t){kc.prototype[t]=function(n,r){return this.request(hr(r||{},{method:t,url:n,data:(r||{}).data}))}});I.forEach(["post","put","patch"],function(t){function n(r){return function(o,a,s){return this.request(hr(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}kc.prototype[t]=n(),kc.prototype[t+"Form"]=n(!0)});const Ya=kc;class bh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{r.subscribe(s),o=s}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},t(function(o,a,s){r.reason||(r.reason=new ci(o,a,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new bh(function(i){t=i}),cancel:t}}}const w_=bh;function E_(e){return function(n){return e.apply(null,n)}}function T_(e){return I.isObject(e)&&e.isAxiosError===!0}const Cd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cd).forEach(([e,t])=>{Cd[t]=e});const I_=Cd;function fR(e){const t=new Ya(e),n=VC(Ya.prototype.request,t);return I.extend(n,Ya.prototype,t,{allOwnKeys:!0}),I.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return fR(hr(e,i))},n}const he=fR(Ah);he.Axios=Ya;he.CanceledError=ci;he.CancelToken=w_;he.isCancel=oR;he.VERSION=hR;he.toFormData=tl;he.AxiosError=U;he.Cancel=he.CanceledError;he.all=function(t){return Promise.all(t)};he.spread=E_;he.isAxiosError=T_;he.mergeConfig=hr;he.AxiosHeaders=Rt;he.formToJSON=e=>sR(I.isHTMLForm(e)?new FormData(e):e);he.getAdapter=dR.getAdapter;he.HttpStatusCode=I_;he.default=he;const __=he,A_="http://localhost:8080/api",ia=__.create({baseURL:A_,headers:{"Content-Type":"application/json"}}),b_=[{id:"mock_tech_1",type:"technical",difficulty:3,text:"Explain how React Hooks work and when to use them",tags:["React","Hooks","Frontend"],expectedPoints:["useState","useEffect","Lifecycle","Custom Hooks"]},{id:"mock_tech_2",type:"technical",difficulty:4,text:"Describe the differences between REST and GraphQL APIs",tags:["API","Backend","Architecture"],expectedPoints:["Data Fetching","Over-fetching","Under-fetching","Schema"]}],k_=[{id:"mock_bg_1",type:"background",difficulty:2,text:"How do you handle team conflicts?",tags:["Teamwork","Communication"],expectedPoints:["Active listening","Compromise","Documentation"]},{id:"mock_bg_2",type:"background",difficulty:3,text:"Describe a challenging project you worked on",tags:["Project Management","Problem Solving"],expectedPoints:["Challenge description","Solution approach","Lessons learned"]}],x_={Overall:"7.6",Verdict:"Pass",QuestionEvaluations:[{QuestionText:"What is TypeScript and how does it differ from JavaScript?",UserAnswer:"TypeScript is a superset of JavaScript that adds static typing. It helps catch errors at compile time and provides better tooling support.",Feedback:"Good understanding of TypeScript's core concept. The answer shows awareness of static typing benefits and tooling advantages.",Strengths:["Clear explanation","Understanding of benefits","Tooling awareness"],Weaknesses:["Could provide more examples","Missing compilation process details"],Suggestions:["Add practical examples of type annotations","Explain the compilation process"],Score:8},{QuestionText:"Describe a challenging project you worked on and how you overcame obstacles.",UserAnswer:"I worked on a large-scale e-commerce platform that had performance issues. I implemented caching strategies and database optimization.",Feedback:"Good problem identification and solution approach. The answer demonstrates technical problem-solving skills.",Strengths:["Problem identification","Technical solution","Performance focus"],Weaknesses:["Could elaborate on specific obstacles","Missing metrics or results"],Suggestions:["Provide specific performance metrics","Detail the obstacles faced"],Score:7}]},O_=e=>{const t=[],n=[];return e.forEach(r=>{r.type==="technical"?t.push(r):n.push(r)}),{technical:t,background:n}},Za=async(e,t=10,n=10)=>{try{const r=t+n,i=Math.round(t/r*100),a=(await ia.post("/questions/generate",{role:e,total:r,techRatio:i})).data.questions||[];return O_(a)}catch(r){return console.error("Failed to generate questions:",r),{technical:b_,background:k_}}},N_=async(e,t,n)=>{try{return(await ia.post(`/session/${e}/answer`,{sessionId:e,orderNo:t,answerText:n})).data}catch(r){return console.error("Failed to submit answer:",r),{message:"Answer submitted successfully"}}},M_=async e=>{try{return(await ia.get(`/session/${e}/next`)).data}catch(t){return console.error("Failed to get next question:",t),{orderNo:1,question:"What is your experience with TypeScript?",type:"Technical",difficulty:3}}},D_=async e=>{try{return(await ia.post(`/session/${e}/finish`)).data}catch(t){return console.error("Failed to finish session:",t),{message:"Mock session finished"}}},j_=async e=>{try{return(await ia.post(`/session/${e}/report`)).data}catch(t){return console.error("Failed to generate report:",t),{reportJson:x_}}},Fv={Frontend:["Frontend Developer (React)","Frontend Developer (Vue.js)","Frontend Developer (Angular)","Web Developer (Full-stack JS)"],Backend:["Backend Developer (.NET Core)","Backend Developer (Node.js)","Backend Developer (Java Spring Boot)","Backend Developer (Go)"],Mobile:["iOS Developer (Swift)","Android Developer (Kotlin/Java)","Cross-platform Mobile (Flutter/React Native)"],"Data / AI":["Data Engineer (ETL/Big Data)","Data Analyst (SQL/Python)","Machine Learning Engineer","MLOps Engineer"],"Cloud / DevOps":["DevOps Engineer (CI/CD, Docker, Kubernetes)","Cloud Engineer (AWS/Azure/GCP)","Site Reliability Engineer (SRE)"],"Security / QA":["Cybersecurity Engineer","QA/Test Automation Engineer"]},z_=["Junior","Mid","Senior"],L_=({onSubmit:e,isLoading:t=!1})=>{const[n,r]=_.useState(""),[i,o]=_.useState(""),[a,s]=_.useState(""),[c,l]=_.useState(""),u=_.useMemo(()=>n?[...Fv[n]]:[],[n]),p=_.useMemo(()=>!(!n||!a&&c.trim().length<3),[n,a,c]),d=()=>{const v=[];i&&v.push(i),a&&v.push(a);const S=c.trim();return S&&v.push(`(${S})`),v.join(" ")},h=v=>{v.preventDefault(),p&&e(d())};return m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Job Role"}),m.jsxs("form",{onSubmit:h,className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),m.jsxs("select",{value:n,onChange:v=>{r(v.target.value),s("")},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:t,children:[m.jsx("option",{value:"",disabled:!0,children:"Select category"}),Object.keys(Fv).map(v=>m.jsx("option",{value:v,children:v},v))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level (optional)"}),m.jsxs("select",{value:i,onChange:v=>o(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:t||!n,children:[m.jsx("option",{value:"",children:"None"}),z_.map(v=>m.jsx("option",{value:v,children:v},v))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub-role (optional)"}),m.jsxs("select",{value:a,onChange:v=>s(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:t||!n,children:[m.jsx("option",{value:"",children:"None"}),u.map(v=>m.jsx("option",{value:v,children:v},v))]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Other details (tech stack, domain, tools)"}),m.jsx("input",{type:"text",value:c,onChange:v=>l(v.target.value),placeholder:"e.g., Python + FastAPI, React + Next.js, AWS + Terraform",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:t})]}),m.jsx("div",{className:"flex justify-end",children:m.jsx("button",{type:"submit",disabled:!p||t,className:`px-6 py-2 rounded-md font-medium transition-colors ${!p||t?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}`,children:t?"Generating...":"Generate Questions"})})]})]})},B_=()=>{const e=yr(),{setRole:t,setQuestions:n}=oi(),[r,i]=_.useState(!1),o=async a=>{i(!0);try{t(a);const s=await Za(a,5,5);n(s),e("/questions")}catch(s){console.error("Failed to generate questions:",s),e("/questions")}finally{i(!1)}};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12",children:m.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"AI Interviewer"}),m.jsx("p",{className:"text-xl text-gray-600",children:"Generate personalized interview questions for any role"})]}),m.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:m.jsx(L_,{onSubmit:o,isLoading:r})}),m.jsxs("div",{className:"mt-16 grid md:grid-cols-3 gap-8",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Smart Generation"}),m.jsx("p",{className:"text-gray-600",children:"AI-powered question generation based on role requirements"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Customizable"}),m.jsx("p",{className:"text-gray-600",children:"Adjust difficulty, type ratio, and question count"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ready to Use"}),m.jsx("p",{className:"text-gray-600",children:"Generate professional interview questions in seconds"})]})]})]})})},xc=({items:e,type:t,onDelete:n,selectable:r=!1,onToggleSelect:i,selectedQuestions:o=[]})=>{const a=l=>l<=2?"bg-green-100 text-green-800":l<=4?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",s=l=>l<=2?"Beginner":l<=4?"Intermediate":"Advanced",c=l=>l==="technical"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800";return e.length===0?m.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No ",t," questions available"]}):m.jsx("div",{className:"space-y-4",children:e.map(l=>m.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow",children:m.jsxs("div",{className:"flex items-start space-x-3",children:[r&&i&&m.jsx("input",{type:"checkbox",checked:o.includes(l.id),onChange:()=>i(l.id),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-start justify-between mb-3",children:[m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c(l.type)}`,children:l.type}),m.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a(l.difficulty)}`,children:s(l.difficulty)})]}),m.jsx("button",{onClick:()=>n(l.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:l.text}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tags:"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:l.tags.map((u,p)=>m.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-md",children:u},p))})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Expected Points:"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:l.expectedPoints.map((u,p)=>m.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-md",children:u},p))})]})]})]})]})},l.id))})},F_=()=>{const e=yr(),{role:t,technical:n,background:r,removeQuestion:i,setQuestions:o,regenerate10x10:a}=oi(),[s,c]=_.useState(!1),l=async()=>{if(t){c(!0);try{const h=await Za(t,5,5);o(h),a()}catch(h){console.error("Failed to regenerate questions:",h)}finally{c(!1)}}},u=async()=>{if(t){c(!0);try{const h=await Za(t,2,0);o({technical:[...n,...h.technical],background:[...r]})}catch(h){console.error("Failed to generate more technical questions:",h)}finally{c(!1)}}},p=async()=>{if(t){c(!0);try{const h=await Za(t,0,2);o({technical:[...n],background:[...r,...h.background]})}catch(h){console.error("Failed to generate more background questions:",h)}finally{c(!1)}}},d=()=>{e("/mock")};return n.length===0&&r.length===0?m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"No Questions Generated"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Please go back to the home page to generate interview questions."}),m.jsx("button",{onClick:()=>e("/"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Go Back Home"})]})}):m.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Question Bank"}),m.jsxs("p",{className:"text-gray-600",children:["Role: ",t,"  ",n.length+r.length," questions available"]})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("button",{onClick:l,disabled:s,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50",children:" Regenerate"}),m.jsx("button",{onClick:u,disabled:s,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:" More Technical (2)"}),m.jsx("button",{onClick:p,disabled:s,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:" More Background (2)"}),m.jsx("button",{onClick:d,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:" Mock Interview"})]})]})}),m.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[m.jsxs("div",{children:[m.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[m.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium mr-3",children:"Technical"}),n.length," questions"]}),m.jsx(xc,{items:n,type:"technical",onDelete:h=>i(h,"technical")})]}),m.jsxs("div",{children:[m.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[m.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium mr-3",children:"Background"}),r.length," questions"]}),m.jsx(xc,{items:r,type:"background",onDelete:h=>i(h,"background")})]})]}),m.jsxs("div",{className:"mt-12 bg-white rounded-lg shadow-md p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Question Bank Summary"}),m.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:n.length}),m.jsx("div",{className:"text-gray-600",children:"Technical Questions"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:r.length}),m.jsx("div",{className:"text-gray-600",children:"Background Questions"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:n.length+r.length}),m.jsx("div",{className:"text-gray-600",children:"Total Questions"})]})]}),m.jsx("div",{className:"mt-6 text-center",children:m.jsx("button",{onClick:d,className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:from-green-700 hover:to-emerald-700 transition-all transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-green-300",children:" Start Mock Interview Now"})})]})]})})},q_=({value:e,onChange:t,disabled:n=!1})=>m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Background"}),m.jsx("span",{className:"text-sm text-gray-600",children:"Technical"})]}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("input",{type:"range",min:"0",max:"100",value:e,onChange:r=>t(parseInt(r.target.value)),disabled:n,className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider disabled:opacity-50"}),m.jsxs("span",{className:"text-lg font-semibold text-blue-600 min-w-[4rem]",children:[e,"%"]})]}),m.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Background: ",100-e,"%"]})]}),an={}.VITE_API_BASE&&{}.VITE_API_BASE!==""?{}.VITE_API_BASE:"/api",U_=()=>{const e=yr(),{technical:t,background:n,config:r,setConfig:i,setSessionId:o,toggleSelect:a,selectedQuestions:s,clearSelection:c}=oi(),[l,u]=_.useState(!1),[p,d]=_.useState(!1),h=P=>{i({mode:P}),P==="manual"&&c()},v=P=>{i({ratio:P})},S=()=>{d(!p),i(p?{ratio:70}:{ratio:"random"})},C=P=>{const w=Math.max(1,Math.min(10,P));i({total:w})},f=()=>[...t,...n].filter(w=>s.includes(w.id)),g=()=>{let P,w;p||r.ratio==="random"?(P=Math.floor(Math.random()*r.total)+1,w=r.total-P):(P=Math.round(r.ratio/100*r.total),w=r.total-P);const T=[...t].sort(()=>Math.random()-.5).slice(0,P),E=[...n].sort(()=>Math.random()-.5).slice(0,w);return[...T,...E]},y=async()=>{if(r.mode==="manual"&&s.length===0){alert("Please select at least one question for manual mode");return}u(!0);try{let P;r.mode==="manual"?P=f():P=g();const w=P.map(x=>({id:x.id||`temp_${Date.now()}_${Math.random()}`,text:x.text,type:x.type==="technical"?"technical":x.type==="background"?"behavioral":"technical"}));console.log("Sending questions to backend:",w);const T=await fetch(`${an}/video-session/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questions:w})});if(!T.ok)throw new Error(`HTTP error! status: ${T.status}`);const E=await T.json();console.log("Session created successfully:",E),o(E.sessionId),e("/interview-room")}catch(P){console.error("Failed to create session:",P),o("mock-session-id"),e("/interview-room")}finally{u(!1)}},R=f();return m.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:m.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mock Interview Configuration"}),m.jsx("p",{className:"text-gray-600",children:"Configure your interview settings and start the mock interview"})]}),m.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Interview Mode"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"radio",name:"mode",value:"manual",checked:r.mode==="manual",onChange:()=>h("manual"),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),m.jsx("span",{className:"text-gray-700",children:"Manual Selection"})]}),m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"radio",name:"mode",value:"random",checked:r.mode==="random",onChange:()=>h("random"),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),m.jsx("span",{className:"text-gray-700",children:"Random Selection"})]})]})]}),r.mode==="random"&&m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Random Selection Settings"}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{children:m.jsxs("label",{className:"flex items-center mb-3",children:[m.jsx("input",{type:"checkbox",checked:p,onChange:S,className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsx("span",{className:"text-gray-700",children:"Random Technical:Background Ratio"})]})}),!p&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Technical:Background Ratio"}),m.jsx(q_,{value:r.ratio,onChange:v,disabled:p})]})]})]}),r.mode==="random"&&m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Total Questions"}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("input",{type:"range",min:"1",max:"10",value:r.total,onChange:P=>C(parseInt(P.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),m.jsx("span",{className:"text-2xl font-bold text-blue-600 min-w-[3rem]",children:r.total})]}),m.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mt-2",children:[m.jsx("span",{children:"1"}),m.jsx("span",{children:"10"})]})]}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsx("button",{onClick:y,disabled:l||r.mode==="manual"&&s.length===0,className:`w-full py-3 px-6 rounded-lg text-lg font-semibold transition-all transform ${l||r.mode==="manual"&&s.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-green-300"}`,children:l?m.jsxs("div",{className:"flex items-center justify-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Starting Interview..."]}):" Start Mock Interview"})})]}),m.jsxs("div",{className:"space-y-6",children:[r.mode==="manual"?m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Manual Selection (",s.length," selected)"]}),s.length===0?m.jsx("p",{className:"text-gray-500 text-center py-8",children:"Select questions from the question bank below"}):m.jsx("div",{className:"space-y-3",children:R.map((P,w)=>m.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx("input",{type:"checkbox",checked:!0,onChange:()=>a(P.id),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[m.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P.type==="technical"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:P.type}),m.jsxs("span",{className:"text-sm text-gray-500",children:["Q",w+1]})]}),m.jsx("p",{className:"text-gray-800 text-sm",children:P.text})]})]})},P.id))})]}):m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Random Selection Preview"}),m.jsx("p",{className:"text-gray-600 mb-4",children:p||r.ratio==="random"?"Questions will be randomly selected with random ratio":`Questions will be randomly selected with ${r.ratio}% technical and ${100-r.ratio}% background`}),m.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:m.jsxs("p",{className:"text-blue-800 text-sm",children:["Total questions: ",r.total]})})]}),r.mode==="manual"&&m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Questions from Bank"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsxs("h4",{className:"text-md font-medium text-gray-700 mb-2",children:["Technical Questions (",t.length,")"]}),m.jsx(xc,{items:t,type:"technical",onDelete:()=>{},selectable:!0,onToggleSelect:a,selectedQuestions:s})]}),m.jsxs("div",{children:[m.jsxs("h4",{className:"text-md font-medium text-gray-700 mb-2",children:["Background Questions (",n.length,")"]}),m.jsx(xc,{items:n,type:"background",onDelete:()=>{},selectable:!0,onToggleSelect:a,selectedQuestions:s})]})]})]})]})]})]})})},$_="v2_public_Lily_NoHands_RedShirt_Office@JDOtgQlb_L",qv=e=>new Promise(t=>setTimeout(t,e));function vR(e){const t=_.useRef(null),[n,r]=_.useState(!1),[i,o]=_.useState(null),a=_.useRef(null),s=_.useRef(null),c=_.useRef(null),l=_.useRef(!1),u=_.useRef([]);return _.useEffect(()=>l.current?void 0:(l.current=!0,(async()=>{try{const v=await fetch(`${an}/stream/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({presenter_id:$_,driver_id:"XuasfjTBLY"})});if(!v.ok)throw new Error(`Failed to create stream: ${v.status}`);const{id:S,session_id:C,offer:f,ice_servers:g}=await v.json();s.current=S,c.current=C;const y=new RTCPeerConnection({iceServers:g});a.current=y,y.ontrack=w=>{t.current&&w.streams&&w.streams[0]&&(t.current.srcObject=w.streams[0])},y.onicecandidate=async w=>{!w.candidate||!s.current||u.current.push({candidate:w.candidate.candidate,sdpMid:w.candidate.sdpMid,sdpMLineIndex:w.candidate.sdpMLineIndex})},y.onconnectionstatechange=()=>{y.connectionState==="connected"?r(!0):(y.connectionState==="failed"||y.connectionState==="closed")&&(r(!1),o(`WebRTC connection state: ${y.connectionState}`))},await y.setRemoteDescription(f);const R=await y.createAnswer();await y.setLocalDescription(R);const P=await fetch(`${an}/stream/${s.current}/sdp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:c.current||"",answer:R})});if(!P.ok){const w=await P.text();throw new Error(`SDP exchange failed: ${P.status} ${w}`)}for(const w of u.current)try{await fetch(`${an}/stream/${s.current}/ice`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...w,session_id:c.current||""})})}catch(T){console.warn("Failed to send cached ICE candidate:",T)}u.current=[]}catch(v){console.error("D-ID setup error:",v),o(v.message||String(v))}})(),()=>{console.log("Cleaning up D-ID connection..."),s.current&&fetch(`${an}/stream/${s.current}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:c.current||""})}).catch(v=>console.warn("Failed to close D-ID stream:",v)),a.current&&(a.current.close(),a.current=null),s.current=null,c.current=null,u.current=[],l.current=!1}),[e]),{videoRef:t,say:async h=>{if(!s.current||!c.current)throw new Error("Stream not initialized. Cannot send text.");const v=3;for(let S=0;S<v;S++)try{const C=await fetch(`${an}/stream/${s.current}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:c.current||"",script:{type:"text",provider:{type:"microsoft",voice_id:"en-US-JennyNeural"},input:h},config:{stitch:!0,quality:"medium",fps:24,resolution:"720p"}})});if(C.ok){console.log(`[Clips] Speech request successful for: "${h}"`);return}if(C.status===500&&S<v-1){console.warn(`[Clips] Speech request failed with 500. Retrying... (${S+1}/${v})`),await qv(1e3);continue}const f=await C.text();throw new Error(`Speech request failed: ${C.status}. Response: ${f}`)}catch(C){if(S<v-1){console.warn(`[Clips] Speech request failed with a network error. Retrying... (${S+1}/${v})`,C),await qv(1e3);continue}throw C}},ready:n,error:i,stop:async()=>{console.log("Manually stopping D-ID stream...");try{s.current&&(await fetch(`${an}/stream/${s.current}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:c.current||""})}),console.log("D-ID stream deleted successfully")),a.current&&(a.current.close(),a.current=null),s.current=null,c.current=null,u.current=[],r(!1),o(null),t.current&&(t.current.srcObject=null)}catch(h){console.error("Failed to stop D-ID stream:",h),o("Failed to stop stream")}}}}const W_=()=>{const{id:e}=zC(),t=yr(),{technical:n,background:r,setSessionId:i}=oi(),[o,a]=_.useState([]),[s,c]=_.useState(0),[l,u]=_.useState(""),[p,d]=_.useState(!1),[h,v]=_.useState(!1),{videoRef:S,say:C,ready:f,error:g}=vR("https://d-id-public-bucket.s3.us-west-2.amazonaws.com/alice.jpg");_.useEffect(()=>{e&&i(e);const E=[...n,...r];E.length>0&&a(E)},[e,n,r,i]);const y=o[s],R=async()=>{if(!(!y||!f)){v(!0);try{await C(y.text)}catch(E){console.error("Failed to speak question:",E)}}},P=async E=>{if(!(!e||!y)){d(!0);try{await N_(e,s+1,E),u(E)}catch(x){console.error("Failed to submit answer:",x),u(E)}finally{d(!1)}}},w=async()=>{if(s>=o.length-1){await T();return}try{e&&await M_(e),c(E=>E+1),u("")}catch(E){console.error("Failed to get next question:",E),c(x=>x+1),u("")}},T=async()=>{if(e){d(!0);try{await D_(e),t(`/report/${e}`)}catch(E){console.error("Failed to finish session:",E),t(`/report/${e}`)}finally{d(!1)}}};return y?m.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("div",{className:"flex items-center space-x-4",children:m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mock Interview in Progress"})}),m.jsxs("div",{className:"text-sm text-gray-600",children:["Question ",s+1," of ",o.length]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(s+1)/o.length*100}%`}})})]}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-start",children:[m.jsx("div",{className:"w-full h-64 md:h-80 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center",children:m.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center p-2",children:f?h?m.jsxs("div",{className:"w-full h-full",children:[m.jsx("video",{ref:S,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover rounded"}),g&&m.jsxs("div",{className:"text-red-600 mt-2 text-xs text-center",children:["Error: ",g]})]}):m.jsx("button",{onClick:R,disabled:!f,className:"px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Start Interview"}):m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),m.jsx("div",{className:"text-sm text-gray-600",children:"Connecting to virtual interviewer..."}),m.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Status: ",f?"Ready":"Connecting..."]})]})})}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[m.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${y.type==="technical"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:y.type}),m.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${y.difficulty<=2?"bg-green-100 text-green-800":y.difficulty<=4?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:y.difficulty<=2?"Beginner":y.difficulty<=4?"Intermediate":"Advanced"})]}),m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:y.text}),m.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:y.tags.map((E,x)=>m.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-md",children:E},x))}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Expected Points:"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:y.expectedPoints.map((E,x)=>m.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-md",children:E},x))})]})]})]})}),m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Answer"}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("textarea",{value:l,onChange:E=>u(E.target.value),placeholder:"Type your answer here...",className:"w-full h-32 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",disabled:p}),m.jsx("div",{className:"flex justify-end",children:m.jsx("button",{onClick:()=>P(l),disabled:!l.trim()||p,className:`px-6 py-2 rounded-md font-medium transition-colors ${!l.trim()||p?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}`,children:p?"Submitting...":"Submit Answer"})})]})]}),l&&m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Answer"}),m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:m.jsx("p",{className:"text-gray-800",children:l})})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("button",{onClick:()=>t("/mock"),className:"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors",children:" Back to Config"}),m.jsx("div",{className:"flex space-x-4",children:s<o.length-1?m.jsx("button",{onClick:w,disabled:!l||p,className:`px-6 py-3 rounded-lg font-medium transition-colors ${!l||p?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"Next Question "}):m.jsx("button",{onClick:T,disabled:!l||p,className:`px-6 py-3 rounded-lg font-medium transition-colors ${!l||p?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:p?"Finishing...":"Finish Interview"})})]})]})}):m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"No Questions Available"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Please go back to generate interview questions."}),m.jsx("button",{onClick:()=>t("/"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Go Back Home"})]})})},V_=()=>{const{id:e}=zC(),t=yr(),[n,r]=_.useState(null),[i,o]=_.useState(!0);_.useEffect(()=>{(async()=>{if(e)try{const p=await j_(e);r(p.reportJson)}catch(p){console.error("Failed to load report:",p),r({Overall:"7.6",Verdict:"Pass",QuestionEvaluations:[{QuestionText:"Sample Question",UserAnswer:"Sample Answer",Feedback:"Sample feedback",Strengths:["Sample strength"],Weaknesses:["Sample weakness"],Suggestions:["Sample suggestion"],Score:7}]})}finally{o(!1)}})()},[e]);const a=()=>{console.log("Export PDF functionality to be implemented"),alert("PDF export functionality will be implemented soon!")},s=()=>{t("/")};if(i)return m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Generating your interview report..."})]})});if(!n)return m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Report Not Found"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Unable to generate interview report."}),m.jsx("button",{onClick:()=>t("/"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Go Back Home"})]})});const c=u=>{switch(u.toLowerCase()){case"pass":return"bg-green-100 text-green-800";case"fail":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}},l=u=>{const p=parseFloat(u);return p>=8?"text-green-600":p>=6?"text-yellow-600":"text-red-600"};return m.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Interview Report"}),m.jsxs("div",{className:`text-5xl font-bold mb-4 ${l(n.Overall)}`,children:["Overall Score: ",n.Overall,"/10"]}),m.jsx("div",{className:"inline-block",children:m.jsx("span",{className:`px-4 py-2 rounded-full text-lg font-medium ${c(n.Verdict)}`,children:n.Verdict})})]}),n.QuestionEvaluations&&n.QuestionEvaluations.length>0?m.jsx("div",{className:"space-y-6",children:n.QuestionEvaluations.map((u,p)=>m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsx("div",{className:"flex items-start justify-between mb-4",children:m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[m.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Question ",p+1]}),m.jsxs("span",{className:"text-sm text-gray-600",children:["Question ",p+1]}),m.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["Score: ",u.Score,"/10"]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Question:"}),m.jsx("p",{className:"text-gray-800 bg-gray-50 p-3 rounded",children:u.QuestionText})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Your Answer:"}),m.jsx("p",{className:"text-gray-800 bg-blue-50 p-3 rounded border-l-4 border-blue-400",children:u.UserAnswer||"No answer provided"})]}),u.Feedback&&m.jsxs("div",{children:[m.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"AI Evaluation:"}),m.jsx("p",{className:"text-gray-800 bg-green-50 p-3 rounded border-l-4 border-green-400",children:u.Feedback})]}),u.Strengths&&u.Strengths.length>0&&m.jsxs("div",{className:"mt-4",children:[m.jsx("h5",{className:"text-sm font-medium text-green-700 mb-2",children:"Strengths:"}),m.jsx("ul",{className:"list-disc list-inside text-sm text-green-800 space-y-1",children:u.Strengths.map((d,h)=>m.jsx("li",{children:d},h))})]}),u.Weaknesses&&u.Weaknesses.length>0&&m.jsxs("div",{className:"mt-4",children:[m.jsx("h5",{className:"text-sm font-medium text-orange-700 mb-2",children:"Areas for Improvement:"}),m.jsx("ul",{className:"list-disc list-inside text-sm text-orange-800 space-y-1",children:u.Weaknesses.map((d,h)=>m.jsx("li",{children:d},h))})]}),u.Suggestions&&u.Suggestions.length>0&&m.jsxs("div",{className:"mt-4",children:[m.jsx("h5",{className:"text-sm font-medium text-blue-700 mb-2",children:"Suggestions:"}),m.jsx("ul",{className:"list-disc list-inside text-sm text-blue-800 space-y-1",children:u.Suggestions.map((d,h)=>m.jsx("li",{children:d},h))})]})]})})},p))}):m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-gray-600",children:"No question evaluations available."})}),m.jsxs("div",{className:"flex justify-center space-x-6 mt-8",children:[m.jsx("button",{onClick:a,className:"bg-gray-600 text-white px-8 py-3 rounded-lg hover:bg-gray-700 transition-colors",children:" Export PDF"}),m.jsx("button",{onClick:s,className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:" New Interview"})]})]})})};var rn={},Yu={},sl={},Zu={},oe={},li={},ft={},gR={},ol={},al={};Object.defineProperty(al,"__esModule",{value:!0});al.default=K_;let Ma;const H_=new Uint8Array(16);function K_(){if(!Ma&&(Ma=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ma))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ma(H_)}var Nn={},Sr={},cl={};Object.defineProperty(cl,"__esModule",{value:!0});cl.default=void 0;var J_=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;cl.default=J_;Object.defineProperty(Sr,"__esModule",{value:!0});Sr.default=void 0;var Q_=G_(cl);function G_(e){return e&&e.__esModule?e:{default:e}}function X_(e){return typeof e=="string"&&Q_.default.test(e)}var Y_=X_;Sr.default=Y_;Object.defineProperty(Nn,"__esModule",{value:!0});Nn.default=void 0;Nn.unsafeStringify=mR;var Z_=eA(Sr);function eA(e){return e&&e.__esModule?e:{default:e}}const Ce=[];for(let e=0;e<256;++e)Ce.push((e+256).toString(16).slice(1));function mR(e,t=0){return Ce[e[t+0]]+Ce[e[t+1]]+Ce[e[t+2]]+Ce[e[t+3]]+"-"+Ce[e[t+4]]+Ce[e[t+5]]+"-"+Ce[e[t+6]]+Ce[e[t+7]]+"-"+Ce[e[t+8]]+Ce[e[t+9]]+"-"+Ce[e[t+10]]+Ce[e[t+11]]+Ce[e[t+12]]+Ce[e[t+13]]+Ce[e[t+14]]+Ce[e[t+15]]}function tA(e,t=0){const n=mR(e,t);if(!(0,Z_.default)(n))throw TypeError("Stringified UUID is invalid");return n}var nA=tA;Nn.default=nA;Object.defineProperty(ol,"__esModule",{value:!0});ol.default=void 0;var rA=sA(al),iA=Nn;function sA(e){return e&&e.__esModule?e:{default:e}}let Uv,ep,tp=0,np=0;function oA(e,t,n){let r=t&&n||0;const i=t||new Array(16);e=e||{};let o=e.node||Uv,a=e.clockseq!==void 0?e.clockseq:ep;if(o==null||a==null){const d=e.random||(e.rng||rA.default)();o==null&&(o=Uv=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),a==null&&(a=ep=(d[6]<<8|d[7])&16383)}let s=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:np+1;const l=s-tp+(c-np)/1e4;if(l<0&&e.clockseq===void 0&&(a=a+1&16383),(l<0||s>tp)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");tp=s,np=c,ep=a,s+=122192928e5;const u=((s&268435455)*1e4+c)%4294967296;i[r++]=u>>>24&255,i[r++]=u>>>16&255,i[r++]=u>>>8&255,i[r++]=u&255;const p=s/4294967296*1e4&268435455;i[r++]=p>>>8&255,i[r++]=p&255,i[r++]=p>>>24&15|16,i[r++]=p>>>16&255,i[r++]=a>>>8|128,i[r++]=a&255;for(let d=0;d<6;++d)i[r+d]=o[d];return t||(0,iA.unsafeStringify)(i)}var aA=oA;ol.default=aA;var ll={},_n={},sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.default=void 0;var cA=lA(Sr);function lA(e){return e&&e.__esModule?e:{default:e}}function uA(e){if(!(0,cA.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}var pA=uA;sa.default=pA;Object.defineProperty(_n,"__esModule",{value:!0});_n.URL=_n.DNS=void 0;_n.default=gA;var dA=Nn,hA=fA(sa);function fA(e){return e&&e.__esModule?e:{default:e}}function vA(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}const yR="6ba7b810-9dad-11d1-80b4-00c04fd430c8";_n.DNS=yR;const SR="6ba7b811-9dad-11d1-80b4-00c04fd430c8";_n.URL=SR;function gA(e,t,n){function r(i,o,a,s){var c;if(typeof i=="string"&&(i=vA(i)),typeof o=="string"&&(o=(0,hA.default)(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+i.length);if(l.set(o),l.set(i,o.length),l=n(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,a){s=s||0;for(let u=0;u<16;++u)a[s+u]=l[u];return a}return(0,dA.unsafeStringify)(l)}try{r.name=e}catch{}return r.DNS=yR,r.URL=SR,r}var ul={};Object.defineProperty(ul,"__esModule",{value:!0});ul.default=void 0;function mA(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return yA(SA(CA(e),e.length*8))}function yA(e){const t=[],n=e.length*32,r="0123456789abcdef";for(let i=0;i<n;i+=8){const o=e[i>>5]>>>i%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);t.push(a)}return t}function CR(e){return(e+64>>>9<<4)+14+1}function SA(e,t){e[t>>5]|=128<<t%32,e[CR(t)-1]=t;let n=1732584193,r=-271733879,i=-1732584194,o=271733878;for(let a=0;a<e.length;a+=16){const s=n,c=r,l=i,u=o;n=ke(n,r,i,o,e[a],7,-680876936),o=ke(o,n,r,i,e[a+1],12,-389564586),i=ke(i,o,n,r,e[a+2],17,606105819),r=ke(r,i,o,n,e[a+3],22,-1044525330),n=ke(n,r,i,o,e[a+4],7,-176418897),o=ke(o,n,r,i,e[a+5],12,1200080426),i=ke(i,o,n,r,e[a+6],17,-1473231341),r=ke(r,i,o,n,e[a+7],22,-45705983),n=ke(n,r,i,o,e[a+8],7,1770035416),o=ke(o,n,r,i,e[a+9],12,-1958414417),i=ke(i,o,n,r,e[a+10],17,-42063),r=ke(r,i,o,n,e[a+11],22,-1990404162),n=ke(n,r,i,o,e[a+12],7,1804603682),o=ke(o,n,r,i,e[a+13],12,-40341101),i=ke(i,o,n,r,e[a+14],17,-1502002290),r=ke(r,i,o,n,e[a+15],22,1236535329),n=xe(n,r,i,o,e[a+1],5,-165796510),o=xe(o,n,r,i,e[a+6],9,-1069501632),i=xe(i,o,n,r,e[a+11],14,643717713),r=xe(r,i,o,n,e[a],20,-373897302),n=xe(n,r,i,o,e[a+5],5,-701558691),o=xe(o,n,r,i,e[a+10],9,38016083),i=xe(i,o,n,r,e[a+15],14,-660478335),r=xe(r,i,o,n,e[a+4],20,-405537848),n=xe(n,r,i,o,e[a+9],5,568446438),o=xe(o,n,r,i,e[a+14],9,-1019803690),i=xe(i,o,n,r,e[a+3],14,-187363961),r=xe(r,i,o,n,e[a+8],20,1163531501),n=xe(n,r,i,o,e[a+13],5,-1444681467),o=xe(o,n,r,i,e[a+2],9,-51403784),i=xe(i,o,n,r,e[a+7],14,1735328473),r=xe(r,i,o,n,e[a+12],20,-1926607734),n=Oe(n,r,i,o,e[a+5],4,-378558),o=Oe(o,n,r,i,e[a+8],11,-2022574463),i=Oe(i,o,n,r,e[a+11],16,1839030562),r=Oe(r,i,o,n,e[a+14],23,-35309556),n=Oe(n,r,i,o,e[a+1],4,-1530992060),o=Oe(o,n,r,i,e[a+4],11,1272893353),i=Oe(i,o,n,r,e[a+7],16,-155497632),r=Oe(r,i,o,n,e[a+10],23,-1094730640),n=Oe(n,r,i,o,e[a+13],4,681279174),o=Oe(o,n,r,i,e[a],11,-358537222),i=Oe(i,o,n,r,e[a+3],16,-722521979),r=Oe(r,i,o,n,e[a+6],23,76029189),n=Oe(n,r,i,o,e[a+9],4,-640364487),o=Oe(o,n,r,i,e[a+12],11,-421815835),i=Oe(i,o,n,r,e[a+15],16,530742520),r=Oe(r,i,o,n,e[a+2],23,-995338651),n=Ne(n,r,i,o,e[a],6,-198630844),o=Ne(o,n,r,i,e[a+7],10,1126891415),i=Ne(i,o,n,r,e[a+14],15,-1416354905),r=Ne(r,i,o,n,e[a+5],21,-57434055),n=Ne(n,r,i,o,e[a+12],6,1700485571),o=Ne(o,n,r,i,e[a+3],10,-1894986606),i=Ne(i,o,n,r,e[a+10],15,-1051523),r=Ne(r,i,o,n,e[a+1],21,-2054922799),n=Ne(n,r,i,o,e[a+8],6,1873313359),o=Ne(o,n,r,i,e[a+15],10,-30611744),i=Ne(i,o,n,r,e[a+6],15,-1560198380),r=Ne(r,i,o,n,e[a+13],21,1309151649),n=Ne(n,r,i,o,e[a+4],6,-145523070),o=Ne(o,n,r,i,e[a+11],10,-1120210379),i=Ne(i,o,n,r,e[a+2],15,718787259),r=Ne(r,i,o,n,e[a+9],21,-343485551),n=fn(n,s),r=fn(r,c),i=fn(i,l),o=fn(o,u)}return[n,r,i,o]}function CA(e){if(e.length===0)return[];const t=e.length*8,n=new Uint32Array(CR(t));for(let r=0;r<t;r+=8)n[r>>5]|=(e[r/8]&255)<<r%32;return n}function fn(e,t){const n=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(n>>16)<<16|n&65535}function RA(e,t){return e<<t|e>>>32-t}function pl(e,t,n,r,i,o){return fn(RA(fn(fn(t,e),fn(r,o)),i),n)}function ke(e,t,n,r,i,o,a){return pl(t&n|~t&r,e,t,i,o,a)}function xe(e,t,n,r,i,o,a){return pl(t&r|n&~r,e,t,i,o,a)}function Oe(e,t,n,r,i,o,a){return pl(t^n^r,e,t,i,o,a)}function Ne(e,t,n,r,i,o,a){return pl(n^(t|~r),e,t,i,o,a)}var PA=mA;ul.default=PA;Object.defineProperty(ll,"__esModule",{value:!0});ll.default=void 0;var wA=RR(_n),EA=RR(ul);function RR(e){return e&&e.__esModule?e:{default:e}}const TA=(0,wA.default)("v3",48,EA.default);var IA=TA;ll.default=IA;var dl={},hl={};Object.defineProperty(hl,"__esModule",{value:!0});hl.default=void 0;const _A=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var AA={randomUUID:_A};hl.default=AA;Object.defineProperty(dl,"__esModule",{value:!0});dl.default=void 0;var $v=PR(hl),bA=PR(al),kA=Nn;function PR(e){return e&&e.__esModule?e:{default:e}}function xA(e,t,n){if($v.default.randomUUID&&!t&&!e)return $v.default.randomUUID();e=e||{};const r=e.random||(e.rng||bA.default)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return(0,kA.unsafeStringify)(r)}var OA=xA;dl.default=OA;var fl={},vl={};Object.defineProperty(vl,"__esModule",{value:!0});vl.default=void 0;function NA(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function rp(e,t){return e<<t|e>>>32-t}function MA(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const a=unescape(encodeURIComponent(e));e=[];for(let s=0;s<a.length;++s)e.push(a.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,i=Math.ceil(r/16),o=new Array(i);for(let a=0;a<i;++a){const s=new Uint32Array(16);for(let c=0;c<16;++c)s[c]=e[a*64+c*4]<<24|e[a*64+c*4+1]<<16|e[a*64+c*4+2]<<8|e[a*64+c*4+3];o[a]=s}o[i-1][14]=(e.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(let a=0;a<i;++a){const s=new Uint32Array(80);for(let h=0;h<16;++h)s[h]=o[a][h];for(let h=16;h<80;++h)s[h]=rp(s[h-3]^s[h-8]^s[h-14]^s[h-16],1);let c=n[0],l=n[1],u=n[2],p=n[3],d=n[4];for(let h=0;h<80;++h){const v=Math.floor(h/20),S=rp(c,5)+NA(v,l,u,p)+d+t[v]+s[h]>>>0;d=p,p=u,u=rp(l,30)>>>0,l=c,c=S}n[0]=n[0]+c>>>0,n[1]=n[1]+l>>>0,n[2]=n[2]+u>>>0,n[3]=n[3]+p>>>0,n[4]=n[4]+d>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var DA=MA;vl.default=DA;Object.defineProperty(fl,"__esModule",{value:!0});fl.default=void 0;var jA=wR(_n),zA=wR(vl);function wR(e){return e&&e.__esModule?e:{default:e}}const LA=(0,jA.default)("v5",80,zA.default);var BA=LA;fl.default=BA;var gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.default=void 0;var FA="00000000-0000-0000-0000-000000000000";gl.default=FA;var ml={};Object.defineProperty(ml,"__esModule",{value:!0});ml.default=void 0;var qA=UA(Sr);function UA(e){return e&&e.__esModule?e:{default:e}}function $A(e){if(!(0,qA.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var WA=$A;ml.default=WA;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return a.default}});var t=u(ol),n=u(ll),r=u(dl),i=u(fl),o=u(gl),a=u(ml),s=u(Sr),c=u(Nn),l=u(sa);function u(p){return p&&p.__esModule?p:{default:p}}})(gR);Object.defineProperty(ft,"__esModule",{value:!0});ft.createNoDashGuid=ft.createGuid=void 0;const VA=gR,ER=()=>(0,VA.v4)();ft.createGuid=ER;const HA=()=>ER().replace(new RegExp("-","g"),"").toUpperCase();ft.createNoDashGuid=HA;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PlatformEvent=e.EventType=void 0;const t=ft;(function(r){r[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.None=4]="None"})(e.EventType||(e.EventType={}));class n{constructor(i,o){this.privName=i,this.privEventId=(0,t.createNoDashGuid)(),this.privEventTime=new Date().toISOString(),this.privEventType=o,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}e.PlatformEvent=n})(li);Object.defineProperty(oe,"__esModule",{value:!0});oe.AudioStreamNodeErrorEvent=oe.AudioStreamNodeDetachedEvent=oe.AudioStreamNodeAttachedEvent=oe.AudioStreamNodeAttachingEvent=oe.AudioStreamNodeEvent=oe.AudioSourceErrorEvent=oe.AudioSourceOffEvent=oe.AudioSourceReadyEvent=oe.AudioSourceInitializingEvent=oe.AudioSourceEvent=void 0;const Rd=li;class ui extends Rd.PlatformEvent{constructor(t,n,r=Rd.EventType.Info){super(t,r),this.privAudioSourceId=n}get audioSourceId(){return this.privAudioSourceId}}oe.AudioSourceEvent=ui;class KA extends ui{constructor(t){super("AudioSourceInitializingEvent",t)}}oe.AudioSourceInitializingEvent=KA;class JA extends ui{constructor(t){super("AudioSourceReadyEvent",t)}}oe.AudioSourceReadyEvent=JA;class QA extends ui{constructor(t){super("AudioSourceOffEvent",t)}}oe.AudioSourceOffEvent=QA;class GA extends ui{constructor(t,n){super("AudioSourceErrorEvent",t,Rd.EventType.Error),this.privError=n}get error(){return this.privError}}oe.AudioSourceErrorEvent=GA;class oa extends ui{constructor(t,n,r){super(t,n),this.privAudioNodeId=r}get audioNodeId(){return this.privAudioNodeId}}oe.AudioStreamNodeEvent=oa;class XA extends oa{constructor(t,n){super("AudioStreamNodeAttachingEvent",t,n)}}oe.AudioStreamNodeAttachingEvent=XA;class YA extends oa{constructor(t,n){super("AudioStreamNodeAttachedEvent",t,n)}}oe.AudioStreamNodeAttachedEvent=YA;class ZA extends oa{constructor(t,n){super("AudioStreamNodeDetachedEvent",t,n)}}oe.AudioStreamNodeDetachedEvent=ZA;class eb extends oa{constructor(t,n,r){super("AudioStreamNodeErrorEvent",t,n),this.privError=r}get error(){return this.privError}}oe.AudioStreamNodeErrorEvent=eb;var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.ConnectionRedirectEvent=ae.ConnectionMessageSentEvent=ae.ConnectionMessageReceivedEvent=ae.ConnectionEstablishErrorEvent=ae.ConnectionErrorEvent=ae.ConnectionClosedEvent=ae.ConnectionEstablishedEvent=ae.ConnectionStartEvent=ae.ConnectionEvent=ae.ServiceEvent=void 0;const An=li;class tb extends An.PlatformEvent{constructor(t,n,r=An.EventType.Info){super(t,r),this.privJsonResult=n}get jsonString(){return this.privJsonResult}}ae.ServiceEvent=tb;class Yt extends An.PlatformEvent{constructor(t,n,r=An.EventType.Info){super(t,r),this.privConnectionId=n}get connectionId(){return this.privConnectionId}}ae.ConnectionEvent=Yt;class nb extends Yt{constructor(t,n,r){super("ConnectionStartEvent",t),this.privUri=n,this.privHeaders=r}get uri(){return this.privUri}get headers(){return this.privHeaders}}ae.ConnectionStartEvent=nb;class rb extends Yt{constructor(t){super("ConnectionEstablishedEvent",t)}}ae.ConnectionEstablishedEvent=rb;class ib extends Yt{constructor(t,n,r){super("ConnectionClosedEvent",t,An.EventType.Debug),this.privReason=r,this.privStatusCode=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ae.ConnectionClosedEvent=ib;class sb extends Yt{constructor(t,n,r){super("ConnectionErrorEvent",t,An.EventType.Debug),this.privMessage=n,this.privType=r}get message(){return this.privMessage}get type(){return this.privType}}ae.ConnectionErrorEvent=sb;class ob extends Yt{constructor(t,n,r){super("ConnectionEstablishErrorEvent",t,An.EventType.Error),this.privStatusCode=n,this.privReason=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ae.ConnectionEstablishErrorEvent=ob;class ab extends Yt{constructor(t,n,r){super("ConnectionMessageReceivedEvent",t),this.privNetworkReceivedTime=n,this.privMessage=r}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}ae.ConnectionMessageReceivedEvent=ab;class cb extends Yt{constructor(t,n,r){super("ConnectionMessageSentEvent",t),this.privNetworkSentTime=n,this.privMessage=r}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}ae.ConnectionMessageSentEvent=cb;class lb extends Yt{constructor(t,n,r,i){super("ConnectionRedirectEvent",t,An.EventType.Info),this.privRedirectUrl=n,this.privOriginalUrl=r,this.privContext=i}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}}ae.ConnectionRedirectEvent=lb;var kh={},Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.ObjectDisposedError=Ee.InvalidOperationError=Ee.ArgumentNullError=void 0;class ub extends Error{constructor(t){super(t),this.name="ArgumentNull",this.message=t}}Ee.ArgumentNullError=ub;class pb extends Error{constructor(t){super(t),this.name="InvalidOperation",this.message=t}}Ee.InvalidOperationError=pb;class db extends Error{constructor(t,n){super(n),this.name=t+"ObjectDisposed",this.message=n}}Ee.ObjectDisposedError=db;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionMessage=e.MessageType=void 0;const t=Ee,n=ft;var r;(function(o){o[o.Text=0]="Text",o[o.Binary=1]="Binary"})(r=e.MessageType||(e.MessageType={}));class i{constructor(a,s,c,l){if(this.privBody=null,a===r.Text&&s&&typeof s!="string")throw new t.InvalidOperationError("Payload must be a string");if(a===r.Binary&&s&&!(s instanceof ArrayBuffer))throw new t.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=s,this.privHeaders=c||{},this.privId=l||(0,n.createNoDashGuid)(),this.messageType){case r.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case r.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===r.Binary)throw new t.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===r.Text)throw new t.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}e.ConnectionMessage=i})(kh);var yl={};Object.defineProperty(yl,"__esModule",{value:!0});yl.ConnectionOpenResponse=void 0;class hb{constructor(t,n){this.privStatusCode=t,this.privReason=n}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}yl.ConnectionOpenResponse=hb;var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.DeferralMap=void 0;class fb{constructor(){this.privMap={}}add(t,n){this.privMap[t]=n}getId(t){return this.privMap[t]}complete(t,n){try{this.privMap[t].resolve(n)}catch(r){this.privMap[t].reject(r)}finally{this.privMap[t]=void 0}}}Sl.DeferralMap=fb;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.SendingAgentContextMessageEvent=fr.DialogEvent=void 0;const Wv=li;class TR extends Wv.PlatformEvent{constructor(t,n=Wv.EventType.Info){super(t,n)}}fr.DialogEvent=TR;class vb extends TR{constructor(t){super("SendingAgentContextMessageEvent"),this.privAgentConfig=t}get agentConfig(){return this.privAgentConfig}}fr.SendingAgentContextMessageEvent=vb;var Cl={},aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.EventSource=void 0;const gb=Ee,mb=ft;class yb{constructor(t){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=t}onEvent(t){if(this.isDisposed())throw new gb.ObjectDisposedError("EventSource");if(this.metadata)for(const n in this.metadata)n&&t.metadata&&(t.metadata[n]||(t.metadata[n]=this.metadata[n]));for(const n in this.privEventListeners)n&&this.privEventListeners[n]&&this.privEventListeners[n](t)}attach(t){const n=(0,mb.createNoDashGuid)();return this.privEventListeners[n]=t,{detach:()=>(delete this.privEventListeners[n],Promise.resolve())}}attachListener(t){return this.attach(n=>t.onEvent(n))}attachConsoleListener(t){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(n=>t.onEvent(n)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}aa.EventSource=yb;Object.defineProperty(Cl,"__esModule",{value:!0});Cl.Events=void 0;const Sb=Ee,Cb=aa;class Vo{static setEventSource(t){if(!t)throw new Sb.ArgumentNullError("eventSource");Vo.privInstance=t}static get instance(){return Vo.privInstance}}Cl.Events=Vo;Vo.privInstance=new Cb.EventSource;var IR={};Object.defineProperty(IR,"__esModule",{value:!0});var _R={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionState=void 0,function(t){t[t.None=0]="None",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.Disconnected=3]="Disconnected"}(e.ConnectionState||(e.ConnectionState={}))})(_R);var AR={};Object.defineProperty(AR,"__esModule",{value:!0});var bR={};Object.defineProperty(bR,"__esModule",{value:!0});var kR={};Object.defineProperty(kR,"__esModule",{value:!0});var xR={};Object.defineProperty(xR,"__esModule",{value:!0});var OR={};Object.defineProperty(OR,"__esModule",{value:!0});var NR={};Object.defineProperty(NR,"__esModule",{value:!0});var MR={};Object.defineProperty(MR,"__esModule",{value:!0});var DR={};Object.defineProperty(DR,"__esModule",{value:!0});var ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.List=void 0;const Rb=Ee;class cn{constructor(t){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],t)for(const n of t)this.privList.push(n)}get(t){return this.throwIfDisposed(),this.privList[t]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(t){this.throwIfDisposed(),this.insertAt(this.privList.length,t)}insertAt(t,n){this.throwIfDisposed(),t===0?this.privList.unshift(n):t===this.privList.length?this.privList.push(n):this.privList.splice(t,0,n),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(t){return this.throwIfDisposed(),this.remove(t,1)[0]}remove(t,n){this.throwIfDisposed();const r=this.privList.splice(t,n);return this.triggerSubscriptions(this.privRemoveSubscriptions),r}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(t){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[n]=t,{detach:()=>(delete this.privAddSubscriptions[n],Promise.resolve())}}onRemoved(t){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[n]=t,{detach:()=>(delete this.privRemoveSubscriptions[n],Promise.resolve())}}onDisposed(t){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[n]=t,{detach:()=>(delete this.privDisposedSubscriptions[n],Promise.resolve())}}join(t){return this.throwIfDisposed(),this.privList.join(t)}toArray(){const t=Array();return this.privList.forEach(n=>{t.push(n)}),t}any(t){return this.throwIfDisposed(),t?this.where(t).length()>0:this.length()>0}all(t){return this.throwIfDisposed(),this.where(t).length()===this.length()}forEach(t){this.throwIfDisposed();for(let n=0;n<this.length();n++)t(this.privList[n],n)}select(t){this.throwIfDisposed();const n=[];for(let r=0;r<this.privList.length;r++)n.push(t(this.privList[r],r));return new cn(n)}where(t){this.throwIfDisposed();const n=new cn;for(let r=0;r<this.privList.length;r++)t(this.privList[r],r)&&n.add(this.privList[r]);return n}orderBy(t){this.throwIfDisposed();const r=this.toArray().sort(t);return new cn(r)}orderByDesc(t){return this.throwIfDisposed(),this.orderBy((n,r)=>t(r,n))}clone(){return this.throwIfDisposed(),new cn(this.toArray())}concat(t){return this.throwIfDisposed(),new cn(this.privList.concat(t.toArray()))}concatArray(t){return this.throwIfDisposed(),new cn(this.privList.concat(t))}isDisposed(){return this.privList==null}dispose(t){this.isDisposed()||(this.privDisposeReason=t,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new Rb.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(t){if(t)for(const n in t)n&&t[n]()}}ca.List=cn;var xh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.marshalPromiseToCallbacks=e.Sink=e.Deferred=e.PromiseResultEventSource=e.PromiseResult=e.PromiseState=void 0;var t;(function(s){s[s.None=0]="None",s[s.Resolved=1]="Resolved",s[s.Rejected=2]="Rejected"})(t=e.PromiseState||(e.PromiseState={}));class n{constructor(c){this.throwIfError=()=>{if(this.isError)throw this.error},c.on(l=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=l)},l=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=l)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}e.PromiseResult=n;class r{constructor(){this.setResult=c=>{this.privOnSetResult(c)},this.setError=c=>{this.privOnSetError(c)},this.on=(c,l)=>{this.privOnSetResult=c,this.privOnSetError=l}}}e.PromiseResultEventSource=r;class i{constructor(){this.resolve=c=>(this.privResolve(c),this),this.reject=c=>(this.privReject(c),this),this.privPromise=new Promise((c,l)=>{this.privResolve=c,this.privReject=l})}get promise(){return this.privPromise}}e.Deferred=i;class o{constructor(){this.privState=t.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new r,this.privPromiseResult=new n(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(c){if(this.privState!==t.None)throw new Error("'Cannot resolve a completed promise'");this.privState=t.Resolved,this.privPromiseResultEvents.setResult(c);for(let l=0;l<this.privSuccessHandlers.length;l++)this.executeSuccessCallback(c,this.privSuccessHandlers[l],this.privErrorHandlers[l]);this.detachHandlers()}reject(c){if(this.privState!==t.None)throw new Error("'Cannot reject a completed promise'");this.privState=t.Rejected,this.privPromiseResultEvents.setError(c);for(const l of this.privErrorHandlers)this.executeErrorCallback(c,l);this.detachHandlers()}on(c,l){c==null&&(c=()=>{}),this.privState===t.None?(this.privSuccessHandlers.push(c),this.privErrorHandlers.push(l)):(this.privState===t.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,c,l):this.privState===t.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,l),this.detachHandlers())}executeSuccessCallback(c,l,u){try{l(c)}catch(p){this.executeErrorCallback(`'Unhandled callback error: ${p}'`,u)}}executeErrorCallback(c,l){if(l)try{l(c)}catch(u){throw new Error(`'Unhandled callback error: ${u}. InnerError: ${c}'`)}else throw new Error(`'Unhandled error: ${c}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}e.Sink=o;function a(s,c,l){s.then(u=>{try{c&&c(u)}catch(p){if(l)try{if(p instanceof Error){const d=p;l(d.name+": "+d.message)}else l(p)}catch{}}},u=>{if(l)try{if(u instanceof Error){const p=u;l(p.name+": "+p.message)}else l(u)}catch{}})}e.marshalPromiseToCallbacks=a})(xh);var la={};Object.defineProperty(la,"__esModule",{value:!0});la.Queue=void 0;const ip=Ee,sp=ca,Vv=xh;var Eo;(function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"})(Eo||(Eo={}));class Pb{constructor(t){this.privPromiseStore=new sp.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=t||new sp.List,this.privDetachables=[],this.privSubscribers=new sp.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(t){this.throwIfDispose(),this.enqueueFromPromise(new Promise(n=>n(t)))}enqueueFromPromise(t){this.throwIfDispose(),t.then(n=>{this.privList.add(n)},()=>{})}dequeue(){this.throwIfDispose();const t=new Vv.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:t,type:Eo.Dequeue}),this.drain()),t.promise}peek(){this.throwIfDispose();const t=new Vv.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:t,type:Eo.Peek}),this.drain()),t.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(t,n){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=n,this.privIsDisposing=!0;const r=this.privSubscribers;if(r){for(;r.length()>0;)r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}for(const i of this.privDetachables)await i.detach();if(this.privPromiseStore.length()>0&&t){const i=[];return this.privPromiseStore.toArray().forEach(o=>{i.push(o)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(o=>{t(o)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(t){await this.drainAndDispose(null,t)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const t=this.privSubscribers,n=this.privList;if(t&&n){for(;n.length()>0&&t.length()>0&&!this.privIsDisposing;){const r=t.removeFirst();if(r.type===Eo.Peek)r.deferral.resolve(n.first());else{const i=n.removeFirst();r.deferral.resolve(i)}}this.privSubscribers===t&&(this.privSubscribers=t),this.privList===n&&(this.privList=n)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new ip.InvalidOperationError(this.privDisposeReason):new ip.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new ip.InvalidOperationError("Queue disposing")}}la.Queue=Pb;var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});Rl.RawWebsocketMessage=void 0;const Da=kh,Ti=Ee,wb=ft;class Eb{constructor(t,n,r){if(this.privPayload=null,!n)throw new Ti.ArgumentNullError("payload");if(t===Da.MessageType.Binary&&Object.getPrototypeOf(n).constructor.name!=="ArrayBuffer")throw new Ti.InvalidOperationError("Payload must be ArrayBuffer");if(t===Da.MessageType.Text&&typeof n!="string")throw new Ti.InvalidOperationError("Payload must be a string");this.privMessageType=t,this.privPayload=n,this.privId=r||(0,wb.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===Da.MessageType.Binary)throw new Ti.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===Da.MessageType.Text)throw new Ti.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}Rl.RawWebsocketMessage=Eb;var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.RiffPcmEncoder=void 0;class Tb{constructor(t,n){this.privActualSampleRate=t,this.privDesiredSampleRate=n}encode(t){const n=this.downSampleAudioFrame(t,this.privActualSampleRate,this.privDesiredSampleRate);if(!n)return null;const r=n.length*2,i=new ArrayBuffer(r),o=new DataView(i);return this.floatTo16BitPCM(o,0,n),i}setString(t,n,r){for(let i=0;i<r.length;i++)t.setUint8(n+i,r.charCodeAt(i))}floatTo16BitPCM(t,n,r){for(let i=0;i<r.length;i++,n+=2){const o=Math.max(-1,Math.min(1,r[i]));t.setInt16(n,o<0?o*32768:o*32767,!0)}}downSampleAudioFrame(t,n,r){if(!t)return null;if(r===n||r>n)return t;const i=n/r,o=Math.round(t.length/i),a=new Float32Array(o);let s=0,c=0;for(;c<o;){const l=Math.round((c+1)*i);let u=0,p=0;for(;s<l&&s<t.length;)u+=t[s++],p++;a[c++]=u/p}return a}}Pl.RiffPcmEncoder=Tb;var wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.Stream=void 0;const Hv=Ee,Ib=ft,Kv=la;class _b{constructor(t){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=t||(0,Ib.createNoDashGuid)(),this.privReaderQueue=new Kv.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(t){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(t)}catch{}}read(){if(this.privIsReadEnded)throw new Hv.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async t=>((t===void 0||t.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),t))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new Kv.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new Hv.InvalidOperationError("Stream closed")}}wl.Stream=_b;var El={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"}(e.TranslationStatus||(e.TranslationStatus={}))})(El);var Ii={},Jv;function Ab(){if(Jv)return Ii;Jv=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.ChunkedArrayBufferStream=void 0;const e=z();let t=class extends e.Stream{constructor(r,i){super(i),this.privTargetChunkSize=Math.round(r),this.privNextBufferReadyBytes=0}writeStreamChunk(r){if(r.isEnd||this.privNextBufferReadyBytes===0&&r.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(r);return}let i=0;for(;i<r.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=r.timeReceived);const o=Math.min(r.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),s=new Uint8Array(r.buffer.slice(i,o+i));a.set(s,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=o,i+=o,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return Ii.ChunkedArrayBufferStream=t,Ii}var jR={};Object.defineProperty(jR,"__esModule",{value:!0});var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});Tl.Timeout=void 0;class Me{static load(){const t=new Map([[0,()=>{}]]),n=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),o=new Worker(i);return o.addEventListener("message",({data:c})=>{if(Me.isCallNotification(c)){const{params:{timerId:l}}=c,u=t.get(l);if(typeof u=="number"){const p=n.get(u);if(p===void 0||p!==l)throw new Error("The timer is in an undefined state.")}else if(typeof u<"u")u(),t.delete(l);else throw new Error("The timer is in an undefined state.")}else if(Me.isClearResponse(c)){const{id:l}=c,u=n.get(l);if(u===void 0)throw new Error("The timer is in an undefined state.");n.delete(l),t.delete(u)}else{const{error:{message:l}}=c;throw new Error(l)}}),{clearTimeout:c=>{const l=Math.random();n.set(l,c),t.set(c,l),o.postMessage({id:l,method:"clear",params:{timerId:c}})},setTimeout:(c,l)=>{const u=Math.random();return t.set(u,c),o.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:u}}),u}}}static loadWorkerTimers(){return()=>(Me.workerTimers!==null||(Me.workerTimers=Me.load()),Me.workerTimers)}static isCallNotification(t){return t.method!==void 0&&t.method==="call"}static isClearResponse(t){return t.error===null&&typeof t.id=="number"}}Tl.Timeout=Me;Me.workerTimers=null;Me.clearTimeout=e=>Me.timers().clearTimeout(e);Me.setTimeout=(e,t)=>Me.timers().setTimeout(e,t);Me.timers=Me.loadWorkerTimers();var K={};Object.defineProperty(K,"__esModule",{value:!0});K.OCSPCacheUpdateErrorEvent=K.OCSPResponseRetrievedEvent=K.OCSPCacheFetchErrorEvent=K.OCSPVerificationFailedEvent=K.OCSPCacheHitEvent=K.OCSPCacheEntryNeedsRefreshEvent=K.OCSPCacheEntryExpiredEvent=K.OCSPWSUpgradeStartedEvent=K.OCSPStapleReceivedEvent=K.OCSPCacheUpdateCompleteEvent=K.OCSPDiskCacheStoreEvent=K.OCSPMemoryCacheStoreEvent=K.OCSPCacheUpdateNeededEvent=K.OCSPDiskCacheHitEvent=K.OCSPCacheMissEvent=K.OCSPMemoryCacheHitEvent=K.OCSPEvent=void 0;const Ie=li;class _e extends Ie.PlatformEvent{constructor(t,n,r){super(t,n),this.privSignature=r}}K.OCSPEvent=_e;class bb extends _e{constructor(t){super("OCSPMemoryCacheHitEvent",Ie.EventType.Debug,t)}}K.OCSPMemoryCacheHitEvent=bb;class kb extends _e{constructor(t){super("OCSPCacheMissEvent",Ie.EventType.Debug,t)}}K.OCSPCacheMissEvent=kb;class xb extends _e{constructor(t){super("OCSPDiskCacheHitEvent",Ie.EventType.Debug,t)}}K.OCSPDiskCacheHitEvent=xb;class Ob extends _e{constructor(t){super("OCSPCacheUpdateNeededEvent",Ie.EventType.Debug,t)}}K.OCSPCacheUpdateNeededEvent=Ob;class Nb extends _e{constructor(t){super("OCSPMemoryCacheStoreEvent",Ie.EventType.Debug,t)}}K.OCSPMemoryCacheStoreEvent=Nb;class Mb extends _e{constructor(t){super("OCSPDiskCacheStoreEvent",Ie.EventType.Debug,t)}}K.OCSPDiskCacheStoreEvent=Mb;class Db extends _e{constructor(t){super("OCSPCacheUpdateCompleteEvent",Ie.EventType.Debug,t)}}K.OCSPCacheUpdateCompleteEvent=Db;class jb extends _e{constructor(){super("OCSPStapleReceivedEvent",Ie.EventType.Debug,"")}}K.OCSPStapleReceivedEvent=jb;class zb extends _e{constructor(t){super("OCSPWSUpgradeStartedEvent",Ie.EventType.Debug,t)}}K.OCSPWSUpgradeStartedEvent=zb;class Lb extends _e{constructor(t,n){super("OCSPCacheEntryExpiredEvent",Ie.EventType.Debug,t),this.privExpireTime=n}}K.OCSPCacheEntryExpiredEvent=Lb;class Bb extends _e{constructor(t,n,r){super("OCSPCacheEntryNeedsRefreshEvent",Ie.EventType.Debug,t),this.privExpireTime=r,this.privStartTime=n}}K.OCSPCacheEntryNeedsRefreshEvent=Bb;class Fb extends _e{constructor(t,n,r){super("OCSPCacheHitEvent",Ie.EventType.Debug,t),this.privExpireTime=r,this.privExpireTimeString=new Date(r).toLocaleDateString(),this.privStartTime=n,this.privStartTimeString=new Date(n).toLocaleTimeString()}}K.OCSPCacheHitEvent=Fb;class qb extends _e{constructor(t,n){super("OCSPVerificationFailedEvent",Ie.EventType.Debug,t),this.privError=n}}K.OCSPVerificationFailedEvent=qb;class Ub extends _e{constructor(t,n){super("OCSPCacheFetchErrorEvent",Ie.EventType.Debug,t),this.privError=n}}K.OCSPCacheFetchErrorEvent=Ub;class $b extends _e{constructor(t){super("OCSPResponseRetrievedEvent",Ie.EventType.Debug,t)}}K.OCSPResponseRetrievedEvent=$b;class Wb extends _e{constructor(t,n){super("OCSPCacheUpdateErrorEvent",Ie.EventType.Debug,t),this.privError=n}}K.OCSPCacheUpdateErrorEvent=Wb;var _i={},Qv;function Vb(){if(Qv)return _i;Qv=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.BackgroundEvent=void 0;const e=z();class t extends e.PlatformEvent{constructor(r){super("BackgroundEvent",e.EventType.Error),this.privError=r}get error(){return this.privError}}return _i.BackgroundEvent=t,_i}var Gv;function z(){return Gv||(Gv=1,function(e){var t=W&&W.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a),Object.defineProperty(i,s,{enumerable:!0,get:function(){return o[a]}})}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),n=W&&W.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,n(oe,e),n(ae,e),n(kh,e),n(yl,e),n(Sl,e),n(fr,e),n(Ee,e),n(Cl,e),n(aa,e),n(ft,e),n(IR,e),n(_R,e),n(AR,e),n(bR,e),n(kR,e),n(xR,e),n(OR,e),n(NR,e),n(MR,e),n(DR,e),n(ca,e),n(li,e),n(xh,e),n(la,e),n(Rl,e),n(Pl,e),n(wl,e);var r=El;Object.defineProperty(e,"TranslationStatus",{enumerable:!0,get:function(){return r.TranslationStatus}}),n(Ab(),e),n(jR,e),n(Tl,e),n(K,e),n(Vb(),e)}(Zu)),Zu}var ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.HeaderNames=void 0;class Et{}ye.HeaderNames=Et;Et.AuthKey="Ocp-Apim-Subscription-Key";Et.Authorization="Authorization";Et.SpIDAuthKey="Apim-Subscription-Id";Et.ConnectionId="X-ConnectionId";Et.ContentType="Content-Type";Et.CustomCommandsAppId="X-CommandsAppId";Et.Path="Path";Et.RequestId="X-RequestId";Et.RequestStreamId="X-StreamId";Et.RequestTimestamp="X-Timestamp";var pi={};Object.defineProperty(pi,"__esModule",{value:!0});pi.AuthInfo=void 0;class Hb{constructor(t,n){this.privHeaderName=t,this.privToken=n}get headerName(){return this.privHeaderName}get token(){return this.privToken}}pi.AuthInfo=Hb;Object.defineProperty(sl,"__esModule",{value:!0});sl.CognitiveSubscriptionKeyAuthentication=void 0;const Kb=z(),Jb=ye,Qb=pi;class Gb{constructor(t){if(!t)throw new Kb.ArgumentNullError("subscriptionKey");this.privAuthInfo=new Qb.AuthInfo(Jb.HeaderNames.AuthKey,t)}fetch(t){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(t){return Promise.resolve(this.privAuthInfo)}}sl.CognitiveSubscriptionKeyAuthentication=Gb;var Il={};Object.defineProperty(Il,"__esModule",{value:!0});Il.CognitiveTokenAuthentication=void 0;const Xv=z(),Yv=pi,Zv=ye;class Ho{constructor(t,n){if(!t)throw new Xv.ArgumentNullError("fetchCallback");if(!n)throw new Xv.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=t,this.privFetchOnExpiryCallback=n}fetch(t){return this.privFetchCallback(t).then(n=>new Yv.AuthInfo(Zv.HeaderNames.Authorization,n===void 0?void 0:Ho.privTokenPrefix+n))}fetchOnExpiry(t){return this.privFetchOnExpiryCallback(t).then(n=>new Yv.AuthInfo(Zv.HeaderNames.Authorization,n===void 0?void 0:Ho.privTokenPrefix+n))}}Il.CognitiveTokenAuthentication=Ho;Ho.privTokenPrefix="Bearer ";var zR={};Object.defineProperty(zR,"__esModule",{value:!0});var LR={};Object.defineProperty(LR,"__esModule",{value:!0});var Ai={},op={},_l={};const Xb={},Yb=Object.freeze(Object.defineProperty({__proto__:null,default:Xb},Symbol.toStringTag,{value:"Module"})),Cr=K0(Yb);var Oh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0;const t=z();Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return t.EventType}})})(Oh);var B={};Object.defineProperty(B,"__esModule",{value:!0});B.Contracts=void 0;class qt{static throwIfNullOrUndefined(t,n){if(t==null)throw new Error("throwIfNullOrUndefined:"+n)}static throwIfNull(t,n){if(t===null)throw new Error("throwIfNull:"+n)}static throwIfNullOrWhitespace(t,n){if(qt.throwIfNullOrUndefined(t,n),(""+t).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+n)}static throwIfNullOrTooLong(t,n,r){if(qt.throwIfNullOrUndefined(t,n),(""+t).length>r)throw new Error("throwIfNullOrTooLong:"+n+" (more than "+r.toString()+" characters)")}static throwIfNullOrTooShort(t,n,r){if(qt.throwIfNullOrUndefined(t,n),(""+t).length<r)throw new Error("throwIfNullOrTooShort:"+n+" (less than "+r.toString()+" characters)")}static throwIfDisposed(t){if(t)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(t,n){if(qt.throwIfNullOrUndefined(t,n),t.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+n);for(const r of t)qt.throwIfNullOrWhitespace(r,n)}static throwIfFileDoesNotExist(t,n){qt.throwIfNullOrWhitespace(t,n)}static throwIfNotUndefined(t,n){if(t!==void 0)throw new Error("throwIfNotUndefined:"+n)}static throwIfNumberOutOfRange(t,n,r,i){if(qt.throwIfNullOrUndefined(t,n),t<r||t>i)throw new Error("throwIfNumberOutOfRange:"+n+" (must be between "+r.toString()+" and "+i.toString()+")")}}B.Contracts=qt;var Zb=W&&W.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),ek=W&&W.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),tk=W&&W.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Zb(t,e,n);return ek(t,e),t};Object.defineProperty(_l,"__esModule",{value:!0});_l.ConsoleLoggingListener=void 0;const eg=tk(Cr),bi=Oh,nk=B;class rk{constructor(t=bi.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=t}set logPath(t){nk.Contracts.throwIfNullOrUndefined(eg.openSync,`
File System access not available`),this.privLogPath=t}set enableConsoleOutput(t){this.privEnableConsoleOutput=t}onEvent(t){if(t.eventType>=this.privLogLevelFilter){const n=this.toString(t);if(this.logCallback&&this.logCallback(n),this.privLogPath&&eg.writeFileSync(this.privLogPath,n+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(t.eventType){case bi.LogLevel.Debug:console.debug(n);break;case bi.LogLevel.Info:console.info(n);break;case bi.LogLevel.Warning:console.warn(n);break;case bi.LogLevel.Error:console.error(n);break;default:console.log(n);break}}}toString(t){const n=[`${t.eventTime}`,`${t.name}`],r=t;for(const i in r)if(i&&t.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){const o=r[i];let a="<NULL>";o!=null&&(typeof o=="number"||typeof o=="string"?a=o.toString():a=JSON.stringify(o)),n.push(`${i}: ${a}`)}return n.join(" | ")}}_l.ConsoleLoggingListener=rk;var BR={};Object.defineProperty(BR,"__esModule",{value:!0});var ap={},Mn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AudioStreamFormatImpl=e.AudioStreamFormat=e.AudioFormatTag=void 0;var t;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS",i[i.AMR_WB=11]="AMR_WB",i[i.G722=12]="G722"})(t=e.AudioFormatTag||(e.AudioFormatTag={}));class n{static getDefaultInputFormat(){return r.getDefaultInputFormat()}static getWaveFormat(o,a,s,c){return new r(o,a,s,c)}static getWaveFormatPCM(o,a,s){return new r(o,a,s)}}e.AudioStreamFormat=n;class r extends n{constructor(o=16e3,a=16,s=1,c=t.PCM){super();let l=!0;switch(c){case t.PCM:this.formatTag=1;break;case t.ALaw:this.formatTag=6;break;case t.MuLaw:this.formatTag=7;break;default:l=!1}if(this.bitsPerSample=a,this.samplesPerSec=o,this.channels=s,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),l){this.privHeader=new ArrayBuffer(44);const u=new DataView(this.privHeader);this.setString(u,0,"RIFF"),u.setUint32(4,0,!0),this.setString(u,8,"WAVEfmt "),u.setUint32(16,16,!0),u.setUint16(20,this.formatTag,!0),u.setUint16(22,this.channels,!0),u.setUint32(24,this.samplesPerSec,!0),u.setUint32(28,this.avgBytesPerSec,!0),u.setUint16(32,this.channels*(this.bitsPerSample/8),!0),u.setUint16(34,this.bitsPerSample,!0),this.setString(u,36,"data"),u.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new r}static getAudioContext(o){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return o!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:o}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(o,a,s){for(let c=0;c<s.length;c++)o.setUint8(a+c,s.charCodeAt(c))}}e.AudioStreamFormatImpl=r})(Mn);var tg;function ik(){return tg||(tg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MicAudioSource=e.AudioWorkletSourceURLPropertyName=void 0;const t=M(),n=z(),r=Mn;e.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(a,s,c,l){this.privRecorder=a,this.deviceId=s,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||(0,n.createNoDashGuid)(),this.privEvents=new n.EventSource,this.privMediaStream=l||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new n.Deferred;try{this.createAudioContext()}catch(c){if(c instanceof Error){const l=c;this.privInitializeDeferral.reject(l.name+": "+l.message)}else this.privInitializeDeferral.reject(c);return this.privInitializeDeferral.promise}const a=window.navigator;let s=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(s=(c,l,u)=>{a.mediaDevices.getUserMedia(c).then(l).catch(u)}),s){const c=()=>{this.onEvent(new n.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new n.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):s({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},l=>{this.privMediaStream=l,this.onEvent(new n.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},l=>{const u=`Error occurred during microphone initialization: ${l}`;this.privInitializeDeferral.reject(u),this.onEvent(new n.AudioSourceErrorEvent(this.privId,u))})};this.privContext.state==="suspended"?this.privContext.resume().then(c).catch(l=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${l}`)}):c()}else{const c="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(c),this.onEvent(new n.AudioSourceErrorEvent(c,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new n.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(s=>(this.onEvent(new n.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(s.readEnded(),delete this.privStreams[a],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>s.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const s=this.privStreams[a];s&&s.close()}this.onEvent(new n.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:i.AUDIOFORMAT.samplesPerSec,type:t.type.Microphones}))}setProperty(a,s){if(a===e.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(s);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const s=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(s===void 0)return Promise.resolve(this.privMicrophoneLabel);const c=new n.Deferred;return navigator.mediaDevices.enumerateDevices().then(l=>{for(const u of l)if(u.deviceId===s){this.privMicrophoneLabel=u.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}async listen(a){await this.turnOn();const s=new n.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=s;try{this.privRecorder.record(this.privContext,this.privMediaStream,s)}catch(l){throw this.onEvent(new n.AudioStreamNodeErrorEvent(this.privId,a,l)),l}return s}onEvent(a){this.privEvents.onEvent(a),n.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=r.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}e.MicAudioSource=i,i.AUDIOFORMAT=r.AudioStreamFormat.getDefaultInputFormat()}(ap)),ap}var ki={},ng;function sk(){if(ng)return ki;ng=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.FileAudioSource=void 0;const e=M(),t=z(),n=Mn;let r=class{constructor(o,a,s){this.privStreams={},this.privHeaderEnd=44,this.privId=s||(0,t.createNoDashGuid)(),this.privEvents=new t.EventSource,this.privSource=o,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=o.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const o=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new t.AudioSourceErrorEvent(o,"")),Promise.reject(o)}this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(o){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,o));const a=await this.upload(o);return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,o)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[o],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,o)),await this.turnOff()},id:()=>o,read:()=>a.read()})}detach(o){o&&this.privStreams[o]&&(this.privStreams[o].close(),delete this.privStreams[o],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,o)))}turnOff(){for(const o in this.privStreams)if(o){const a=this.privStreams[o];a&&!a.isClosed&&a.close()}return this.onEvent(new t.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(o=>Promise.resolve({bitspersample:o.bitsPerSample,channelcount:o.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:o.samplesPerSec,type:e.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),s=new t.Deferred,c=l=>{const u=new DataView(l),p=f=>String.fromCharCode(u.getUint8(f),u.getUint8(f+1),u.getUint8(f+2),u.getUint8(f+3));if(p(0)!=="RIFF"){s.reject("Invalid WAV header in file, RIFF was not found");return}if(p(8)!=="WAVE"||p(12)!=="fmt "){s.reject("Invalid WAV header in file, WAVEfmt was not found");return}const d=u.getInt32(16,!0),h=u.getUint16(22,!0),v=u.getUint32(24,!0),S=u.getUint16(34,!0);let C=36+Math.max(d-16,0);for(;p(C)!=="data";C+=2)if(C>4296-8){s.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=C+8,s.resolve(n.AudioStreamFormat.getWaveFormatPCM(v,S,h))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const l=new FileReader;l.onload=u=>{const p=u.target.result;c(p)},l.readAsArrayBuffer(a)}else{const l=a;c(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength))}return s.promise}async upload(o){const a=s=>{const c=`Error occurred while processing '${this.privFilename}'. ${s}`;throw this.onEvent(new t.AudioStreamNodeErrorEvent(this.privId,o,c)),new Error(c)};try{await this.turnOn();const s=await this.privAudioFormatPromise,c=new t.ChunkedArrayBufferStream(s.avgBytesPerSec/10,o);this.privStreams[o]=c;const l=this.privSource.slice(this.privHeaderEnd),u=p=>{c.isClosed||(c.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()}),c.close())};if(typeof window<"u"&&typeof Blob<"u"&&l instanceof Blob){const p=new FileReader;p.onerror=d=>a(d.toString()),p.onload=d=>{const h=d.target.result;u(h)},p.readAsArrayBuffer(l)}else{const p=l;u(p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength))}return c}catch(s){a(s)}}onEvent(o){this.privEvents.onEvent(o),t.Events.instance.onEvent(o)}};return ki.FileAudioSource=r,ki}var Al={};Object.defineProperty(Al,"__esModule",{value:!0});Al.PcmRecorder=void 0;const ok=z();class ak{constructor(t){this.privStopInputOnRelease=t}record(t,n,r){const o=new ok.RiffPcmEncoder(t.sampleRate,16e3),a=t.createMediaStreamSource(n),s=()=>{const l=(()=>{let u=0;try{return t.createScriptProcessor(u,1,1)}catch{u=2048;let d=t.sampleRate;for(;u<16384&&d>=32e3;)u<<=1,d>>=1;return t.createScriptProcessor(u,1,1)}})();l.onaudioprocess=u=>{const p=u.inputBuffer.getChannelData(0);if(r&&!r.isClosed){const d=o.encode(p);d&&r.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(l),l.connect(t.destination),this.privMediaResources={scriptProcessorNode:l,source:a,stream:n}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(t.audioWorklet&&!c){if(!this.privSpeechProcessorScript){const l=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,u=new Blob([l],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(u)}t.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const l=new AudioWorkletNode(t,"speech-processor");l.port.onmessage=u=>{const p=u.data;if(r&&!r.isClosed){const d=o.encode(p);d&&r.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(l),l.connect(t.destination),this.privMediaResources={scriptProcessorNode:l,source:a,stream:n}}).catch(()=>{s()})}else try{s()}catch(l){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${l}`)}}releaseMediaResources(t){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(t.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(n=>n.stop()),this.privMediaResources.source=null))}setWorkletUrl(t){this.privSpeechProcessorScript=t}}Al.PcmRecorder=ak;var bl={},ua={},ck=W&&W.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),lk=W&&W.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),FR=W&&W.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&ck(t,e,n);return lk(t,e),t},Nh=W&&W.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ua,"__esModule",{value:!0});ua.WebsocketMessageAdapter=void 0;const uk=FR(Cr),pk=FR(Cr),dk=Nh(Cr),hk=Nh(Cr),fk=Nh(Cr),vk=ye,F=z();class Ko{constructor(t,n,r,i,o,a){if(!t)throw new F.ArgumentNullError("uri");if(!r)throw new F.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new F.EventSource,this.privConnectionId=n,this.privMessageFormatter=r,this.privConnectionState=F.ConnectionState.None,this.privUri=t,this.privHeaders=o,this.privEnableCompression=a,this.privHeaders[vk.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===F.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new F.Deferred,this.privCertificateValidatedDeferral=new F.Deferred,this.privConnectionState=F.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!Ko.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let n=new URL(this.privUri).protocol;(n==null?void 0:n.toLocaleLowerCase())==="wss:"?n="https:":(n==null?void 0:n.toLocaleLowerCase())==="ws:"&&(n="http:");const r={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:n.toLocaleLowerCase()==="https:"};this.privCertificateValidatedDeferral.resolve(),r.agent=this.getAgent(),r.agent.protocol=n,this.privWebsocketClient=new fk.default(this.privUri,r),this.privWebsocketClient.on("redirect",i=>{const o=new F.ConnectionRedirectEvent(this.privConnectionId,i,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${i}'`);F.Events.instance.onEvent(o)})}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new F.Queue,this.privDisconnectDeferral=new F.Deferred,this.privSendMessageQueue=new F.Queue,this.processSendQueue().catch(t=>{F.Events.instance.onEvent(new F.BackgroundEvent(t))})}catch(t){return this.privConnectionEstablishDeferral.resolve(new F.ConnectionOpenResponse(500,t)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new F.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=F.ConnectionState.Connected,this.onEvent(new F.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new F.ConnectionOpenResponse(200,""))},t=>{this.privConnectionEstablishDeferral.reject(t)})},this.privWebsocketClient.onerror=t=>{this.onEvent(new F.ConnectionErrorEvent(this.privConnectionId,t.message,t.type)),this.privLastErrorReceived=t.message},this.privWebsocketClient.onclose=t=>{this.privConnectionState===F.ConnectionState.Connecting?(this.privConnectionState=F.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new F.ConnectionOpenResponse(t.code,t.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=F.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new F.ConnectionClosedEvent(this.privConnectionId,t.code,t.reason))),this.onClose(t.code,t.reason).catch(n=>{F.Events.instance.onEvent(new F.BackgroundEvent(n))})},this.privWebsocketClient.onmessage=t=>{const n=new Date().toISOString();if(this.privConnectionState===F.ConnectionState.Connected){const r=new F.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(r.promise),t.data instanceof ArrayBuffer){const i=new F.RawWebsocketMessage(F.MessageType.Binary,t.data);this.privMessageFormatter.toConnectionMessage(i).then(o=>{this.onEvent(new F.ConnectionMessageReceivedEvent(this.privConnectionId,n,o)),r.resolve(o)},o=>{r.reject(`Invalid binary message format. Error: ${o}`)})}else{const i=new F.RawWebsocketMessage(F.MessageType.Text,t.data);this.privMessageFormatter.toConnectionMessage(i).then(o=>{this.onEvent(new F.ConnectionMessageReceivedEvent(this.privConnectionId,n,o)),r.resolve(o)},o=>{r.reject(`Invalid text message format. Error: ${o}`)})}}},this.privConnectionEstablishDeferral.promise}send(t){if(this.privConnectionState!==F.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${F.ConnectionState[this.privConnectionState]} state`);const n=new F.Deferred,r=new F.Deferred;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(t).then(i=>{r.resolve({Message:t,RawWebsocketMessage:i,sendStatusDeferral:n})},i=>{r.reject(`Error formatting the message. ${i}`)}),n.promise}read(){return this.privConnectionState!==F.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(t){if(this.privWebsocketClient)this.privConnectionState!==F.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,t||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(t){try{if(!t)return Promise.resolve();if(this.onEvent(new F.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),t.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(t.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+t.Message.id+" "+new Error().stack);return Promise.resolve()}catch(n){return Promise.reject(`websocket send error: ${n}`)}}async onClose(t,n){const r=`Connection closed. ${t}: ${n}`;this.privConnectionState=F.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},r),await this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(r)},r)}async processSendQueue(){for(;;){const n=await this.privSendMessageQueue.dequeue();if(!n)return;try{await this.sendRawMessage(n),n.sendStatusDeferral.resolve()}catch(r){n.sendStatusDeferral.reject(r)}}}onEvent(t){this.privConnectionEvents.onEvent(t),F.Events.instance.onEvent(t)}getAgent(){const t=new dk.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(t.proxyInfo=this.proxyInfo),t}static GetProxyAgent(t){const n={host:t.HostName,port:t.Port};return t.UserName?n.headers={"Proxy-Authentication":"Basic "+Buffer.from(`${t.UserName}:${t.Password===void 0?"":t.Password}`).toString("base64")}:n.headers={},n.headers.requestOCSP="true",new hk.default(n)}createConnection(t,n){let r;if(n={...n,requestOCSP:!0,servername:n.host},this.proxyInfo){const o=Ko.GetProxyAgent(this.proxyInfo);r=new Promise((a,s)=>{o.callback(t,n,(c,l)=>{c?s(c):a(l)})})}else n.secureEndpoint?r=Promise.resolve(pk.connect(n)):r=Promise.resolve(uk.connect(n));return r}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}ua.WebsocketMessageAdapter=Ko;Ko.forceNpmWebSocket=!1;Object.defineProperty(bl,"__esModule",{value:!0});bl.WebsocketConnection=void 0;const cp=z(),gk=ua;class mk{constructor(t,n,r,i,o,a=!1,s){if(this.privIsDisposed=!1,!t)throw new cp.ArgumentNullError("uri");if(!i)throw new cp.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let c="",l=0;if(n){for(const u in n)if(u){c+=l===0&&t.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(u);c+=p;let d=n[u];d&&(d=encodeURIComponent(d),c+=`=${d}`),l++}}if(r){for(const u in r)if(u){c+=l===0&&t.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(r[u]);c+=`${u}=${p}`,l++}}this.privUri=t+c,this.privId=s||(0,cp.createNoDashGuid)(),this.privConnectionMessageAdapter=new gk.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,o,r,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(t){return this.privConnectionMessageAdapter.send(t)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}bl.WebsocketConnection=mk;var kl={};Object.defineProperty(kl,"__esModule",{value:!0});kl.ReplayableAudioNode=void 0;class yk{constructor(t,n){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=t,this.privBytesPerSecond=n}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const t=this.privReplayOffset-this.privBufferStartOffset;let n=Math.round(t*this.privBytesPerSecond*1e-7);n%2!==0&&n++;let r=0;for(;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){const i=this.privBuffers[r].chunk.buffer.slice(n);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then(t=>(t&&t.buffer&&this.privBuffers&&(this.privBuffers.push(new Sk(t,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=t.buffer.byteLength),t))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(t){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=t;const n=t-this.privBufferStartOffset;let r=Math.round(n*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&r>=this.privBuffers[i].chunk.buffer.byteLength;)r-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(t-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(t){if(t<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const n of this.privBuffers){const r=n.byteOffset/this.privBytesPerSecond*1e7,i=r+n.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(t>=r&&t<=i)return n.chunk.timeReceived}return 0}}kl.ReplayableAudioNode=yk;class Sk{constructor(t,n,r){this.chunk=t,this.serial=n,this.byteOffset=r}}var xi={},lp={},jt={},pa={},Ck=W&&W.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Rk=W&&W.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Pk=W&&W.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Ck(t,e,n);return Rk(t,e),t};Object.defineProperty(pa,"__esModule",{value:!0});pa.AudioFileWriter=void 0;const Oi=Pk(Cr),up=B;class wk{constructor(t){up.Contracts.throwIfNullOrUndefined(Oi.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=Oi.openSync(t,"w")}set format(t){up.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=t;let n=0;this.privAudioFormat.hasHeader&&(n=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=Oi.createWriteStream("",{fd:this.privFd,start:n,autoClose:!1}))}write(t){up.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(t.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),Oi.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),Oi.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}pa.AudioFileWriter=wk;var Ze={},rg;function qR(){if(rg)return Ze;rg=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.PullAudioInputStreamImpl=Ze.PullAudioInputStream=Ze.PushAudioInputStreamImpl=Ze.PushAudioInputStream=Ze.AudioInputStream=void 0;const e=M(),t=z(),n=ft,r=b(),i=Mn;let o=class{constructor(){}static createPushStream(p){return a.create(p)}static createPullStream(p,d){return c.create(p,d)}};Ze.AudioInputStream=o;class a extends o{static create(p){return new s(p)}}Ze.PushAudioInputStream=a;class s extends a{constructor(p){super(),p===void 0?this.privFormat=i.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=p,this.privEvents=new t.EventSource,this.privId=(0,n.createNoDashGuid)(),this.privStream=new t.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(p){this.privStream.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(p){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn();const d=this.privStream;return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:async()=>(this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>d.read()}}detach(p){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(p){this.privEvents.onEvent(p),t.Events.instance.onEvent(p)}toBuffer(p){const d=Buffer.alloc(p.byteLength),h=new Uint8Array(p);for(let v=0;v<d.length;++v)d[v]=h[v];return d}}Ze.PushAudioInputStreamImpl=s;class c extends o{constructor(){super()}static create(p,d){return new l(p,d)}}Ze.PullAudioInputStream=c;class l extends c{constructor(p,d){super(),d===void 0?this.privFormat=r.AudioStreamFormat.getDefaultInputFormat():this.privFormat=d,this.privEvents=new t.EventSource,this.privId=(0,n.createNoDashGuid)(),this.privCallback=p,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(p){return this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn(),this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:()=>(this.privCallback.close(),this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>{let d=0,h;for(;d<this.privBufferSize;){const v=new ArrayBuffer(this.privBufferSize-d),S=this.privCallback.read(v);if(h===void 0?h=v:new Int8Array(h).set(new Int8Array(v),d),S===0)break;d+=S}return Promise.resolve({buffer:h.slice(0,d),isEnd:this.privIsClosed||d===0,timeReceived:Date.now()})}}}detach(p){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(p){this.privEvents.onEvent(p),t.Events.instance.onEvent(p)}}return Ze.PullAudioInputStreamImpl=l,Ze}var Pe={},Dn={},Mh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisOutputFormat=void 0,function(t){t[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",t[t.AmrWb16000Hz=37]="AmrWb16000Hz",t[t.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(e.SpeechSynthesisOutputFormat||(e.SpeechSynthesisOutputFormat={}))})(Mh);Object.defineProperty(Dn,"__esModule",{value:!0});Dn.AudioOutputFormatImpl=void 0;const $=Mh,q=Mn;class L extends q.AudioStreamFormatImpl{constructor(t,n,r,i,o,a,s,c,l){super(r,a,n,t),this.formatTag=t,this.avgBytesPerSec=i,this.blockAlign=o,this.priAudioFormatString=s,this.priRequestAudioFormatString=c,this.priHasHeader=l}static fromSpeechSynthesisOutputFormat(t){return t===void 0?L.getDefaultOutputFormat():L.fromSpeechSynthesisOutputFormatString(L.SpeechSynthesisOutputFormatToString[t])}static fromSpeechSynthesisOutputFormatString(t){switch(t){case"raw-8khz-8bit-mono-mulaw":return new L(q.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,t,t,!1);case"riff-16khz-16kbps-mono-siren":return new L(q.AudioFormatTag.Siren,1,16e3,2e3,40,0,t,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new L(q.AudioFormatTag.Siren,1,16e3,2e3,40,0,t,t,!1);case"audio-16khz-32kbitrate-mono-mp3":return new L(q.AudioFormatTag.MP3,1,16e3,4096,2,16,t,t,!1);case"audio-16khz-128kbitrate-mono-mp3":return new L(q.AudioFormatTag.MP3,1,16e3,16384,2,16,t,t,!1);case"audio-16khz-64kbitrate-mono-mp3":return new L(q.AudioFormatTag.MP3,1,16e3,8192,2,16,t,t,!1);case"audio-24khz-48kbitrate-mono-mp3":return new L(q.AudioFormatTag.MP3,1,24e3,6144,2,16,t,t,!1);case"audio-24khz-96kbitrate-mono-mp3":return new L(q.AudioFormatTag.MP3,1,24e3,12288,2,16,t,t,!1);case"audio-24khz-160kbitrate-mono-mp3":return new L(q.AudioFormatTag.MP3,1,24e3,20480,2,16,t,t,!1);case"raw-16khz-16bit-mono-truesilk":return new L(q.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,t,t,!1);case"riff-8khz-16bit-mono-pcm":return new L(q.AudioFormatTag.PCM,1,8e3,16e3,2,16,t,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new L(q.AudioFormatTag.PCM,1,24e3,48e3,2,16,t,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new L(q.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,t,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new L(q.AudioFormatTag.PCM,1,16e3,32e3,2,16,t,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new L(q.AudioFormatTag.PCM,1,24e3,48e3,2,16,t,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new L(q.AudioFormatTag.PCM,1,8e3,16e3,2,16,t,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new L(q.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,t,t,!1);case"ogg-24khz-16bit-mono-opus":return new L(q.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,t,t,!1);case"raw-48khz-16bit-mono-pcm":return new L(q.AudioFormatTag.PCM,1,48e3,96e3,2,16,t,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new L(q.AudioFormatTag.PCM,1,48e3,96e3,2,16,t,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new L(q.AudioFormatTag.MP3,1,48e3,12288,2,16,t,t,!1);case"audio-48khz-192kbitrate-mono-mp3":return new L(q.AudioFormatTag.MP3,1,48e3,24576,2,16,t,t,!1);case"ogg-48khz-16bit-mono-opus":return new L(q.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,t,t,!1);case"webm-16khz-16bit-mono-opus":return new L(q.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,t,t,!1);case"webm-24khz-16bit-mono-opus":return new L(q.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,t,t,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new L(q.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,t,t,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new L(q.AudioFormatTag.OPUS,1,16e3,4e3,2,16,t,t,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new L(q.AudioFormatTag.OPUS,1,24e3,6e3,2,16,t,t,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new L(q.AudioFormatTag.OPUS,1,24e3,3e3,2,16,t,t,!1);case"audio-24khz-16bit-mono-flac":return new L(q.AudioFormatTag.FLAC,1,24e3,24e3,2,16,t,t,!1);case"audio-48khz-16bit-mono-flac":return new L(q.AudioFormatTag.FLAC,1,48e3,3e4,2,16,t,t,!1);case"raw-24khz-16bit-mono-truesilk":return new L(q.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,t,t,!1);case"raw-8khz-8bit-mono-alaw":return new L(q.AudioFormatTag.ALaw,1,8e3,8e3,1,8,t,t,!1);case"riff-8khz-8bit-mono-alaw":return new L(q.AudioFormatTag.ALaw,1,8e3,8e3,1,8,t,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new L(q.AudioFormatTag.PCM,1,22050,44100,2,16,t,t,!1);case"riff-22050hz-16bit-mono-pcm":return new L(q.AudioFormatTag.PCM,1,22050,44100,2,16,t,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new L(q.AudioFormatTag.PCM,1,44100,88200,2,16,t,t,!1);case"riff-44100hz-16bit-mono-pcm":return new L(q.AudioFormatTag.PCM,1,44100,88200,2,16,t,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new L(q.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,t,t,!1);case"g722-16khz-64kbps":return new L(q.AudioFormatTag.G722,1,16e3,8e3,2,16,t,t,!1);case"riff-16khz-16bit-mono-pcm":default:return new L(q.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return L.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(t){if(this.priHasHeader){const n=new DataView(this.privHeader);n.setUint32(4,t+this.privHeader.byteLength-8,!0),n.setUint32(40,t,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(t){if(!this.hasHeader)return t;this.updateHeader(t.byteLength);const n=new Uint8Array(t.byteLength+this.header.byteLength);return n.set(new Uint8Array(this.header),0),n.set(new Uint8Array(t),this.header.byteLength),n.buffer}}Dn.AudioOutputFormatImpl=L;L.SpeechSynthesisOutputFormatToString={[$.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[$.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[$.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[$.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[$.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[$.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[$.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[$.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[$.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[$.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[$.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[$.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[$.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[$.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[$.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[$.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[$.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[$.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[$.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[$.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[$.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[$.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[$.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[$.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[$.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[$.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[$.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[$.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[$.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[$.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[$.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[$.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[$.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[$.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[$.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[$.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[$.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[$.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[$.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.PushAudioOutputStreamImpl=Pe.PushAudioOutputStream=Pe.PullAudioOutputStreamImpl=Pe.PullAudioOutputStream=Pe.AudioOutputStream=void 0;const Pd=z(),Ek=B,Tk=Dn;class Dh{constructor(){}static createPullStream(){return jh.create()}}Pe.AudioOutputStream=Dh;class jh extends Dh{static create(){return new UR}}Pe.PullAudioOutputStream=jh;class UR extends jh{constructor(){super(),this.privId=(0,Pd.createNoDashGuid)(),this.privStream=new Pd.Stream}set format(t){t==null&&(this.privFormat=Tk.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=t}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(t){const n=new Int8Array(t);let r=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>t.byteLength)return n.set(this.privLastChunkView.slice(0,t.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(t.byteLength),Promise.resolve(t.byteLength);n.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;r<t.byteLength&&!this.privStream.isReadEnded;){const i=await this.privStream.read();if(i!==void 0&&!i.isEnd){let o;i.buffer.byteLength>t.byteLength-r?(o=i.buffer.slice(0,t.byteLength-r),this.privLastChunkView=new Int8Array(i.buffer.slice(t.byteLength-r))):o=i.buffer,n.set(new Int8Array(o),r),r+=o.byteLength}else this.privStream.readEnded()}return r}write(t){Ek.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:t,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}Pe.PullAudioOutputStreamImpl=UR;class $R extends Dh{constructor(){super()}static create(t){return new WR(t)}}Pe.PushAudioOutputStream=$R;class WR extends $R{constructor(t){super(),this.privId=(0,Pd.createNoDashGuid)(),this.privCallback=t}set format(t){}write(t){this.privCallback.write&&this.privCallback.write(t)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}Pe.PushAudioOutputStreamImpl=WR;var ig;function HR(){if(ig)return jt;ig=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.AudioOutputConfigImpl=jt.AudioConfigImpl=jt.AudioConfig=void 0;const e=Se(),t=B,n=b(),r=pa,i=qR(),o=Pe;let a=class VR{static fromDefaultMicrophoneInput(){const u=new e.PcmRecorder(!0);return new s(new e.MicAudioSource(u))}static fromMicrophoneInput(u){const p=new e.PcmRecorder(!0);return new s(new e.MicAudioSource(p,u))}static fromWavFileInput(u,p="unnamedBuffer.wav"){return new s(new e.FileAudioSource(u,p))}static fromStreamInput(u){if(u instanceof n.PullAudioInputStreamCallback)return new s(new i.PullAudioInputStreamImpl(u));if(u instanceof n.AudioInputStream)return new s(u);if(typeof MediaStream<"u"&&u instanceof MediaStream){const p=new e.PcmRecorder(!1);return new s(new e.MicAudioSource(p,null,null,u))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new c(new n.SpeakerAudioDestination)}static fromSpeakerOutput(u){if(u===void 0)return VR.fromDefaultSpeakerOutput();if(u instanceof n.SpeakerAudioDestination)return new c(u);throw new Error("Not Supported Type")}static fromAudioFileOutput(u){return new c(new r.AudioFileWriter(u))}static fromStreamOutput(u){if(u instanceof n.PushAudioOutputStreamCallback)return new c(new o.PushAudioOutputStreamImpl(u));if(u instanceof n.PushAudioOutputStream)return new c(u);if(u instanceof n.PullAudioOutputStream)return new c(u);throw new Error("Not Supported Type")}};jt.AudioConfig=a;class s extends a{constructor(u){super(),this.privSource=u}get format(){return this.privSource.format}close(u,p){this.privSource.turnOff().then(()=>{u&&u()},d=>{p&&p(d)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(u){return this.privSource.attach(u)}detach(u){return this.privSource.detach(u)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(u,p){if(t.Contracts.throwIfNull(p,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(u,p);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(u,p){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(u,p);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}jt.AudioConfigImpl=s;class c extends a{constructor(u){super(),this.privDestination=u}set format(u){this.privDestination.format=u}write(u){this.privDestination.write(u)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return jt.AudioOutputConfigImpl=c,jt}var KR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationReason=void 0,function(t){t[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"}(e.CancellationReason||(e.CancellationReason={}))})(KR);var xl={};Object.defineProperty(xl,"__esModule",{value:!0});xl.PullAudioInputStreamCallback=void 0;class Ik{}xl.PullAudioInputStreamCallback=Ik;var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.PushAudioOutputStreamCallback=void 0;class _k{}Ol.PushAudioOutputStreamCallback=_k;var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.KeywordRecognitionModel=void 0;const sg=B;class Ak{constructor(){this.privDisposed=!1}static fromFile(t){throw sg.Contracts.throwIfFileDoesNotExist(t,"fileName"),new Error("Not yet implemented.")}static fromStream(t){throw sg.Contracts.throwIfNull(t,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}Nl.KeywordRecognitionModel=Ak;var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0});Ml.SessionEventArgs=void 0;class bk{constructor(t){this.privSessionId=t}get sessionId(){return this.privSessionId}}Ml.SessionEventArgs=bk;var Ni={},og;function kk(){if(og)return Ni;og=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.RecognitionEventArgs=void 0;const e=b();let t=class extends e.SessionEventArgs{constructor(r,i){super(i),this.privOffset=r}get offset(){return this.privOffset}};return Ni.RecognitionEventArgs=t,Ni}var JR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OutputFormat=void 0,function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"}(e.OutputFormat||(e.OutputFormat={}))})(JR);var Mi={},ag;function xk(){if(ag)return Mi;ag=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.IntentRecognitionEventArgs=void 0;const e=b();let t=class extends e.RecognitionEventArgs{constructor(r,i,o){super(i,o),this.privResult=r}get result(){return this.privResult}};return Mi.IntentRecognitionEventArgs=t,Mi}var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.RecognitionResult=void 0;class Ok{constructor(t,n,r,i,o,a,s,c,l,u){this.privResultId=t,this.privReason=n,this.privText=r,this.privDuration=i,this.privOffset=o,this.privLanguage=a,this.privLanguageDetectionConfidence=s,this.privErrorDetails=c,this.privJson=l,this.privProperties=u}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}Dl.RecognitionResult=Ok;var Di={},cg;function Nk(){if(cg)return Di;cg=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.SpeechRecognitionResult=void 0;const e=b();let t=class extends e.RecognitionResult{constructor(r,i,o,a,s,c,l,u,p,d,h){super(r,i,o,a,s,c,l,p,d,h),this.privSpeakerId=u}get speakerId(){return this.privSpeakerId}};return Di.SpeechRecognitionResult=t,Di}var ji={},lg;function Mk(){if(lg)return ji;lg=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.IntentRecognitionResult=void 0;const e=b();let t=class extends e.SpeechRecognitionResult{constructor(r,i,o,a,s,c,l,u,p,d,h){super(i,o,a,s,c,l,u,void 0,p,d,h),this.privIntentId=r}get intentId(){return this.privIntentId}};return ji.IntentRecognitionResult=t,ji}var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.LanguageUnderstandingModelImpl=Yr.LanguageUnderstandingModel=void 0;const Er=B;class QR{constructor(){}static fromEndpoint(t){Er.Contracts.throwIfNull(t,"uri"),Er.Contracts.throwIfNullOrWhitespace(t.hostname,"uri");const n=new ec,r=t.host.indexOf(".");if(r===-1)throw new Error("Could not determine region from endpoint");n.region=t.host.substr(0,r);const i=t.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(n.appId=t.pathname.substr(i),n.subscriptionKey=t.searchParams.get("subscription-key"),n.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return n}static fromAppId(t){Er.Contracts.throwIfNullOrWhitespace(t,"appId");const n=new ec;return n.appId=t,n}static fromSubscription(t,n,r){Er.Contracts.throwIfNullOrWhitespace(t,"subscriptionKey"),Er.Contracts.throwIfNullOrWhitespace(n,"appId"),Er.Contracts.throwIfNullOrWhitespace(r,"region");const i=new ec;return i.appId=n,i.region=r,i.subscriptionKey=t,i}}Yr.LanguageUnderstandingModel=QR;class ec extends QR{}Yr.LanguageUnderstandingModelImpl=ec;var zt={},ug;function Dk(){if(ug)return zt;ug=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.MeetingTranscriptionEventArgs=zt.ConversationTranscriptionEventArgs=zt.SpeechRecognitionEventArgs=void 0;const e=b();let t=class extends e.RecognitionEventArgs{constructor(o,a,s){super(a,s),this.privResult=o}get result(){return this.privResult}};zt.SpeechRecognitionEventArgs=t;class n extends e.RecognitionEventArgs{constructor(o,a,s){super(a,s),this.privResult=o}get result(){return this.privResult}}zt.ConversationTranscriptionEventArgs=n;class r extends t{}return zt.MeetingTranscriptionEventArgs=r,zt}var zi={},Li={},pg;function da(){if(pg)return Li;pg=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.CancellationEventArgsBase=void 0;const e=b();let t=class extends e.RecognitionEventArgs{constructor(r,i,o,a,s){super(a,s),this.privReason=r,this.privErrorDetails=i,this.privErrorCode=o}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Li.CancellationEventArgsBase=t,Li}var dg;function jk(){if(dg)return zi;dg=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.SpeechRecognitionCanceledEventArgs=void 0;const e=da();let t=class extends e.CancellationEventArgsBase{};return zi.SpeechRecognitionCanceledEventArgs=t,zi}var Bi={},hg;function zk(){if(hg)return Bi;hg=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.TranslationRecognitionEventArgs=void 0;const e=b();let t=class extends e.RecognitionEventArgs{constructor(r,i,o){super(i,o),this.privResult=r}get result(){return this.privResult}};return Bi.TranslationRecognitionEventArgs=t,Bi}var Fi={},fg;function Lk(){if(fg)return Fi;fg=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.TranslationSynthesisEventArgs=void 0;const e=b();let t=class extends e.SessionEventArgs{constructor(r,i){super(i),this.privResult=r}get result(){return this.privResult}};return Fi.TranslationSynthesisEventArgs=t,Fi}var qi={},vg;function XR(){if(vg)return qi;vg=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.TranslationRecognitionResult=void 0;const e=b();let t=class GR extends e.SpeechRecognitionResult{constructor(r,i,o,a,s,c,l,u,p,d,h){super(i,o,a,s,c,l,u,void 0,p,d,h),this.privTranslations=r}static fromSpeechRecognitionResult(r){return new GR(void 0,r.resultId,r.reason,r.text,r.duration,r.offset,r.language,r.languageDetectionConfidence,r.errorDetails,r.json,r.properties)}get translations(){return this.privTranslations}};return qi.TranslationRecognitionResult=t,qi}var jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.TranslationSynthesisResult=void 0;class Bk{constructor(t,n){this.privReason=t,this.privAudio=n}get audio(){return this.privAudio}get reason(){return this.privReason}}jl.TranslationSynthesisResult=Bk;var YR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResultReason=void 0,function(t){t[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(e.ResultReason||(e.ResultReason={}))})(YR);var Ln={},gg;function Fk(){if(gg)return Ln;gg=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.SpeechConfigImpl=Ln.SpeechConfig=void 0;const e=M(),t=B,n=b();let r=class{constructor(){}static fromSubscription(a,s){t.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c.setProperty(n.PropertyId.SpeechServiceConnection_IntentRegion,s),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c}static fromEndpoint(a,s){t.Contracts.throwIfNull(a,"endpoint");const c=typeof s=="string"&&s.trim().length>0,l=typeof s=="object"&&s!==null&&typeof s.getToken=="function",u=typeof s=="object"&&s!==null&&typeof s.key=="string";if(s!==void 0&&!c&&!l&&!u)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let p;return typeof s=="string"?(p=new i,p.setProperty(n.PropertyId.SpeechServiceConnection_Key,s)):typeof s=="object"&&typeof s.getToken=="function"?p=new i(s):typeof s=="object"&&typeof s.key=="string"?(p=new i,p.setProperty(n.PropertyId.SpeechServiceConnection_Key,s.key)):p=new i,p.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,a.href),p}static fromHost(a,s){t.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),c.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),s!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,s),c}static fromAuthorizationToken(a,s){t.Contracts.throwIfNull(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c.setProperty(n.PropertyId.SpeechServiceConnection_IntentRegion,s),c.authorizationToken=a,c}close(){}};Ln.SpeechConfig=r;class i extends r{constructor(a){super(),this.privProperties=new n.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=n.OutputFormat.Simple,this.privTokenCredential=a}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return n.OutputFormat[this.privProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_EndpointId,a)}get tokenCredential(){return this.privTokenCredential}setProperty(a,s){t.Contracts.throwIfNull(s,"value"),this.privProperties.setProperty(a,s)}getProperty(a,s){return this.privProperties.getProperty(a,s)}setProxy(a,s,c,l){this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPort],s),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPassword],l)}setServiceProperty(a,s){const c=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=s,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_ProfanityOption,n.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(e.ForceDictationPropertyName,"true")}clone(){const a=new i(this.tokenCredential);return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return n.SpeechSynthesisOutputFormat[this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,n.SpeechSynthesisOutputFormat[a])}}return Ln.SpeechConfigImpl=i,Ln}var Bn={},mg;function qk(){if(mg)return Bn;mg=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.SpeechTranslationConfigImpl=Bn.SpeechTranslationConfig=void 0;const e=M(),t=B,n=b();let r=class extends n.SpeechConfig{constructor(){super()}static fromSubscription(a,s){t.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c}static fromAuthorizationToken(a,s){t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c}static fromHost(a,s){t.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),s!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,s),c}static fromEndpoint(a,s){t.Contracts.throwIfNull(a,"endpoint");const c=typeof s=="string"&&s.trim().length>0,l=typeof s=="object"&&s!==null&&typeof s.getToken=="function",u=typeof s=="object"&&s!==null&&typeof s.key=="string";if(s!==void 0&&!c&&!l&&!u)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let p;return typeof s=="string"?(p=new i,p.setProperty(n.PropertyId.SpeechServiceConnection_Key,s)):typeof s=="object"&&typeof s.getToken=="function"?p=new i(s):typeof s=="object"&&typeof s.key=="string"?(p=new i,p.setProperty(n.PropertyId.SpeechServiceConnection_Key,s.key)):p=new i,p.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,a.href),p}};Bn.SpeechTranslationConfig=r;class i extends r{constructor(a){super(),this.privSpeechProperties=new n.PropertyCollection,this.outputFormat=n.OutputFormat.Simple,this.privTokenCredential=a}set authorizationToken(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return n.OutputFormat[this.privSpeechProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){t.Contracts.throwIfNullOrWhitespace(a,"value");const s=this.targetLanguages;s.includes(a)||(s.push(a),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,s.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(a,s,c,l){this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPort],s),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPassword],l)}getProperty(a,s){return this.privSpeechProperties.getProperty(a,s)}setProperty(a,s){this.privSpeechProperties.setProperty(a,s)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,s){const c=JSON.parse(this.privSpeechProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=s,this.privSpeechProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceResponse_ProfanityOption,n.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(e.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return n.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,n.SpeechSynthesisOutputFormat[a])}}return Bn.SpeechTranslationConfigImpl=i,Bn}var Ui={},yg;function eP(){if(yg)return Ui;yg=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.PropertyCollection=void 0;const e=b();let t=class ZR{constructor(){this.privKeys=[],this.privValues=[]}getProperty(r,i){let o;typeof r=="string"?o=r:o=e.PropertyId[r];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===o)return this.privValues[a];if(i!==void 0)return String(i)}setProperty(r,i){let o;typeof r=="string"?o=r:o=e.PropertyId[r];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===o){this.privValues[a]=i;return}this.privKeys.push(o),this.privValues.push(i)}clone(){const r=new ZR;for(let i=0;i<this.privKeys.length;i++)r.privKeys.push(this.privKeys[i]),r.privValues.push(this.privValues[i]);return r}mergeTo(r){this.privKeys.forEach(i=>{if(r.getProperty(i,void 0)===void 0){const o=this.getProperty(i);r.setProperty(i,o)}})}get keys(){return this.privKeys}};return Ui.PropertyCollection=t,Ui}var zl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyId=void 0,function(t){t[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",t[t.SpeechServiceConnection_IntentRegion=10]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=11]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=12]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=13]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=14]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=15]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=16]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=17]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=18]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=19]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=20]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=21]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=22]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=23]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=24]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=25]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=26]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=27]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=28]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=29]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=30]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=31]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=32]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=33]="Speech_SegmentationSilenceTimeoutMs",t[t.Speech_SegmentationMaximumTimeMs=34]="Speech_SegmentationMaximumTimeMs",t[t.Speech_SegmentationStrategy=35]="Speech_SegmentationStrategy",t[t.SpeechServiceConnection_EnableAudioLogging=36]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=37]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=38]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=39]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=40]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=41]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=42]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=43]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=44]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=45]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=46]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=47]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=48]="SpeechServiceResponse_RequestSentenceBoundary",t[t.SpeechServiceResponse_DiarizeIntermediateResults=49]="SpeechServiceResponse_DiarizeIntermediateResults",t[t.Conversation_ApplicationId=50]="Conversation_ApplicationId",t[t.Conversation_DialogType=51]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=52]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=53]="Conversation_From_Id",t[t.Conversation_Conversation_Id=54]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=55]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=56]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=57]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=58]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=59]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=60]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=61]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=62]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=63]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=64]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=65]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=66]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=67]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=68]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=69]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=70]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=71]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=72]="TalkingAvatarService_WebRTC_SDP"}(e.PropertyId||(e.PropertyId={}))})(zl);var $i={},Sg;function Uk(){if(Sg)return $i;Sg=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.Recognizer=void 0;const e=M(),t=z(),n=B,r=b();let i=class tP{constructor(a,s,c,l){this.audioConfig=a!==void 0?a:r.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=s.clone(),this.privConnectionFactory=c,this.tokenCredential=l,this.implCommonRecognizerSetup()}close(a,s){n.Contracts.throwIfDisposed(this.privDisposed),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),a,s)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return e.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){e.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",s="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,s=navigator.userAgent,c=navigator.appVersion);const l=this.createRecognizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(a,s,c))));this.privReco=this.createServiceRecognizer(tP.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,l)}async recognizeOnceAsyncImpl(a){n.Contracts.throwIfDisposed(this.privDisposed);const s=new t.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,s.resolve,s.reject);const c=await s.promise;return await this.implRecognizerStop(),c}async startContinuousRecognitionAsyncImpl(a){n.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){n.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuth(a,s){const c=a.getProperty(r.PropertyId.SpeechServiceConnection_Key,void 0);return c&&c!==""?new e.CognitiveSubscriptionKeyAuthentication(c):s?new e.CognitiveTokenAuthentication(async()=>{try{const l=await s.getToken("https://cognitiveservices.azure.com/.default");return(l==null?void 0:l.token)??""}catch(l){throw l}},async()=>{try{const l=await s.getToken("https://cognitiveservices.azure.com/.default");return(l==null?void 0:l.token)??""}catch(l){throw l}}):new e.CognitiveTokenAuthentication(()=>{const l=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(l)},()=>{const l=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(l)})}};return $i.Recognizer=i,$i}var Wi={},ot={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionMode=void 0,function(t){t.Interactive="Interactive",t.Dictation="Dictation",t.Conversation="Conversation",t.None="None"}(e.RecognitionMode||(e.RecognitionMode={}))})(ot);var Cg;function $k(){if(Cg)return Wi;Cg=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.SpeechRecognizer=void 0;const e=M(),t=ot,n=z(),r=B,i=b();let o=class nP extends i.Recognizer{constructor(s,c){const l=s;r.Contracts.throwIfNull(l,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(l.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(c,l.properties,new e.SpeechConnectionFactory,s.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(s,c,l){const u=s;return c.properties.mergeTo(u.properties),new nP(s,l)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){r.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,s)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(s,c){(0,n.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),s,c)}startContinuousRecognitionAsync(s,c){(0,n.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(this.properties.getProperty(e.ForceDictationPropertyName,void 0)===void 0?t.RecognitionMode.Conversation:t.RecognitionMode.Dictation),s,c)}stopContinuousRecognitionAsync(s,c){(0,n.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),s,c)}startKeywordRecognitionAsync(s,c,l){r.Contracts.throwIfNull(s,"model"),l&&l("Not yet implemented.")}stopKeywordRecognitionAsync(s){s&&s()}close(s,c){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),s,c)}async dispose(s){this.privDisposedRecognizer||(s&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(s))}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,c,l,u){const p=l;return new e.SpeechServiceRecognizer(s,c,p,u,this)}};return Wi.SpeechRecognizer=o,Wi}var Vi={},Rg;function Wk(){if(Rg)return Vi;Rg=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.IntentRecognizer=void 0;const e=M(),t=ot,n=z(),r=B,i=b();let o=class extends i.Recognizer{constructor(s,c){r.Contracts.throwIfNullOrUndefined(s,"speechConfig");const l=s;r.Contracts.throwIfNullOrUndefined(l,"speechConfig"),super(c,l.properties,new e.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=l.properties,r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}recognizeOnceAsync(s,c){if(r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const l=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=l.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(l.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,n.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),s,c)}startContinuousRecognitionAsync(s,c){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const l=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=l.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(l.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,n.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),s,c)}stopContinuousRecognitionAsync(s,c){(0,n.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),s,c)}startKeywordRecognitionAsync(s,c,l){r.Contracts.throwIfNull(s,"model"),l&&l("Not yet implemented.")}stopKeywordRecognitionAsync(s,c){if(s)try{s()}catch(l){c&&c(l)}}addIntent(s,c){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(c,"intentId"),r.Contracts.throwIfNullOrWhitespace(s,"simplePhrase"),this.privAddedIntents.push([c,s])}addIntentWithLanguageModel(s,c,l){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(s,"intentId"),r.Contracts.throwIfNull(c,"model");const u=c;r.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privAddedLmIntents[s]=new e.AddedLmIntent(u,l)}addAllIntents(s,c){r.Contracts.throwIfNull(s,"model");const l=s;r.Contracts.throwIfNullOrWhitespace(l.appId,"model.appId"),this.privUmbrellaIntent=new e.AddedLmIntent(l,c)}close(s,c){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),s,c)}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,c,l,u){const p=l;return new e.IntentServiceRecognizer(s,c,p,u,this)}async dispose(s){this.privDisposedIntentRecognizer||s&&(this.privDisposedIntentRecognizer=!0,await super.dispose(s))}buildSpeechContext(){let s,c,l;const u=[];this.privUmbrellaIntent!==void 0&&(s=this.privUmbrellaIntent.modelImpl.appId,c=this.privUmbrellaIntent.modelImpl.region,l=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const p of Object.keys(this.privAddedLmIntents)){const d=this.privAddedLmIntents[p];if(s===void 0)s=d.modelImpl.appId;else if(s!==d.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(c===void 0)c=d.modelImpl.region;else if(c!==d.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(l===void 0)l=d.modelImpl.subscriptionKey;else if(l!==d.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const h="luis/"+s+"-PRODUCTION#"+p;u.push(h)}return{Intent:{id:s,key:l===void 0?this.privProperties.getProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_Key]):l,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?u:["luis/"+s+"-PRODUCTION"]}}};return Vi.IntentRecognizer=o,Vi}var rP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceProfileType=void 0,function(t){t[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"}(e.VoiceProfileType||(e.VoiceProfileType={}))})(rP);var Hi={},Ki={},Fn={},Pg;function iP(){if(Pg)return Fn;Pg=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.ConnectionMessageImpl=Fn.ConnectionMessage=void 0;const e=ye,t=z(),n=eP(),r=zl;let i=class{};Fn.ConnectionMessage=i;class o{constructor(s){this.privConnectionMessage=s,this.privProperties=new n.PropertyCollection,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]&&this.privProperties.setProperty(r.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(c=>{this.privProperties.setProperty(c,this.privConnectionMessage.headers[c])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(s=>s.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===t.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===t.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Fn.ConnectionMessageImpl=o,Fn}var wg;function sP(){if(wg)return Ki;wg=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.Connection=void 0;const e=M(),t=z(),n=iP(),r=B,i=b();let o=class wd{static fromRecognizer(s){const c=s.internalData,l=new wd;return l.privInternalData=c,l.setupEvents(),l}static fromSynthesizer(s){const c=s.internalData,l=new wd;return l.privInternalData=c,l.setupEvents(),l}openConnection(s,c){(0,t.marshalPromiseToCallbacks)(this.privInternalData.connect(),s,c)}closeConnection(s,c){if(this.privInternalData instanceof e.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,t.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),s,c)}setMessageProperty(s,c,l){if(r.Contracts.throwIfNullOrWhitespace(c,"propertyName"),this.privInternalData instanceof e.ServiceRecognizerBase){if(s.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");{const u=this.privInternalData.speechContext.getContext();u[c]=l}}else if(this.privInternalData instanceof e.SynthesisAdapterBase){if(s.toLowerCase()!=="speech.config"&&s.toLowerCase()!=="synthesis.context")throw new Error("Only speech.config and synthesis.context message paths are currently supported for synthesizer");if(s.toLowerCase()==="speech.config"){if(c.toLowerCase()!=="context")throw new Error("Only context property is currently supported for speech.config message path for synthesizer");this.privInternalData.synthesizerConfig.setContextFromJson(l)}else this.privInternalData.synthesisContext.setSection(c,l)}}sendMessageAsync(s,c,l,u){(0,t.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(s,c),l,u)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(s=>{s.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(s.connectionId)):s.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(s.connectionId)):s.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new n.ConnectionMessageImpl(s.message))):s.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new n.ConnectionMessageImpl(s.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(s=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(s.jsonString,s.name))})}};return Ki.Connection=o,Ki}var Eg;function Vk(){if(Eg)return Hi;Eg=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.TranslationRecognizer=void 0;const e=M(),t=ot,n=z(),r=sP(),i=B,o=b();let a=class oP extends o.Recognizer{constructor(c,l,u){const p=c;i.Contracts.throwIfNull(p,"speechConfig"),super(l,p.properties,u||new e.TranslationConnectionFactory,c.tokenCredential),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice),o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationVoice]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages),o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationToLanguages]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(c,l,u){const p=c;return l.properties.mergeTo(p.properties),l.properties.getProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===e.AutoDetectSourceLanguagesOpenRangeOptionName&&p.properties.setProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new oP(c,u)}get speechRecognitionLanguage(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,c)}recognizeOnceAsync(c,l){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,n.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),c,l)}startContinuousRecognitionAsync(c,l){(0,n.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),c,l)}stopContinuousRecognitionAsync(c,l){(0,n.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),c,l)}removeTargetLanguage(c){if(i.Contracts.throwIfNullOrUndefined(c,"language to be removed"),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const l=this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u=l.indexOf(c);u>-1&&(l.splice(u,1),this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,l.join(",")),this.updateLanguages(l))}}addTargetLanguage(c){i.Contracts.throwIfNullOrUndefined(c,"language to be added");let l=[];this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(l=this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),l.includes(c)||(l.push(c),this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,l.join(",")))):(this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,c),l=[c]),this.updateLanguages(l)}close(c,l){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),c,l)}onConnection(){}async dispose(c){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,c&&(await this.implRecognizerStop(),await super.dispose(c)))}createRecognizerConfig(c){return new e.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,l,u,p){const d=u;return new e.TranslationServiceRecognizer(c,l,d,p,this)}updateLanguages(c){const l=r.Connection.fromRecognizer(this);l&&(l.setMessageProperty("speech.context","translationcontext",{to:c}),l.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:c})))}};return Hi.TranslationRecognizer=a,Hi}var Ji={},Tg;function Hk(){if(Tg)return Ji;Tg=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.Translations=void 0;const e=b();let t=class{constructor(){this.privMap=new e.PropertyCollection}get languages(){return this.privMap.keys}get(r,i){return this.privMap.getProperty(r,i)}set(r,i){this.privMap.setProperty(r,i)}};return Ji.Translations=t,Ji}var aP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NoMatchReason=void 0,function(t){t[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(e.NoMatchReason||(e.NoMatchReason={}))})(aP);var Qi={},Ig;function Kk(){if(Ig)return Qi;Ig=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.NoMatchDetails=void 0;const e=M(),t=b();let n=class cP{constructor(i){this.privReason=i}static fromResult(i){const o=e.SimpleSpeechPhrase.fromJSON(i.json,0);let a=t.NoMatchReason.NotRecognized;switch(o.RecognitionStatus){case e.RecognitionStatus.BabbleTimeout:a=t.NoMatchReason.InitialBabbleTimeout;break;case e.RecognitionStatus.InitialSilenceTimeout:a=t.NoMatchReason.InitialSilenceTimeout;break;default:a=t.NoMatchReason.NotRecognized;break}return new cP(a)}get reason(){return this.privReason}};return Qi.NoMatchDetails=n,Qi}var Ll={};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.TranslationRecognitionCanceledEventArgs=void 0;class Jk{constructor(t,n,r,i,o){this.privCancelReason=n,this.privErrorDetails=r,this.privResult=o,this.privSessionId=t,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}Ll.TranslationRecognitionCanceledEventArgs=Jk;var Gi={},_g;function Qk(){if(_g)return Gi;_g=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.IntentRecognitionCanceledEventArgs=void 0;const e=b();let t=class extends e.IntentRecognitionEventArgs{constructor(r,i,o,a,s,c){super(a,s,c),this.privReason=r,this.privErrorDetails=i,this.privErrorCode=o}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Gi.IntentRecognitionCanceledEventArgs=t,Gi}var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.CancellationDetailsBase=void 0;class Gk{constructor(t,n,r){this.privReason=t,this.privErrorDetails=n,this.privErrorCode=r}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}ha.CancellationDetailsBase=Gk;var Xi={},Ag;function Xk(){if(Ag)return Xi;Ag=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.CancellationDetails=void 0;const e=M(),t=ha,n=b();let r=class lP extends t.CancellationDetailsBase{constructor(o,a,s){super(o,a,s)}static fromResult(o){let a=n.CancellationReason.Error,s=n.CancellationErrorCode.NoError;if(o instanceof n.RecognitionResult&&o.json){const c=e.SimpleSpeechPhrase.fromJSON(o.json,0);a=e.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus)}return o.properties&&(s=n.CancellationErrorCode[o.properties.getProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new lP(a,o.errorDetails||e.EnumTranslation.implTranslateErrorDetails(s),s)}};return Xi.CancellationDetails=r,Xi}var uP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationErrorCode=void 0,function(t){t[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"}(e.CancellationErrorCode||(e.CancellationErrorCode={}))})(uP);var Yi={},bg;function Yk(){if(bg)return Yi;bg=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.ConnectionEventArgs=void 0;const e=b();let t=class extends e.SessionEventArgs{};return Yi.ConnectionEventArgs=t,Yi}var Zi={},kg;function Zk(){if(kg)return Zi;kg=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.ServiceEventArgs=void 0;const e=b();let t=class extends e.SessionEventArgs{constructor(r,i,o){super(o),this.privJsonResult=r,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return Zi.ServiceEventArgs=t,Zi}var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.PhraseListGrammar=void 0;const ex=B;class zh{constructor(t){this.privGrammerBuilder=t.dynamicGrammar}static fromRecognizer(t){const n=t.internalData;return new zh(n)}addPhrase(t){this.privGrammerBuilder.addPhrase(t)}addPhrases(t){this.privGrammerBuilder.addPhrase(t)}clear(){this.privGrammerBuilder.clearPhrases()}setWeight(t){ex.Contracts.throwIfNumberOutOfRange(t,"weight",0,2),this.privGrammerBuilder.setWeight(t)}}Bl.PhraseListGrammar=zh;var qn={},xg;function Lh(){if(xg)return qn;xg=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.DialogServiceConfigImpl=qn.DialogServiceConfig=void 0;const e=B,t=b();let n=class{constructor(){}set applicationId(o){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};qn.DialogServiceConfig=n;class r extends n{constructor(){super(),this.privSpeechConfig=new t.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(o){e.Contracts.throwIfNullOrWhitespace(o,"value"),this.privSpeechConfig.speechRecognitionLanguage=o}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(o){this.privSpeechConfig.outputFormat=o}setProperty(o,a){this.privSpeechConfig.setProperty(o,a)}getProperty(o,a){return this.privSpeechConfig.getProperty(o)}setProxy(o,a,s,c){this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName,o),this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),s&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName,s),c&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword,c)}setServiceProperty(o,a,s){this.privSpeechConfig.setServiceProperty(o,a)}close(){}}return qn.DialogServiceConfigImpl=r,qn}var es={},Og;function tx(){if(Og)return es;Og=1,Object.defineProperty(es,"__esModule",{value:!0}),es.BotFrameworkConfig=void 0;const e=B,t=Lh(),n=b();let r=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(o,a,s){e.Contracts.throwIfNullOrWhitespace(o,"subscription"),e.Contracts.throwIfNullOrWhitespace(a,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,o),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,a),s&&c.setProperty(n.PropertyId.Conversation_ApplicationId,s),c}static fromAuthorizationToken(o,a,s){e.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(a,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,o),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,a),s&&c.setProperty(n.PropertyId.Conversation_ApplicationId,s),c}static fromHost(o,a,s){e.Contracts.throwIfNullOrUndefined(o,"host");const c=o instanceof URL?o:new URL(`wss://${o}.convai.speech.azure.us`);e.Contracts.throwIfNullOrUndefined(c,"resolvedHost");const l=new t.DialogServiceConfigImpl;return l.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),l.setProperty(n.PropertyId.SpeechServiceConnection_Host,c.toString()),a!==void 0&&l.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),l}static fromEndpoint(o,a){e.Contracts.throwIfNull(o,"endpoint");const s=new t.DialogServiceConfigImpl;return s.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,o.toString()),a!==void 0&&s.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),s}};return es.BotFrameworkConfig=r,es}var ts={},Ng;function nx(){if(Ng)return ts;Ng=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.CustomCommandsConfig=void 0;const e=B,t=Lh(),n=b();let r=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(o,a,s){e.Contracts.throwIfNullOrWhitespace(o,"applicationId"),e.Contracts.throwIfNullOrWhitespace(a,"subscription"),e.Contracts.throwIfNullOrWhitespace(s,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(n.PropertyId.Conversation_ApplicationId,o),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c}static fromAuthorizationToken(o,a,s){e.Contracts.throwIfNullOrWhitespace(o,"applicationId"),e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(s,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(n.PropertyId.Conversation_ApplicationId,o),c.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c}set applicationId(o){e.Contracts.throwIfNullOrWhitespace(o,"value"),this.setProperty(n.PropertyId.Conversation_ApplicationId,o)}get applicationId(){return this.getProperty(n.PropertyId.Conversation_ApplicationId)}};return ts.CustomCommandsConfig=r,ts}var ns={},rs={},is={},Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.QueryParameterNames=void 0;class te{}Tt.QueryParameterNames=te;te.BotId="botid";te.CustomSpeechDeploymentId="cid";te.CustomVoiceDeploymentId="deploymentId";te.EnableAudioLogging="storeAudio";te.EnableLanguageId="lidEnabled";te.EnableWordLevelTimestamps="wordLevelTimestamps";te.EndSilenceTimeoutMs="endSilenceTimeoutMs";te.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";te.SegmentationMaximumTimeMs="segmentationMaximumTimeMs";te.SegmentationStrategy="segmentationStrategy";te.Format="format";te.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";te.Language="language";te.Profanity="profanity";te.RequestBotStatusMessages="enableBotMessageStatus";te.StableIntermediateThreshold="stableIntermediateThreshold";te.StableTranslation="stableTranslation";te.TestHooks="testhooks";te.Postprocessing="postprocessing";te.CtsMeetingId="meetingId";te.CtsDeviceId="deviceId";te.CtsIsParticipant="isParticipant";te.EnableAvatar="enableTalkingAvatar";var Mg;function It(){if(Mg)return is;Mg=1,Object.defineProperty(is,"__esModule",{value:!0}),is.ConnectionFactoryBase=void 0;const e=M(),t=z(),n=b(),r=Tt;let i=class{static getHostSuffix(a){if(a){if(a.toLowerCase().startsWith("china"))return".azure.cn";if(a.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(a,s,c){new Map([[n.PropertyId.Speech_SegmentationSilenceTimeoutMs,r.QueryParameterNames.SegmentationSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_EnableAudioLogging,r.QueryParameterNames.EnableAudioLogging],[n.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,r.QueryParameterNames.EndSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,r.QueryParameterNames.InitialSilenceTimeoutMs],[n.PropertyId.SpeechServiceResponse_PostProcessingOption,r.QueryParameterNames.Postprocessing],[n.PropertyId.SpeechServiceResponse_ProfanityOption,r.QueryParameterNames.Profanity],[n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,r.QueryParameterNames.EnableWordLevelTimestamps],[n.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,r.QueryParameterNames.StableIntermediateThreshold]]).forEach((p,d)=>{this.setUrlParameter(d,p,a,s,c)});const u=JSON.parse(a.parameters.getProperty(e.ServicePropertiesPropertyName,"{}"));Object.keys(u).forEach(p=>{s[p]=u[p]})}setUrlParameter(a,s,c,l,u){const p=c.parameters.getProperty(a,void 0);p&&(!u||u.search(s)===-1)&&(l[s]=p.toLocaleLowerCase())}static async getRedirectUrlFromEndpoint(a){const s=new URL(a);s.protocol="https:",s.port="443",s.searchParams.append("GenerateRedirectResponse","true");const l=s.toString();t.Events.instance.onEvent(new t.ConnectionRedirectEvent("",l,void 0,"ConnectionFactoryBase: redirectUrl request"));const u=await fetch(l);if(u.status!==200)return a;const p=await u.text();t.Events.instance.onEvent(new t.ConnectionRedirectEvent("",p,a,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(p.trim()).toString()}catch{return a}}};return is.ConnectionFactoryBase=i,is}var Dg;function rx(){if(Dg)return rs;Dg=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.DialogConnectionFactory=void 0;const e=Se(),t=M(),n=b(),r=It(),i=M(),o=ye,a=Tt;class s extends r.ConnectionFactoryBase{create(l,u,p){const d=l.parameters.getProperty(n.PropertyId.Conversation_ApplicationId,""),h=l.parameters.getProperty(n.PropertyId.Conversation_DialogType),v=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),S=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),C=l.parameters.getProperty(n.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),f={};f[o.HeaderNames.ConnectionId]=p,f[a.QueryParameterNames.Format]=l.parameters.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase(),f[a.QueryParameterNames.Language]=S,f[a.QueryParameterNames.RequestBotStatusMessages]=C,d&&(f[a.QueryParameterNames.BotId]=d,h===n.DialogServiceConfig.DialogTypes.CustomCommands&&(f[o.HeaderNames.CustomCommandsAppId]=d));const g=h===n.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",y=h===n.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===n.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",R={};u.token!=null&&u.token!==""&&(R[u.headerName]=u.token);let P=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,"");if(!P){const T=r.ConnectionFactoryBase.getHostSuffix(v),E=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,`wss://${v}.${s.BaseUrl}${T}`);P=`${E.endsWith("/")?E:E+"/"}${g}${s.ApiKey}/${y}`}this.setCommonUrlParams(l,f,P);const w=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(P,f,R,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),w,p))}}return rs.DialogConnectionFactory=s,s.ApiKey="api",s.BaseUrl="convai.speech",rs}var jg;function ix(){if(jg)return ns;jg=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.DialogServiceConnector=void 0;const e=rx(),t=M(),n=ot,r=z(),i=B,o=b(),a=zl;let s=class extends o.Recognizer{constructor(l,u){const p=l;i.Contracts.throwIfNull(l,"dialogConfig"),super(u,p.properties,new e.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=p.properties.clone();const d=this.buildAgentConfig();this.privReco.agentConfig.set(d)}connect(l,u){(0,r.marshalPromiseToCallbacks)(this.privReco.connect(),l,u)}disconnect(l,u){(0,r.marshalPromiseToCallbacks)(this.privReco.disconnect(),l,u)}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(l){i.Contracts.throwIfNullOrWhitespace(l,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,l)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(a.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(l){this.properties.setProperty(a.PropertyId.Conversation_Speech_Activity_Template,l)}listenOnceAsync(l,u){if(this.isTurnComplete){i.Contracts.throwIfDisposed(this.privIsDisposed);const d=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const h=new r.Deferred;await this.privReco.recognize(n.RecognitionMode.Conversation,h.resolve,h.reject);const v=await h.promise;return await this.implRecognizerStop(),v})();d.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,r.marshalPromiseToCallbacks)(d.finally(()=>{this.isTurnComplete=!0}),l,u)}}sendActivityAsync(l,u,p){(0,r.marshalPromiseToCallbacks)(this.privReco.sendMessage(l),u,p)}close(l,u){i.Contracts.throwIfDisposed(this.privIsDisposed),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),l,u)}async dispose(l){this.privIsDisposed||l&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(l))}createRecognizerConfig(l){return new t.RecognizerConfig(l,this.privProperties)}createServiceRecognizer(l,u,p,d){const h=p;return new t.DialogServiceAdapter(l,u,h,d,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(a.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(a.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(a.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return ns.DialogServiceConnector=s,ns}var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.ActivityReceivedEventArgs=void 0;class sx{constructor(t,n){this.privActivity=t,this.privAudioStream=n}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}Fl.ActivityReceivedEventArgs=sx;var ql={},Ul={};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.TurnStatusResponsePayload=void 0;class Bh{constructor(t){this.privMessageStatusResponse=JSON.parse(t)}static fromJSON(t){return new Bh(t)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}Ul.TurnStatusResponsePayload=Bh;Object.defineProperty(ql,"__esModule",{value:!0});ql.TurnStatusReceivedEventArgs=void 0;const ox=Ul;class ax{constructor(t){this.privTurnStatus=ox.TurnStatusResponsePayload.fromJSON(t)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}ql.TurnStatusReceivedEventArgs=ax;var pP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ServicePropertyChannel=void 0,function(t){t[t.UriQueryParameter=0]="UriQueryParameter"}(e.ServicePropertyChannel||(e.ServicePropertyChannel={}))})(pP);var dP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProfanityOption=void 0,function(t){t[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"}(e.ProfanityOption||(e.ProfanityOption={}))})(dP);var ss={},zg;function cx(){if(zg)return ss;zg=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.BaseAudioPlayer=void 0;const e=Ee,t=b(),n=Mn;let r=class{constructor(o){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,o===void 0&&(o=t.AudioStreamFormat.getDefaultInputFormat()),this.init(o)}playAudioSample(o,a,s){try{this.ensureInitializedContext();const c=this.formatAudioData(o),l=new Float32Array(this.samples.length+c.length);l.set(this.samples,0),l.set(c,this.samples.length),this.samples=l,a&&a()}catch(c){s&&s(c)}}stopAudio(o,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{o&&o()},s=>{a&&a(s)}),this.audioContext=null)}init(o){this.audioFormat=o,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const o=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},o)}}createAudioContext(){this.audioContext=n.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(o){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(o),128);case 16:return this.formatArrayBuffer(new Int16Array(o),32768);case 32:return this.formatArrayBuffer(new Int32Array(o),2147483648);default:throw new e.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(o,a){const s=new Float32Array(o.length);for(let c=0;c<o.length;c++)s[c]=o[c]/a;return s}updateAudioBuffer(){if(this.samples.length===0)return;const o=this.audioFormat.channels,a=this.audioContext.createBufferSource(),s=this.samples.length/o,c=this.audioContext.createBuffer(o,s,this.audioFormat.samplesPerSec);for(let l=0;l<o;l++){let u=l;const p=c.getChannelData(l);for(let d=0;d<this.samples.length;d++,u+=o)p[d]=this.samples[u]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=c,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=c.duration,this.samples=new Float32Array}async playAudio(o){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),s=this.audioContext.destination;await this.audioContext.decodeAudioData(o,c=>{a.buffer=c,a.connect(s),a.start(0)})}};return ss.BaseAudioPlayer=r,ss}var $l={};Object.defineProperty($l,"__esModule",{value:!0});$l.ConnectionMessageEventArgs=void 0;class lx{constructor(t){this.privConnectionMessage=t}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}$l.ConnectionMessageEventArgs=lx;var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.VoiceProfile=void 0;class ux{constructor(t,n){this.privId=t,this.privProfileType=n}get profileId(){return this.privId}get profileType(){return this.privProfileType}}Wl.VoiceProfile=ux;var Un={},Lg;function px(){if(Lg)return Un;Lg=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.VoiceProfileEnrollmentCancellationDetails=Un.VoiceProfileEnrollmentResult=void 0;const e=M(),t=b();let n=class Ed{constructor(o,a,s){this.privReason=o,this.privProperties=new t.PropertyCollection,this.privReason!==t.ResultReason.Canceled?a&&(this.privDetails=JSON.parse(a),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=t.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=s,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(o){const a=[];for(const s of o.value){const c=s.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:s.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,l=new Ed(c,null,null);l.privDetails=this.getIdentificationDetails(s),a.push(l)}return a}static FromVerificationProfileList(o){const a=[];for(const s of o.value){const c=s.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:s.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,l=new Ed(c,null,null);l.privDetails=this.getVerificationDetails(s),a.push(l)}return a}static getIdentificationDetails(o){return{audioLength:o.audioLength?parseFloat(o.audioLength):0,audioSpeechLength:o.audioSpeechLength?parseFloat(o.audioSpeechLength):0,enrollmentStatus:o.enrollmentStatus,enrollmentsCount:o.enrollmentsCount||0,enrollmentsLength:o.enrollmentsLength?parseFloat(o.enrollmentsLength):0,enrollmentsSpeechLength:o.enrollmentsSpeechLength?parseFloat(o.enrollmentsSpeechLength):0,profileId:o.profileId||o.identificationProfileId,remainingEnrollmentsSpeechLength:o.remainingEnrollmentsSpeechLength?parseFloat(o.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(o){return{audioLength:o.audioLength?parseFloat(o.audioLength):0,audioSpeechLength:o.audioSpeechLength?parseFloat(o.audioSpeechLength):0,enrollmentStatus:o.enrollmentStatus,enrollmentsCount:o.enrollmentsCount,enrollmentsLength:o.enrollmentsLength?parseFloat(o.enrollmentsLength):0,enrollmentsSpeechLength:o.enrollmentsSpeechLength?parseFloat(o.enrollmentsSpeechLength):0,profileId:o.profileId||o.verificationProfileId,remainingEnrollmentsCount:o.remainingEnrollments||o.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:o.remainingEnrollmentsSpeechLength?parseFloat(o.remainingEnrollmentsSpeechLength):0}}};Un.VoiceProfileEnrollmentResult=n;class r extends t.CancellationDetailsBase{constructor(o,a,s){super(o,a,s)}static fromResult(o){const a=t.CancellationReason.Error;let s=t.CancellationErrorCode.NoError;return o.properties&&(s=t.CancellationErrorCode[o.properties.getProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new r(a,o.errorDetails,s)}}return Un.VoiceProfileEnrollmentCancellationDetails=r,Un}var $n={},Bg;function dx(){if(Bg)return $n;Bg=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.VoiceProfileCancellationDetails=$n.VoiceProfileResult=void 0;const e=M(),t=B,n=b();let r=class{constructor(a,s){this.privReason=a,this.privProperties=new n.PropertyCollection,a===n.ResultReason.Canceled&&(t.Contracts.throwIfNullOrUndefined(s,"statusText"),this.privErrorDetails=s,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};$n.VoiceProfileResult=r;class i extends n.CancellationDetailsBase{constructor(a,s,c){super(a,s,c)}static fromResult(a){const s=n.CancellationReason.Error;let c=n.CancellationErrorCode.NoError;return a.properties&&(c=n.CancellationErrorCode[a.properties.getProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new i(s,a.errorDetails,c)}}return $n.VoiceProfileCancellationDetails=i,$n}var os={},Fg;function hx(){if(Fg)return os;Fg=1,Object.defineProperty(os,"__esModule",{value:!0}),os.VoiceProfilePhraseResult=void 0;const e=B,t=b();let n=class extends t.VoiceProfileResult{constructor(i,o,a,s){super(i,o),this.privPhrases=[],e.Contracts.throwIfNullOrUndefined(s,"phrase array"),this.privType=a,s&&s[0]&&(this.privPhrases=s)}get phrases(){return this.privPhrases}get type(){return this.privType}};return os.VoiceProfilePhraseResult=n,os}var as={},qg;function fx(){if(qg)return as;qg=1,Object.defineProperty(as,"__esModule",{value:!0}),as.VoiceProfileClient=void 0;const e=M(),t=HR(),n=B,r=b();let i=class extends r.Recognizer{constructor(a){n.Contracts.throwIfNullOrUndefined(a,"speechConfig");const s=a;n.Contracts.throwIfNull(s,"speechConfig"),super(t.AudioConfig.fromStreamInput(r.AudioInputStream.createPushStream()),s.properties,new e.VoiceProfileConnectionFactory),this.privProperties=s.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){n.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,s){const c=await this.privVoiceAdapter.createProfile(a,s);return new r.VoiceProfile(c[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,s){return this.privVoiceAdapter.getActivationPhrases(a,s)}async enrollProfileAsync(a,s){const c=s;return n.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=s,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,s,c,l){const u=c;return new e.VoiceServiceRecognizer(a,s,u,l,this)}async dispose(a){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.properties)}getResult(a,s){return new r.VoiceProfileResult(a.ok?s:r.ResultReason.Canceled,a.statusText)}};return as.VoiceProfileClient=i,as}var cs={},Ug;function vx(){if(Ug)return cs;Ug=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.SpeakerRecognizer=void 0;const e=M(),t=B,n=b();let r=class extends n.Recognizer{constructor(o,a){t.Contracts.throwIfNullOrUndefined(o,"speechConfig");const s=o;t.Contracts.throwIfNullOrUndefined(s,"speechConfig"),super(a,s.properties,new e.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,t.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=s.properties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){t.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}async recognizeOnceAsync(o){return t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(o)}async close(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(o){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const a=await this.privReco.recognizeSpeaker(o);return await this.implRecognizerStop(),a}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(o){return new e.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,a,s,c){const l=s;return new e.SpeakerServiceRecognizer(o,a,l,c,this)}async dispose(o){this.privDisposedSpeakerRecognizer||o&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(o))}};return cs.SpeakerRecognizer=r,cs}var ls={},$g;function gx(){if($g)return ls;$g=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.SpeakerIdentificationModel=void 0;const e=B,t=b();let n=class hP{constructor(i){if(this.privVoiceProfiles=[],this.privProfileIds=[],e.Contracts.throwIfNullOrUndefined(i,"VoiceProfiles"),i.length===0)throw new Error("Empty Voice Profiles array");for(const o of i){if(o.profileType!==t.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+o.profileId);this.privVoiceProfiles.push(o),this.privProfileIds.push(o.profileId)}}static fromProfiles(i){return new hP(i)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return ls.SpeakerIdentificationModel=n,ls}var us={},Wg;function mx(){if(Wg)return us;Wg=1,Object.defineProperty(us,"__esModule",{value:!0}),us.SpeakerVerificationModel=void 0;const e=B,t=b();let n=class fP{constructor(i){if(e.Contracts.throwIfNullOrUndefined(i,"VoiceProfile"),i.profileType===t.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=i}static fromProfile(i){return new fP(i)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===t.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return us.SpeakerVerificationModel=n,us}var ps={},Fh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdMode=void 0,function(t){t[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"}(e.LanguageIdMode||(e.LanguageIdMode={}))})(Fh);var Vg;function yx(){if(Vg)return ps;Vg=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.AutoDetectSourceLanguageConfig=void 0;const e=M(),t=B,n=b(),r=Fh;let i=class tc{constructor(){this.privProperties=new n.PropertyCollection,this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=r.LanguageIdMode.AtStart}static fromOpenRange(){const a=new tc;return a.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.AutoDetectSourceLanguagesOpenRangeOptionName),a.properties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),a}static fromLanguages(a){t.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const s=new tc;return s.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),s}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const s=new tc,c=[];return a.forEach(l=>{if(c.push(l.language),l.endpointId!==void 0&&l.endpointId!==""){const u=l.language+n.PropertyId.SpeechServiceConnection_EndpointId.toString();s.properties.setProperty(u,l.endpointId)}}),s.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),s}get properties(){return this.privProperties}set mode(a){a===r.LanguageIdMode.Continuous?(this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return ps.AutoDetectSourceLanguageConfig=i,ps}var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.AutoDetectSourceLanguageResult=void 0;const Hg=B;class Oc{constructor(t,n){Hg.Contracts.throwIfNullOrUndefined(t,"language"),Hg.Contracts.throwIfNullOrUndefined(n,"languageDetectionConfidence"),this.privLanguage=t,this.privLanguageDetectionConfidence=n}static fromResult(t){return new Oc(t.language,t.languageDetectionConfidence)}static fromConversationTranscriptionResult(t){return new Oc(t.language,t.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}Vl.AutoDetectSourceLanguageResult=Oc;var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.SourceLanguageConfig=void 0;const Sx=B;class qh{constructor(t,n){Sx.Contracts.throwIfNullOrUndefined(t,"language"),this.privLanguage=t,this.privEndpointId=n}static fromLanguage(t,n){return new qh(t,n)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}Hl.SourceLanguageConfig=qh;var pp={},Kg;function Cx(){return Kg||(Kg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResult=e.SpeakerRecognitionResultType=void 0;const t=M(),n=b();var r;(function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"})(r=e.SpeakerRecognitionResultType||(e.SpeakerRecognitionResultType={}));class i{constructor(s,c=n.ResultReason.RecognizedSpeaker,l=n.CancellationErrorCode.NoError,u=""){this.privProperties=new n.PropertyCollection;const p=s.scenario==="TextIndependentIdentification"?r.Identify:r.Verify;this.privReason=c,this.privReason!==n.ResultReason.Canceled?p===r.Identify?(this.privProfileId=s.identificationResult.identifiedProfile.profileId,this.privScore=s.identificationResult.identifiedProfile.score,this.privReason=n.ResultReason.RecognizedSpeakers):(this.privScore=s.verificationResult.score,s.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=n.ResultReason.NoMatch),s.verificationResult.profileId!==void 0&&s.verificationResult.profileId!==""&&(this.privProfileId=s.verificationResult.profileId)):(this.privErrorDetails=u,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[l])),this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(s))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}e.SpeakerRecognitionResult=i;class o extends n.CancellationDetailsBase{constructor(s,c,l){super(s,c,l)}static fromResult(s){const c=n.CancellationReason.Error;let l=n.CancellationErrorCode.NoError;return s.properties&&(l=n.CancellationErrorCode[s.properties.getProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new o(c,s.errorDetails,l)}}e.SpeakerRecognitionCancellationDetails=o}(pp)),pp}var dp={},Wn={},Jg;function vP(){if(Jg)return Wn;Jg=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.ConversationImpl=Wn.Conversation=void 0;const e=M(),t=z(),n=B,r=b();let i=class{constructor(){}static createConversationAsync(s,c,l,u){n.Contracts.throwIfNullOrUndefined(s,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrUndefined(s.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!s.subscriptionKey&&!s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceAuthorization_Token])&&n.Contracts.throwIfNullOrUndefined(s.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let p,d,h;return typeof c=="string"?(p=new o(s,c),(0,t.marshalPromiseToCallbacks)((async()=>{})(),l,u)):(p=new o(s),d=c,h=l,p.createConversationAsync(()=>{d&&d()},v=>{h&&h(v)})),p}};Wn.Conversation=i;class o extends i{constructor(s,c){if(super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case e.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case e.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const v=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(r.PropertyId.ConversationTranslator_Name);v!==void 0&&v.length>0&&v!==this.me.displayName&&this.changeNicknameAsync(v)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new r.PropertyCollection,this.privManager=new e.ConversationManager,s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])||s.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),c)this.privConversationId=c;else{s.targetLanguages.length===0&&s.addTargetLanguage(this.privLanguage),s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceResponse_ProfanityOption])||s.setProfanity(r.ProfanityOption.Masked);let d=s.getProperty(r.PropertyId[r.PropertyId.ConversationTranslator_Name]);d==null&&(d="Host"),n.Contracts.throwIfNullOrTooLong(d,"nickname",50),n.Contracts.throwIfNullOrTooShort(d,"nickname",2),s.setProperty(r.PropertyId[r.PropertyId.ConversationTranslator_Name],d)}this.privConfig=s;const u=s;n.Contracts.throwIfNull(u,"speechConfig"),this.privProperties=u.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var s,c;return(s=this.privParticipants.me)!=null&&s.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const s=this.conversationId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),l={};for(const p of e.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(l[p]=d)}return{id:s,participants:c,conversationProperties:l}}get canSend(){var s;return this.privIsConnected&&!((s=this.privParticipants.me)!=null&&s.isMuted)}get canSendAsHost(){var s;return this.privIsConnected&&((s=this.privParticipants.me)==null?void 0:s.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(s){n.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),this.privToken=s}set conversationTranslator(s){this.privConversationTranslator=s}onToken(s){this.privConversationTranslator.onToken(s)}createConversationAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,l=>{l||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=l,this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}startConversationAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=e.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}addParticipantAsync(s,c,l){n.Contracts.throwIfNullOrUndefined(s,"Participant"),(0,t.marshalPromiseToCallbacks)(this.addParticipantImplAsync(s),c,l)}joinConversationAsync(s,c,l,u,p){try{n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","conversationId")),n.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,s,d=>{n.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,u&&u(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteConversationAsync(s,c){(0,t.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),s,c)}async deleteConversationImplAsync(){n.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),n.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(s,c){(0,t.marshalPromiseToCallbacks)(this.endConversationImplAsync(),s,c)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}muteAllParticipantsAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}muteParticipantAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!0),()=>{this.handleCallback(c,l)},p=>{this.handleError(p,l)})}catch(u){this.handleError(u,l)}}removeParticipantAsync(s,c,l){try{if(n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&s.hasOwnProperty("id"))(0,t.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(s),c,l);else{n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),l);let u="";typeof s=="string"?u=s:s.hasOwnProperty("id")?u=s.id:s.hasOwnProperty("userId")&&(u=s.userId),n.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===u)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(u),()=>{this.handleCallback(c,l)},d=>{this.handleError(d,l)})}}catch(u){this.handleError(u,l)}}unlockConversationAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}unmuteAllParticipantsAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}unmuteParticipantAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!1),()=>{this.handleCallback(c,l)},p=>{this.handleError(p,l)})}catch(u){this.handleError(u,l)}}sendTextMessageAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","message")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),s.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(s),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}setTranslatedLanguagesAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfArrayEmptyOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","languages")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(s),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}changeNicknameAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(s),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(s){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await s.enforceAudioGating(),this.privTranscriberRecognizer=s,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const s=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:s,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(s){if(this.privParticipants.addOrUpdateParticipant(s)!==void 0&&this.privTranscriberRecognizer){const l=this.conversationInfo;return l.participants=[s],this.privTranscriberRecognizer.pushConversationEvent(l,"join")}}removeParticipantImplAsync(s){this.privParticipants.deleteParticipant(s.id);const c=this.conversationInfo;return c.participants=[s],this.privTranscriberRecognizer.pushConversationEvent(c,"leave")}async close(s){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(l){throw l}s&&this.dispose()}handleCallback(s,c){if(s){try{s()}catch(l){c&&c(l)}s=void 0}}handleError(s,c){if(c)if(s instanceof Error){const l=s;c(l.name+": "+l.message)}else c(s)}toParticipants(s){const c=this.privParticipants.participants.map(l=>this.toParticipant(l));return s?c:c.filter(l=>l.isHost===!1)}toParticipant(s){return new r.Participant(s.id,s.avatar,s.displayName,s.isHost,s.isMuted,s.isUsingTts,s.preferredLanguage,s.voice)}getMuteAllCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMuteCommand(s,c){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:s,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getEjectCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:s,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getChangeNicknameCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(s,"nickname"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:s,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMessageCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),n.Contracts.throwIfNullOrWhitespace(s,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:s,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return Wn.ConversationImpl=o,Wn}var Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});Kl.ConversationCommon=void 0;class Rx{constructor(t){this.privAudioConfig=t}handleCallback(t,n){if(t){try{t()}catch(r){n&&n(r)}t=void 0}}handleError(t,n){if(n)if(t instanceof Error){const r=t;n(r.name+": "+r.message)}else n(t)}}Kl.ConversationCommon=Rx;var ds={},Qg;function Px(){if(Qg)return ds;Qg=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.ConversationExpirationEventArgs=void 0;const e=b();let t=class extends e.SessionEventArgs{constructor(r,i){super(i),this.privExpirationTime=r}get expirationTime(){return this.privExpirationTime}};return ds.ConversationExpirationEventArgs=t,ds}var hs={},Gg;function wx(){if(Gg)return hs;Gg=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.ConversationParticipantsChangedEventArgs=void 0;const e=b();let t=class extends e.SessionEventArgs{constructor(r,i,o){super(o),this.privReason=r,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return hs.ConversationParticipantsChangedEventArgs=t,hs}var fs={},Xg;function Ex(){if(Xg)return fs;Xg=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.ConversationTranslationCanceledEventArgs=void 0;const e=da();let t=class extends e.CancellationEventArgsBase{};return fs.ConversationTranslationCanceledEventArgs=t,fs}var vs={},Yg;function Tx(){if(Yg)return vs;Yg=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.ConversationTranslationEventArgs=void 0;const e=b();let t=class extends e.RecognitionEventArgs{constructor(r,i,o){super(i,o),this.privResult=r}get result(){return this.privResult}};return vs.ConversationTranslationEventArgs=t,vs}var gs={},Zg;function Ix(){if(Zg)return gs;Zg=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.ConversationTranslationResult=void 0;const e=XR();let t=class extends e.TranslationRecognitionResult{constructor(r,i,o,a,s,c,l,u,p,d,h){super(i,a,s,c,l,u,void 0,void 0,p,d,h),this.privId=r,this.privOrigLang=o}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return gs.ConversationTranslationResult=t,gs}var hp={},ms={},fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.StringUtils=void 0;class _x{static formatString(t,n){if(!t)return"";if(!n)return t;let r="",i="";const o=c=>{r+=c},a=c=>{i+=c};let s=o;for(let c=0;c<t.length;c++){const l=t[c],u=c+1<t.length?t[c+1]:"";switch(l){case"{":u==="{"?(s("{"),c++):s=a;break;case"}":u==="}"?(s("}"),c++):(n.hasOwnProperty(i)&&(r+=n[i]),s=o,i="");break;default:s(l);break}}return r}}fa.StringUtils=_x;var em;function Ax(){if(em)return ms;em=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.ConversationTranslatorConnectionFactory=void 0;const e=Se(),t=fa,n=B,r=b(),i=ye,o=Tt,a=It(),s=M();let c=class gP extends a.ConnectionFactoryBase{constructor(u){super(),n.Contracts.throwIfNullOrUndefined(u,"convGetter"),this.privConvGetter=u}create(u,p,d){const h=u.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",v=this.privConvGetter().room,S=v.cognitiveSpeechRegion||u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,""),C={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(S),path:gP.CTS_VIRT_MIC_PATH,region:encodeURIComponent(S)};C[o.QueryParameterNames.Language]=encodeURIComponent(u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"")),C[o.QueryParameterNames.CtsMeetingId]=encodeURIComponent(v.roomId),C[o.QueryParameterNames.CtsDeviceId]=encodeURIComponent(v.participantId),C[o.QueryParameterNames.CtsIsParticipant]=v.isHost?"":"&"+o.QueryParameterNames.CtsIsParticipant;let f="";const g={},y={};if(h){f=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint),f||(f="wss://"+u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),f=t.StringUtils.formatString(f,C);const P=new URL(f);P.searchParams.forEach((T,E)=>{g[E]=T}),new s.TranscriberConnectionFactory().setQueryParams(g,u,f),g[o.QueryParameterNames.CtsMeetingId]=C[o.QueryParameterNames.CtsMeetingId],g[o.QueryParameterNames.CtsDeviceId]=C[o.QueryParameterNames.CtsDeviceId],v.isHost||(g[o.QueryParameterNames.CtsIsParticipant]=""),o.QueryParameterNames.Format in g||(g[o.QueryParameterNames.Format]="simple"),P.searchParams.forEach((T,E)=>{P.searchParams.set(E,g[E]),delete g[E]}),f=P.toString()}else{const P=new s.TranslationConnectionFactory;f=P.getEndpointUrl(u,!0),f=t.StringUtils.formatString(f,C),P.setQueryParams(g,u,f)}y[i.HeaderNames.ConnectionId]=d,y[e.RestConfigBase.configParams.token]=v.token,p.token&&(y[p.headerName]=p.token);const R=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return Promise.resolve(new e.WebsocketConnection(f,g,y,new s.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),R,d))}};return ms.ConversationTranslatorConnectionFactory=c,c.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",ms}var tm;function bx(){return tm||(tm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranslator=e.SpeechState=void 0;const t=M(),n=Ax(),r=z(),i=B,o=b(),a=vP(),s=Uh();var c;(function(p){p[p.Inactive=0]="Inactive",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected"})(c=e.SpeechState||(e.SpeechState={}));class l extends o.TranslationRecognizer{constructor(d,h,v,S){super(d,h,new n.ConversationTranslatorConnectionFactory(S)),this.privSpeechState=c.Inactive,v&&(this.privTranslator=v,this.sessionStarted=()=>{this.privSpeechState=c.Connected},this.sessionStopped=()=>{this.privSpeechState=c.Inactive},this.recognizing=(C,f)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,f)},this.recognized=async(C,f)=>{var g;(g=f.result)!=null&&g.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(f.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,f)},this.canceled=async()=>{if(this.privSpeechState!==c.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=c.Inactive}})}get state(){return this.privSpeechState}set state(d){this.privSpeechState=d}set authentication(d){this.privReco.authentication=d}onConnection(){this.privSpeechState=c.Connected}async onCancelSpeech(){this.privSpeechState=c.Inactive,await this.cancelSpeech()}fireCancelEvent(d){try{if(this.privTranslator.canceled){const h=new s.ConversationTranslationCanceledEventArgs(o.CancellationReason.Error,d,o.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,h)}}catch{}}async cancelSpeech(){var d;try{this.stopContinuousRecognitionAsync(),await((d=this.privReco)==null?void 0:d.disconnect()),this.privSpeechState=c.Inactive}catch{}}}class u extends s.ConversationCommon{constructor(d){super(d),this.privErrors=t.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new o.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var d;return(d=this.privConversation)==null?void 0:d.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===c.Connected||this.privCTRecognizer.state===c.Connecting||this.privConversation.isMutedByHost)}onToken(d){this.privCTRecognizer.authentication=d}setServiceProperty(d,h){const v=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));v[d]=h,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(v))}joinConversationAsync(d,h,v,S,C){try{if(typeof d=="string"){i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),C);let f=v;(f==null||f==="")&&(f=t.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=o.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(o.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(f),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage],f),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.ConversationTranslator_Name],h);const g=[o.PropertyId.SpeechServiceConnection_Host,o.PropertyId.ConversationTranslator_Host,o.PropertyId.SpeechServiceConnection_Endpoint,o.PropertyId.SpeechServiceConnection_ProxyHostName,o.PropertyId.SpeechServiceConnection_ProxyPassword,o.PropertyId.SpeechServiceConnection_ProxyPort,o.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const R of g){const P=this.privProperties.getProperty(R);if(P){const w=typeof R=="string"?R:o.PropertyId[R];this.privSpeechTranslationConfig.setProperty(w,P)}}const y=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));for(const R of Object.keys(y))this.privSpeechTranslationConfig.setServiceProperty(R,y[R],o.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(d,h,f,R=>{R||this.handleError(new Error(this.privErrors.permissionDeniedConnect),C),this.privSpeechTranslationConfig.authorizationToken=R,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(S,C)},P=>{this.handleError(P,C)})},R=>{this.handleError(R,C)})}else typeof d=="object"?(i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(o.PropertyId.ConversationTranslator_Name,h),this.privConversation=d,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=d.config,this.handleCallback(v,S)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),S)}catch(f){this.handleError(f,typeof v=="string"?C:S)}}leaveConversationAsync(d,h){(0,r.marshalPromiseToCallbacks)((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),d,h)}sendTextMessageAsync(d,h,v){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}",d)),this.privConversation.sendTextMessageAsync(d,h,v)}catch(S){this.handleError(S,v)}}startTranscribingAsync(d,h){(0,r.marshalPromiseToCallbacks)((async()=>{try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),h),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(v){throw this.privIsSpeaking=!1,await this.cancelSpeech(),v}})(),d,h)}stopTranscribingAsync(d,h){(0,r.marshalPromiseToCallbacks)((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((v,S)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(v,S)})}catch{await this.cancelSpeech()}})(),d,h)}isDisposed(){return this.privIsDisposed}dispose(d,h,v){(0,r.marshalPromiseToCallbacks)((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),h,v)}async cancelSpeech(){var d;try{this.privIsSpeaking=!1,await((d=this.privCTRecognizer)==null?void 0:d.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=o.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key],"");const d=()=>this.privConversation;this.privCTRecognizer=new l(this.privSpeechTranslationConfig,this.privAudioConfig,this,d)}catch(d){throw await this.cancelSpeech(),d}}startContinuousRecognition(){return new Promise((d,h)=>{this.privCTRecognizer.startContinuousRecognitionAsync(d,h)})}}e.ConversationTranslator=u}(hp)),hp}var ys={},nm;function kx(){if(nm)return ys;nm=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.ConversationTranscriber=void 0;const e=M(),t=ot,n=z(),r=B,i=b();let o=class mP extends i.Recognizer{constructor(s,c){const l=s;r.Contracts.throwIfNull(l,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(l.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(c,l.properties,new e.ConversationTranscriberConnectionFactory,s.tokenCredential),this.privProperties.setProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(s,c,l){const u=s;return c.properties.mergeTo(u.properties),new mP(s,l)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){r.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,s)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(s,c){(0,n.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),s,c)}stopTranscribingAsync(s,c){(0,n.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),s,c)}close(s,c){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),s,c)}async dispose(s){this.privDisposedRecognizer||(s&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(s))}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,c,l,u){const p=l;return u.isSpeakerDiarizationEnabled=!0,new e.ConversationTranscriptionServiceRecognizer(s,c,p,u,this)}};return ys.ConversationTranscriber=o,ys}var Vn={},rm;function xx(){if(rm)return Vn;rm=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.Participant=Vn.User=void 0;const e=b();class t{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}Vn.User=t;class n{constructor(i,o,a,s,c,l,u,p){this.privId=i,this.privAvatar=o,this.privDisplayName=a,this.privIsHost=s,this.privIsMuted=c,this.privIsUsingTts=l,this.privPreferredLanguage=u,this.privVoice=p,this.privProperties=new e.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,o,a){return new n(i,"",i,!1,!1,!1,o,a)}}return Vn.Participant=n,Vn}var yP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParticipantChangedReason=void 0,function(t){t[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"}(e.ParticipantChangedReason||(e.ParticipantChangedReason={}))})(yP);var Hn={},im;function Ox(){if(im)return Hn;im=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.MeetingImpl=Hn.Meeting=void 0;const e=M(),t=z(),n=B,r=b();let i=class{constructor(){}static createMeetingAsync(s,c,l,u){if(n.Contracts.throwIfNullOrUndefined(s,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrUndefined(s.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),n.Contracts.throwIfNull(c,"meetingId"),c.length===0)throw new Error("meetingId cannot be empty");!s.subscriptionKey&&!s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceAuthorization_Token])&&n.Contracts.throwIfNullOrUndefined(s.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const p=new o(s,c);return(0,t.marshalPromiseToCallbacks)((async()=>{})(),l,u),p}};Hn.Meeting=i;class o extends i{constructor(s,c){super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case e.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case e.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const v=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(r.PropertyId.ConversationTranslator_Name);v!==void 0&&v.length>0&&v!==this.me.displayName&&this.changeNicknameAsync(v)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new r.PropertyCollection,this.privManager=new e.ConversationManager,s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])||s.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=c,this.privConfig=s;const u=s;n.Contracts.throwIfNull(u,"speechConfig"),this.privProperties=u.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var s,c;return(s=this.privParticipants.me)!=null&&s.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const s=this.meetingId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),l={};for(const p of e.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(l[p]=d)}return{id:s,participants:c,meetingProperties:l}}get canSend(){var s;return this.privIsConnected&&!((s=this.privParticipants.me)!=null&&s.isMuted)}get canSendAsHost(){var s;return this.privIsConnected&&((s=this.privParticipants.me)==null?void 0:s.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(s){n.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),this.privToken=s}createMeetingAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,l=>{l||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=l,this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}startMeetingAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}addParticipantAsync(s,c,l){n.Contracts.throwIfNullOrUndefined(s,"Participant"),(0,t.marshalPromiseToCallbacks)(this.addParticipantImplAsync(s),c,l)}joinMeetingAsync(s,c,l,u,p){try{n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","conversationId")),n.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,s,d=>{n.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,u&&u(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteMeetingAsync(s,c){(0,t.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),s,c)}async deleteMeetingImplAsync(){n.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),n.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(s,c){(0,t.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),s,c)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}muteAllParticipantsAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}muteParticipantAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!0),()=>{this.handleCallback(c,l)},p=>{this.handleError(p,l)})}catch(u){this.handleError(u,l)}}removeParticipantAsync(s,c,l){try{if(n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&s.hasOwnProperty("id"))(0,t.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(s),c,l);else{n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),l);let u="";typeof s=="string"?u=s:s.hasOwnProperty("id")?u=s.id:s.hasOwnProperty("userId")&&(u=s.userId),n.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===u)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(u),()=>{this.handleCallback(c,l)},d=>{this.handleError(d,l)})}}catch(u){this.handleError(u,l)}}unlockMeetingAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}unmuteAllParticipantsAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}unmuteParticipantAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!1),()=>{this.handleCallback(c,l)},p=>{this.handleError(p,l)})}catch(u){this.handleError(u,l)}}sendTextMessageAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","message")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),s.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(s),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}setTranslatedLanguagesAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfArrayEmptyOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","languages")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(s),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}changeNicknameAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(s),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(s){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await s.enforceAudioGating(),this.privTranscriberRecognizer=s,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const s=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:s,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(s){if(this.privParticipants.addOrUpdateParticipant(s)!==void 0&&this.privTranscriberRecognizer){const l=this.meetingInfo;return l.participants=[s],this.privTranscriberRecognizer.pushMeetingEvent(l,"join")}}removeParticipantImplAsync(s){this.privParticipants.deleteParticipant(s.id);const c=this.meetingInfo;return c.participants=[s],this.privTranscriberRecognizer.pushMeetingEvent(c,"leave")}async close(s){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(l){throw l}s&&this.dispose()}handleCallback(s,c){if(s){try{s()}catch(l){c&&c(l)}s=void 0}}handleError(s,c){if(c)if(s instanceof Error){const l=s;c(l.name+": "+l.message)}else c(s)}toParticipants(s){const c=this.privParticipants.participants.map(l=>this.toParticipant(l));return s?c:c.filter(l=>l.isHost===!1)}toParticipant(s){return new r.Participant(s.id,s.avatar,s.displayName,s.isHost,s.isMuted,s.isUsingTts,s.preferredLanguage,s.voice)}getMuteAllCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMuteCommand(s,c){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:s,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getEjectCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:s,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getChangeNicknameCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(s,"nickname"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:s,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMessageCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),n.Contracts.throwIfNullOrWhitespace(s,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:s,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return Hn.MeetingImpl=o,Hn}var Ss={},sm;function Nx(){if(sm)return Ss;sm=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.MeetingTranscriptionCanceledEventArgs=void 0;const e=da();class t extends e.CancellationEventArgsBase{}return Ss.MeetingTranscriptionCanceledEventArgs=t,Ss}var Cs={},om;function Mx(){if(om)return Cs;om=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.MeetingTranscriber=void 0;const e=M(),t=z(),n=B,r=b(),i=Uh();let o=class{constructor(s){this.privAudioConfig=s,this.privProperties=new r.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return r.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){n.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}joinMeetingAsync(s,c,l){const u=s;n.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new e.TranscriberRecognizer(s.config,this.privAudioConfig),n.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,t.marshalPromiseToCallbacks)(u.connectTranscriberRecognizer(this.privRecognizer),c,l)}startTranscribingAsync(s,c){this.privRecognizer.startContinuousRecognitionAsync(s,c)}stopTranscribingAsync(s,c){this.privRecognizer.stopContinuousRecognitionAsync(s,c)}leaveMeetingAsync(s,c){this.privRecognizer.disconnectCallbacks(),(0,t.marshalPromiseToCallbacks)((async()=>{})(),s,c)}close(s,c){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),s,c)}async dispose(s){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),s&&(this.privDisposedRecognizer=!0))}};return Cs.MeetingTranscriber=o,Cs}var Rs={},am;function Dx(){if(am)return Rs;am=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.ConversationTranscriptionResult=void 0;const e=b();let t=class extends e.RecognitionResult{constructor(r,i,o,a,s,c,l,u,p,d,h){super(r,i,o,a,s,c,l,p,d,h),this.privSpeakerId=u}get speakerId(){return this.privSpeakerId}};return Rs.ConversationTranscriptionResult=t,Rs}var cm;function Uh(){return cm||(cm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranscriptionResult=e.MeetingTranscriber=e.MeetingTranscriptionCanceledEventArgs=e.MeetingImpl=e.Meeting=e.ParticipantChangedReason=e.User=e.Participant=e.ConversationTranscriber=e.ConversationTranslator=e.ConversationTranslationResult=e.ConversationTranslationEventArgs=e.ConversationTranslationCanceledEventArgs=e.ConversationParticipantsChangedEventArgs=e.ConversationExpirationEventArgs=e.ConversationCommon=e.ConversationImpl=e.Conversation=void 0;var t=vP();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return t.Conversation}}),Object.defineProperty(e,"ConversationImpl",{enumerable:!0,get:function(){return t.ConversationImpl}});var n=Kl;Object.defineProperty(e,"ConversationCommon",{enumerable:!0,get:function(){return n.ConversationCommon}});var r=Px();Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return r.ConversationExpirationEventArgs}});var i=wx();Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var o=Ex();Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return o.ConversationTranslationCanceledEventArgs}});var a=Tx();Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var s=Ix();Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return s.ConversationTranslationResult}});var c=bx();Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return c.ConversationTranslator}});var l=kx();Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return l.ConversationTranscriber}});var u=xx();Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return u.Participant}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return u.User}});var p=yP;Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var d=Ox();Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return d.Meeting}}),Object.defineProperty(e,"MeetingImpl",{enumerable:!0,get:function(){return d.MeetingImpl}});var h=Nx();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var v=Mx();Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return v.MeetingTranscriber}});var S=Dx();Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return S.ConversationTranscriptionResult}})}(dp)),dp}var Kn={},lm;function $h(){if(lm)return Kn;lm=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.SynthesisRequest=Kn.Synthesizer=void 0;const e=M(),t=z(),n=B,r=b();let i=class SP{constructor(s){const c=s;n.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new t.Queue,this.tokenCredential=s.tokenCredential}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){n.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===e.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(s){const c={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let l=this.properties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),u=this.properties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,""),p=SP.XMLEncode(s);return this.autoDetectSourceLanguage?l="en-US":u=u||c[l],u&&(p=`<voice name='${u}'>${p}</voice>`),p=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${l}'>${p}</speak>`,p}async dispose(s){this.privDisposed||(s&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const s=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(s.text,s.isSSML,s.requestId,s.cb,s.err,s.dataStream)}}createSynthesizerConfig(s){return new e.SynthesizerConfig(s,this.privProperties)}implCommonSynthesizeSetup(){let s=typeof window<"u"?"Browser":"Node",c="unknown",l="unknown";typeof navigator<"u"&&(s=s+"/"+navigator.platform,c=navigator.userAgent,l=navigator.appVersion);const u=this.createSynthesizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(s,c,l)))),p=this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key,void 0),d=p&&p!==""?new e.CognitiveSubscriptionKeyAuthentication(p):this.tokenCredential?new e.CognitiveTokenAuthentication(async()=>{try{const h=await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return(h==null?void 0:h.token)??""}catch(h){throw h}},async()=>{try{const h=await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return(h==null?void 0:h.token)??""}catch(h){throw h}}):new e.CognitiveTokenAuthentication(()=>{const h=this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)},()=>{const h=this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)});this.privAdapter=this.createSynthesisAdapter(d,this.privConnectionFactory,u),this.privRestAdapter=this.createRestSynthesisAdapter(d,u)}static XMLEncode(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Kn.Synthesizer=i;class o{constructor(s,c,l,u,p,d){this.requestId=s,this.text=c,this.isSSML=l,this.cb=u,this.err=p,this.dataStream=d}}return Kn.SynthesisRequest=o,Kn}var Ps={},um;function jx(){if(um)return Ps;um=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.SpeechSynthesizer=void 0;const e=M(),t=z(),n=pa,r=Dn,i=Pe,o=B,a=b(),s=$h();let c=class CP extends a.Synthesizer{constructor(u,p){super(u),p!==null&&(p===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=p),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(u,p,d){const h=u;return p.properties.mergeTo(h.properties),new CP(u,d)}speakTextAsync(u,p,d,h){this.speakImpl(u,!1,p,d,h)}speakSsmlAsync(u,p,d,h){this.speakImpl(u,!0,p,d,h)}async getVoicesAsync(u=""){return this.getVoices(u)}close(u,p){o.Contracts.throwIfDisposed(this.privDisposed),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),u,p)}get internalData(){return this.privAdapter}createSynthesisAdapter(u,p,d){return new e.SpeechSynthesisAdapter(u,p,d,this,this.audioConfig)}createRestSynthesisAdapter(u,p){return new e.SynthesisRestAdapter(p,u)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(u,p,d,h,v){try{o.Contracts.throwIfDisposed(this.privDisposed);const S=(0,t.createNoDashGuid)();let C;v instanceof a.PushAudioOutputStreamCallback?C=new i.PushAudioOutputStreamImpl(v):v instanceof a.PullAudioOutputStream?C=v:v!==void 0?C=new n.AudioFileWriter(v):C=void 0,this.synthesisRequestQueue.enqueue(new s.SynthesisRequest(S,u,p,f=>{if(this.privSynthesizing=!1,d)try{d(f)}catch(g){h&&h(g)}d=void 0,this.adapterSpeak().catch(()=>{})},f=>{h&&h(f)},C)),this.adapterSpeak().catch(()=>{})}catch(S){if(h)if(S instanceof Error){const C=S;h(C.name+": "+C.message)}else h(S);this.dispose(!0).catch(()=>{})}}async getVoices(u){const p=(0,t.createNoDashGuid)(),d=await this.privRestAdapter.getVoicesList(p);if(d.ok&&Array.isArray(d.json)){let h=d.json;return u&&u.length>0&&(h=h.filter(v=>!!v.Locale&&v.Locale.toLowerCase()===u.toLowerCase())),new a.SynthesisVoicesResult(p,h,void 0)}else return new a.SynthesisVoicesResult(p,void 0,`Error: ${d.status}: ${d.statusText}`)}};return Ps.SpeechSynthesizer=c,Ps}var Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.SynthesisResult=void 0;class zx{constructor(t,n,r,i){this.privResultId=t,this.privReason=n,this.privErrorDetails=r,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}Jl.SynthesisResult=zx;var ws={},pm;function Lx(){if(pm)return ws;pm=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.SpeechSynthesisResult=void 0;const e=b();let t=class extends e.SynthesisResult{constructor(r,i,o,a,s,c){super(r,i,a,s),this.privAudioData=o,this.privAudioDuration=c}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return ws.SpeechSynthesisResult=t,ws}var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.SpeechSynthesisEventArgs=void 0;class Bx{constructor(t){this.privResult=t}get result(){return this.privResult}}Ql.SpeechSynthesisEventArgs=Bx;var Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.SpeechSynthesisWordBoundaryEventArgs=void 0;class Fx{constructor(t,n,r,i,o,a){this.privAudioOffset=t,this.privDuration=n,this.privText=r,this.privWordLength=i,this.privTextOffset=o,this.privBoundaryType=a}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}Gl.SpeechSynthesisWordBoundaryEventArgs=Fx;var Xl={};Object.defineProperty(Xl,"__esModule",{value:!0});Xl.SpeechSynthesisBookmarkEventArgs=void 0;class qx{constructor(t,n){this.privAudioOffset=t,this.privText=n}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}Xl.SpeechSynthesisBookmarkEventArgs=qx;var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.SpeechSynthesisVisemeEventArgs=void 0;class Ux{constructor(t,n,r){this.privAudioOffset=t,this.privVisemeId=n,this.privAnimation=r}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}Yl.SpeechSynthesisVisemeEventArgs=Ux;var RP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisBoundaryType=void 0,function(t){t.Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"}(e.SpeechSynthesisBoundaryType||(e.SpeechSynthesisBoundaryType={}))})(RP);var Es={},dm;function $x(){if(dm)return Es;dm=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.SynthesisVoicesResult=void 0;const e=b();let t=class extends e.SynthesisResult{constructor(r,i,o){if(Array.isArray(i)){super(r,e.ResultReason.VoicesListRetrieved,void 0,new e.PropertyCollection),this.privVoices=[];for(const a of i)this.privVoices.push(new e.VoiceInfo(a))}else super(r,e.ResultReason.Canceled,o||"Error information unavailable",new e.PropertyCollection)}get voices(){return this.privVoices}};return Es.SynthesisVoicesResult=t,Es}var PP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=void 0;var t;(function(a){a[a.Unknown=0]="Unknown",a[a.Female=1]="Female",a[a.Male=2]="Male",a[a.Neutral=3]="Neutral"})(t=e.SynthesisVoiceGender||(e.SynthesisVoiceGender={}));var n;(function(a){a[a.Unknown=0]="Unknown",a[a.OnlineNeural=1]="OnlineNeural",a[a.OnlineStandard=2]="OnlineStandard",a[a.OfflineNeural=3]="OfflineNeural",a[a.OfflineStandard=4]="OfflineStandard",a[a.OnlineNeuralHD=5]="OnlineNeuralHD"})(n=e.SynthesisVoiceType||(e.SynthesisVoiceType={}));const r={[t[t.Neutral]]:t.Neutral,[t[t.Male]]:t.Male,[t[t.Female]]:t.Female},i={Neural:n.OnlineNeural,NeuralHD:n.OnlineNeuralHD};class o{constructor(s){if(this.privStyleList=[],s){if(this.privName=s.Name,this.privLocale=s.Locale,this.privShortName=s.ShortName,this.privLocaleName=s.LocaleName,this.privDisplayName=s.DisplayName,this.privLocalName=s.LocalName,this.privVoiceType=i[s.VoiceType]||n.Unknown,this.privGender=r[s.Gender]||t.Unknown,s.StyleList&&Array.isArray(s.StyleList))for(const c of s.StyleList)this.privStyleList.push(c);this.privSampleRateHertz=s.SampleRateHertz,this.privStatus=s.Status,s.ExtendedPropertyMap&&(this.privExtendedPropertyMap=s.ExtendedPropertyMap),this.privWordsPerMinute=s.WordsPerMinute,Array.isArray(s.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...s.SecondaryLocaleList]),Array.isArray(s.RolePlayList)&&(this.privRolePlayList=[...s.RolePlayList]),s.VoiceTag&&(this.privVoiceTag=s.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}e.VoiceInfo=o})(PP);var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});Zl.SpeakerAudioDestination=void 0;const Jn=z(),Wx=Pe,He=Mn,Vx=60*30,hm={[He.AudioFormatTag.PCM]:"audio/wav",[He.AudioFormatTag.MuLaw]:"audio/x-wav",[He.AudioFormatTag.MP3]:"audio/mpeg",[He.AudioFormatTag.OGG_OPUS]:"audio/ogg",[He.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[He.AudioFormatTag.ALaw]:"audio/x-wav",[He.AudioFormatTag.FLAC]:"audio/flac",[He.AudioFormatTag.AMR_WB]:"audio/amr-wb",[He.AudioFormatTag.G722]:"audio/G722"};class Hx{constructor(t){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=t||(0,Jn.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(t,n,r){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(t),this.updateSourceBuffer().then(()=>{n&&n()},i=>{r&&r(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(t),this.privBytesReceived+=t.byteLength)}close(t,n){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{t&&t()},r=>{n&&n(r)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===He.AudioFormatTag.PCM||this.privFormat.formatTag===He.AudioFormatTag.MuLaw||this.privFormat.formatTag===He.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then(()=>{r=this.privFormat.addHeader(r);const i=new Blob([r],{type:hm[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{t&&t()},o=>{n&&n(o)})},i=>{n&&n(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(t){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=t;const n=hm[this.privFormat.formatTag];n===void 0?console.warn(`Unknown mimeType for format ${He.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(n)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=Vx,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(n),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(r=>{Jn.Events.instance.onEvent(new Jn.BackgroundEvent(r))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(r=>{Jn.Events.instance.onEvent(new Jn.BackgroundEvent(r))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(r=>{Jn.Events.instance.onEvent(new Jn.BackgroundEvent(r))})):(console.warn(`Format ${He.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new Wx.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var t;return((t=this.privAudio)==null?void 0:t.volume)??-1}set volume(t){this.privAudio&&(this.privAudio.volume=t)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(t,n){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{t&&t()},r=>{n&&n(r)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const t=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(t)}catch{this.privAudioBuffer.unshift(t),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}Zl.SpeakerAudioDestination=Hx;var Ts={},fm;function Kx(){if(fm)return Ts;fm=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.ConversationTranscriptionCanceledEventArgs=void 0;const e=da();let t=class extends e.CancellationEventArgsBase{};return Ts.ConversationTranscriptionCanceledEventArgs=t,Ts}var Is={},vm;function Jx(){if(vm)return Is;vm=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.MeetingTranscriptionCanceledEventArgs=void 0;const e=da();let t=class extends e.CancellationEventArgsBase{};return Is.MeetingTranscriptionCanceledEventArgs=t,Is}var wP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGradingSystem=void 0,function(t){t[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"}(e.PronunciationAssessmentGradingSystem||(e.PronunciationAssessmentGradingSystem={}))})(wP);var EP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGranularity=void 0,function(t){t[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"}(e.PronunciationAssessmentGranularity||(e.PronunciationAssessmentGranularity={}))})(EP);var _s={},gm;function Qx(){if(gm)return _s;gm=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.PronunciationAssessmentConfig=void 0;const e=B,t=b();let n=class TP{constructor(i,o=t.PronunciationAssessmentGradingSystem.FivePoint,a=t.PronunciationAssessmentGranularity.Phoneme,s=!1){e.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new t.PropertyCollection,this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_GradingSystem,t.PronunciationAssessmentGradingSystem[o]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Granularity,t.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,String(s))}static fromJSON(i){e.Contracts.throwIfNullOrUndefined(i,"json");const o=new TP("");return o.privProperties=new t.PropertyCollection,o.properties.setProperty(t.PropertyId.PronunciationAssessment_Json,i),o}toJSON(){return this.updateJson(),this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const o=i.internalData;o.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,o.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(t.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,o.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){e.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){e.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const o=i?"true":"false";this.properties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,o)}get enableMiscue(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}enableContentAssessmentWithTopic(i){this.privContentAssessmentTopic=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Json,"{}"),o=JSON.parse(i),a=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText);a&&(o.referenceText=a);const s=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_GradingSystem);s&&(o.gradingSystem=s);const c=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Granularity);c&&(o.granularity=c),this.privPhonemeAlphabet&&(o.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(o.nbestPhonemeCount=this.privNBestPhonemeCount),o.enableProsodyAssessment=this.privEnableProsodyAssessment,o.dimension="Comprehensive",this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue)&&(o.enableMiscue=this.enableMiscue),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Params,JSON.stringify(o))}};return _s.PronunciationAssessmentConfig=n,_s}var Qn={},mm;function Gx(){if(mm)return Qn;mm=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.PronunciationAssessmentResult=Qn.ContentAssessmentResult=void 0;const e=B,t=b();class n{constructor(o){this.privPronJson=o}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}Qn.ContentAssessmentResult=n;let r=class IP{constructor(o){const a=JSON.parse(o);e.Contracts.throwIfNullOrUndefined(a.NBest[0],"NBest"),this.privPronJson=a.NBest[0]}static fromResult(o){e.Contracts.throwIfNullOrUndefined(o,"result");const a=o.properties.getProperty(t.PropertyId.SpeechServiceResponse_JsonResult);return e.Contracts.throwIfNullOrUndefined(a,"json"),new IP(a)}get detailResult(){return this.privPronJson}get accuracyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.AccuracyScore}get pronunciationScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.PronScore}get completenessScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.CompletenessScore}get fluencyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.FluencyScore}get prosodyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new n(this.detailResult)}};return Qn.PronunciationAssessmentResult=r,Qn}var As={},ym;function Xx(){if(ym)return As;ym=1,Object.defineProperty(As,"__esModule",{value:!0}),As.AvatarConfig=void 0;const e=B,t=b();let n=class{constructor(i,o,a){this.privCustomized=!1,this.privUseBuiltInVoice=!1,e.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=o,a===void 0&&(a=new t.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(i){this.privUseBuiltInVoice=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(i){this.privBackgroundImage=i}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(i){this.privRemoteIceServers=i}};return As.AvatarConfig=n,As}var _P={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AvatarEventArgs=e.AvatarEventTypes=void 0,function(n){n.SwitchedToSpeaking="SwitchedToSpeaking",n.SwitchedToIdle="SwitchedToIdle",n.SessionClosed="SessionClosed"}(e.AvatarEventTypes||(e.AvatarEventTypes={}));class t{constructor(r,i){this.privOffset=r,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}e.AvatarEventArgs=t})(_P);var bs={},ks={},Sm;function AP(){if(Sm)return ks;Sm=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.SpeechSynthesisConnectionFactory=void 0;const e=Se(),t=b(),n=It(),r=M(),i=ye,o=Tt;let a=class{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}async create(c,l,u){let p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),h=n.ConnectionFactoryBase.getHostSuffix(d),v=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),S=v===void 0?"tts":"voice",C=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+d+"."+S+".speech"+h),f={},g={};if(l.token!==void 0&&l.token!==""&&(g[l.headerName]=l.token),g[i.HeaderNames.ConnectionId]=u,v!==void 0&&v!==""&&(!p||p.search(o.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(f[o.QueryParameterNames.CustomVoiceDeploymentId]=v),c.avatarEnabled&&(!p||p.search(o.QueryParameterNames.EnableAvatar)===-1)&&(f[o.QueryParameterNames.EnableAvatar]="true"),p){const R=new URL(p),P=R.pathname;(P===""||P==="/")&&(R.pathname=this.synthesisUri,p=await n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(R.toString()))}p||(p=C+this.synthesisUri),c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,p);const y=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(p,f,g,new r.WebsocketMessageFormatter,e.ProxyInfo.fromParameters(c.parameters),y,u)}};return ks.SpeechSynthesisConnectionFactory=a,ks}var Cm;function Yx(){if(Cm)return bs;Cm=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.AvatarSynthesizer=void 0;const e=AP(),t=M(),n=z(),r=Dn,i=b(),o=B,a=$h();let s=class extends i.Synthesizer{constructor(l,u){super(l),o.Contracts.throwIfNullOrUndefined(u,"avatarConfig"),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.privAvatarConfig=u,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(l){o.Contracts.throwIfNullOrUndefined(l,"peerConnection"),this.privIceServers=l.getConfiguration().iceServers,o.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const u=new n.Deferred;l.onicegatheringstatechange=()=>{n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering state: "+l.iceGatheringState,n.EventType.Debug)),l.iceGatheringState==="complete"&&(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering complete.",n.EventType.Info)),u.resolve())},l.onicecandidate=S=>{S.candidate?n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice candidate: "+S.candidate.candidate,n.EventType.Debug)):(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice candidate: complete",n.EventType.Debug)),u.resolve())},setTimeout(()=>{l.iceGatheringState!=="complete"&&(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering timeout.",n.EventType.Warning)),u.resolve())},2e3);const p=await l.createOffer();await l.setLocalDescription(p),await u.promise,n.Events.instance.onEvent(new n.PlatformEvent("peer connection: got local SDP.",n.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(l.localDescription));const d=await this.speak("",!1);if(d.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties);const h=atob(d.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),v=new RTCSessionDescription(JSON.parse(h));return await l.setRemoteDescription(v),new i.SynthesisResult(d.resultId,d.reason,void 0,d.properties)}async speakTextAsync(l){const u=await this.speak(l,!1);return new i.SynthesisResult(u.resultId,u.reason,u.errorDetails,u.properties)}async speakSsmlAsync(l){const u=await this.speak(l,!0);return new i.SynthesisResult(u.resultId,u.reason,u.errorDetails,u.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return o.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(l,u,p){return new t.AvatarSynthesisAdapter(l,u,p,this,this.privAvatarConfig)}createRestSynthesisAdapter(l,u){}createSynthesizerConfig(l){const u=super.createSynthesizerConfig(l);return u.avatarEnabled=!0,u}async speak(l,u){const p=(0,n.createNoDashGuid)(),d=new n.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(p,l,u,h=>{d.resolve(h),this.privSynthesizing=!1,this.adapterSpeak()},h=>{d.reject(h),this.privSynthesizing=!1})),this.adapterSpeak(),d.promise}};return bs.AvatarSynthesizer=s,bs}var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.AvatarVideoFormat=Zr.Coordinate=void 0;class Zx{constructor(t,n){this.x=t,this.y=n}}Zr.Coordinate=Zx;class eO{constructor(t="H264",n=2e6,r=1920,i=1080){this.codec=t,this.bitrate=n,this.width=r,this.height=i}setCropRange(t,n){this.cropRange={bottomRight:n,topLeft:t}}}Zr.AvatarVideoFormat=eO;var xs={},Rm;function tO(){if(Rm)return xs;Rm=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.AvatarWebRTCConnectionResult=void 0;const e=b();let t=class extends e.SynthesisResult{constructor(r,i,o,a,s){super(i,o,a,s),this.privSDPAnswer=r}get SDPAnswer(){return this.privSDPAnswer}};return xs.AvatarWebRTCConnectionResult=t,xs}var Os={},Pm;function nO(){if(Pm)return Os;Pm=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.Diagnostics=void 0;const e=Se(),t=z();let n=class{static SetLoggingLevel(i){this.privListener=new e.ConsoleLoggingListener(i),t.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}static set onLogOutput(i){this.privListener&&(this.privListener.logCallback=i)}};return Os.Diagnostics=n,n.privListener=void 0,Os}var wm;function b(){return wm||(wm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionEventArgs=e.CancellationErrorCode=e.CancellationDetails=e.CancellationDetailsBase=e.IntentRecognitionCanceledEventArgs=e.TranslationRecognitionCanceledEventArgs=e.NoMatchDetails=e.NoMatchReason=e.Translations=e.TranslationRecognizer=e.VoiceProfileType=e.IntentRecognizer=e.SpeechRecognizer=e.Recognizer=e.PropertyId=e.PropertyCollection=e.SpeechTranslationConfigImpl=e.SpeechTranslationConfig=e.SpeechConfigImpl=e.SpeechConfig=e.ResultReason=e.TranslationSynthesisResult=e.TranslationRecognitionResult=e.TranslationSynthesisEventArgs=e.TranslationRecognitionEventArgs=e.SpeechRecognitionCanceledEventArgs=e.MeetingTranscriptionEventArgs=e.ConversationTranscriptionEventArgs=e.SpeechRecognitionEventArgs=e.LanguageUnderstandingModel=e.IntentRecognitionResult=e.SpeechRecognitionResult=e.RecognitionResult=e.IntentRecognitionEventArgs=e.OutputFormat=e.RecognitionEventArgs=e.SessionEventArgs=e.KeywordRecognitionModel=e.PushAudioOutputStreamCallback=e.PullAudioInputStreamCallback=e.CancellationReason=e.PushAudioOutputStream=e.PullAudioOutputStream=e.AudioOutputStream=e.PushAudioInputStream=e.PullAudioInputStream=e.AudioInputStream=e.AudioFormatTag=e.AudioStreamFormat=e.AudioConfig=void 0,e.SpeechSynthesisEventArgs=e.SpeechSynthesisResult=e.SynthesisResult=e.SpeechSynthesizer=e.SpeechSynthesisOutputFormat=e.Synthesizer=e.User=e.ParticipantChangedReason=e.Participant=e.MeetingTranscriber=e.Meeting=e.ConversationTranscriptionResult=e.ConversationTranscriber=e.ConversationTranslator=e.ConversationTranslationResult=e.ConversationTranslationEventArgs=e.ConversationTranslationCanceledEventArgs=e.ConversationParticipantsChangedEventArgs=e.ConversationExpirationEventArgs=e.Conversation=e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResultType=e.SpeakerRecognitionResult=e.SourceLanguageConfig=e.AutoDetectSourceLanguageResult=e.AutoDetectSourceLanguageConfig=e.SpeakerVerificationModel=e.SpeakerIdentificationModel=e.SpeakerRecognizer=e.VoiceProfileClient=e.VoiceProfilePhraseResult=e.VoiceProfileCancellationDetails=e.VoiceProfileResult=e.VoiceProfileEnrollmentCancellationDetails=e.VoiceProfileEnrollmentResult=e.VoiceProfile=e.ConnectionMessage=e.ConnectionMessageEventArgs=e.BaseAudioPlayer=e.ProfanityOption=e.ServicePropertyChannel=e.TurnStatusReceivedEventArgs=e.ActivityReceivedEventArgs=e.DialogServiceConnector=e.CustomCommandsConfig=e.BotFrameworkConfig=e.DialogServiceConfig=e.PhraseListGrammar=e.Connection=e.ServiceEventArgs=void 0,e.LogLevel=e.Diagnostics=e.AvatarWebRTCConnectionResult=e.Coordinate=e.AvatarVideoFormat=e.AvatarSynthesizer=e.AvatarEventArgs=e.AvatarConfig=e.LanguageIdMode=e.PronunciationAssessmentResult=e.PronunciationAssessmentConfig=e.PronunciationAssessmentGranularity=e.PronunciationAssessmentGradingSystem=e.MeetingTranscriptionCanceledEventArgs=e.ConversationTranscriptionCanceledEventArgs=e.SpeakerAudioDestination=e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=e.SynthesisVoicesResult=e.SpeechSynthesisBoundaryType=e.SpeechSynthesisVisemeEventArgs=e.SpeechSynthesisBookmarkEventArgs=e.SpeechSynthesisWordBoundaryEventArgs=void 0;var t=HR();Object.defineProperty(e,"AudioConfig",{enumerable:!0,get:function(){return t.AudioConfig}});var n=Mn;Object.defineProperty(e,"AudioStreamFormat",{enumerable:!0,get:function(){return n.AudioStreamFormat}}),Object.defineProperty(e,"AudioFormatTag",{enumerable:!0,get:function(){return n.AudioFormatTag}});var r=qR();Object.defineProperty(e,"AudioInputStream",{enumerable:!0,get:function(){return r.AudioInputStream}}),Object.defineProperty(e,"PullAudioInputStream",{enumerable:!0,get:function(){return r.PullAudioInputStream}}),Object.defineProperty(e,"PushAudioInputStream",{enumerable:!0,get:function(){return r.PushAudioInputStream}});var i=Pe;Object.defineProperty(e,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(e,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(e,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var o=KR;Object.defineProperty(e,"CancellationReason",{enumerable:!0,get:function(){return o.CancellationReason}});var a=xl;Object.defineProperty(e,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var s=Ol;Object.defineProperty(e,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return s.PushAudioOutputStreamCallback}});var c=Nl;Object.defineProperty(e,"KeywordRecognitionModel",{enumerable:!0,get:function(){return c.KeywordRecognitionModel}});var l=Ml;Object.defineProperty(e,"SessionEventArgs",{enumerable:!0,get:function(){return l.SessionEventArgs}});var u=kk();Object.defineProperty(e,"RecognitionEventArgs",{enumerable:!0,get:function(){return u.RecognitionEventArgs}});var p=JR;Object.defineProperty(e,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var d=xk();Object.defineProperty(e,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return d.IntentRecognitionEventArgs}});var h=Dl;Object.defineProperty(e,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var v=Nk();Object.defineProperty(e,"SpeechRecognitionResult",{enumerable:!0,get:function(){return v.SpeechRecognitionResult}});var S=Mk();Object.defineProperty(e,"IntentRecognitionResult",{enumerable:!0,get:function(){return S.IntentRecognitionResult}});var C=Yr;Object.defineProperty(e,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return C.LanguageUnderstandingModel}});var f=Dk();Object.defineProperty(e,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return f.SpeechRecognitionEventArgs}}),Object.defineProperty(e,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return f.ConversationTranscriptionEventArgs}}),Object.defineProperty(e,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return f.MeetingTranscriptionEventArgs}});var g=jk();Object.defineProperty(e,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return g.SpeechRecognitionCanceledEventArgs}});var y=zk();Object.defineProperty(e,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return y.TranslationRecognitionEventArgs}});var R=Lk();Object.defineProperty(e,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return R.TranslationSynthesisEventArgs}});var P=XR();Object.defineProperty(e,"TranslationRecognitionResult",{enumerable:!0,get:function(){return P.TranslationRecognitionResult}});var w=jl;Object.defineProperty(e,"TranslationSynthesisResult",{enumerable:!0,get:function(){return w.TranslationSynthesisResult}});var T=YR;Object.defineProperty(e,"ResultReason",{enumerable:!0,get:function(){return T.ResultReason}});var E=Fk();Object.defineProperty(e,"SpeechConfig",{enumerable:!0,get:function(){return E.SpeechConfig}}),Object.defineProperty(e,"SpeechConfigImpl",{enumerable:!0,get:function(){return E.SpeechConfigImpl}});var x=qk();Object.defineProperty(e,"SpeechTranslationConfig",{enumerable:!0,get:function(){return x.SpeechTranslationConfig}}),Object.defineProperty(e,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return x.SpeechTranslationConfigImpl}});var D=eP();Object.defineProperty(e,"PropertyCollection",{enumerable:!0,get:function(){return D.PropertyCollection}});var G=zl;Object.defineProperty(e,"PropertyId",{enumerable:!0,get:function(){return G.PropertyId}});var We=Uk();Object.defineProperty(e,"Recognizer",{enumerable:!0,get:function(){return We.Recognizer}});var ne=$k();Object.defineProperty(e,"SpeechRecognizer",{enumerable:!0,get:function(){return ne.SpeechRecognizer}});var jn=Wk();Object.defineProperty(e,"IntentRecognizer",{enumerable:!0,get:function(){return jn.IntentRecognizer}});var hi=rP;Object.defineProperty(e,"VoiceProfileType",{enumerable:!0,get:function(){return hi.VoiceProfileType}});var en=Vk();Object.defineProperty(e,"TranslationRecognizer",{enumerable:!0,get:function(){return en.TranslationRecognizer}});var zn=Hk();Object.defineProperty(e,"Translations",{enumerable:!0,get:function(){return zn.Translations}});var A=aP;Object.defineProperty(e,"NoMatchReason",{enumerable:!0,get:function(){return A.NoMatchReason}});var O=Kk();Object.defineProperty(e,"NoMatchDetails",{enumerable:!0,get:function(){return O.NoMatchDetails}});var j=Ll;Object.defineProperty(e,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return j.TranslationRecognitionCanceledEventArgs}});var H=Qk();Object.defineProperty(e,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return H.IntentRecognitionCanceledEventArgs}});var ue=ha;Object.defineProperty(e,"CancellationDetailsBase",{enumerable:!0,get:function(){return ue.CancellationDetailsBase}});var Rr=Xk();Object.defineProperty(e,"CancellationDetails",{enumerable:!0,get:function(){return Rr.CancellationDetails}});var Mt=uP;Object.defineProperty(e,"CancellationErrorCode",{enumerable:!0,get:function(){return Mt.CancellationErrorCode}});var fi=Yk();Object.defineProperty(e,"ConnectionEventArgs",{enumerable:!0,get:function(){return fi.ConnectionEventArgs}});var Dt=Zk();Object.defineProperty(e,"ServiceEventArgs",{enumerable:!0,get:function(){return Dt.ServiceEventArgs}});var Pr=sP();Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return Pr.Connection}});var e0=Bl;Object.defineProperty(e,"PhraseListGrammar",{enumerable:!0,get:function(){return e0.PhraseListGrammar}});var t0=Lh();Object.defineProperty(e,"DialogServiceConfig",{enumerable:!0,get:function(){return t0.DialogServiceConfig}});var n0=tx();Object.defineProperty(e,"BotFrameworkConfig",{enumerable:!0,get:function(){return n0.BotFrameworkConfig}});var r0=nx();Object.defineProperty(e,"CustomCommandsConfig",{enumerable:!0,get:function(){return r0.CustomCommandsConfig}});var i0=ix();Object.defineProperty(e,"DialogServiceConnector",{enumerable:!0,get:function(){return i0.DialogServiceConnector}});var s0=Fl;Object.defineProperty(e,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return s0.ActivityReceivedEventArgs}});var o0=ql;Object.defineProperty(e,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return o0.TurnStatusReceivedEventArgs}});var a0=pP;Object.defineProperty(e,"ServicePropertyChannel",{enumerable:!0,get:function(){return a0.ServicePropertyChannel}});var c0=dP;Object.defineProperty(e,"ProfanityOption",{enumerable:!0,get:function(){return c0.ProfanityOption}});var l0=cx();Object.defineProperty(e,"BaseAudioPlayer",{enumerable:!0,get:function(){return l0.BaseAudioPlayer}});var u0=$l;Object.defineProperty(e,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return u0.ConnectionMessageEventArgs}});var p0=iP();Object.defineProperty(e,"ConnectionMessage",{enumerable:!0,get:function(){return p0.ConnectionMessage}});var d0=Wl;Object.defineProperty(e,"VoiceProfile",{enumerable:!0,get:function(){return d0.VoiceProfile}});var rf=px();Object.defineProperty(e,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return rf.VoiceProfileEnrollmentResult}}),Object.defineProperty(e,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return rf.VoiceProfileEnrollmentCancellationDetails}});var sf=dx();Object.defineProperty(e,"VoiceProfileResult",{enumerable:!0,get:function(){return sf.VoiceProfileResult}}),Object.defineProperty(e,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return sf.VoiceProfileCancellationDetails}});var h0=hx();Object.defineProperty(e,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return h0.VoiceProfilePhraseResult}});var f0=fx();Object.defineProperty(e,"VoiceProfileClient",{enumerable:!0,get:function(){return f0.VoiceProfileClient}});var v0=vx();Object.defineProperty(e,"SpeakerRecognizer",{enumerable:!0,get:function(){return v0.SpeakerRecognizer}});var g0=gx();Object.defineProperty(e,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return g0.SpeakerIdentificationModel}});var m0=mx();Object.defineProperty(e,"SpeakerVerificationModel",{enumerable:!0,get:function(){return m0.SpeakerVerificationModel}});var y0=yx();Object.defineProperty(e,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return y0.AutoDetectSourceLanguageConfig}});var S0=Vl;Object.defineProperty(e,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return S0.AutoDetectSourceLanguageResult}});var C0=Hl;Object.defineProperty(e,"SourceLanguageConfig",{enumerable:!0,get:function(){return C0.SourceLanguageConfig}});var Su=Cx();Object.defineProperty(e,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return Su.SpeakerRecognitionResult}}),Object.defineProperty(e,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return Su.SpeakerRecognitionResultType}}),Object.defineProperty(e,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return Su.SpeakerRecognitionCancellationDetails}});var Ve=Uh();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return Ve.Conversation}}),Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Ve.ConversationExpirationEventArgs}}),Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Ve.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Ve.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Ve.ConversationTranslationEventArgs}}),Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return Ve.ConversationTranslationResult}}),Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return Ve.ConversationTranslator}}),Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return Ve.ConversationTranscriber}}),Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Ve.ConversationTranscriptionResult}}),Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return Ve.Meeting}}),Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return Ve.MeetingTranscriber}}),Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return Ve.Participant}}),Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return Ve.ParticipantChangedReason}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return Ve.User}});var R0=$h();Object.defineProperty(e,"Synthesizer",{enumerable:!0,get:function(){return R0.Synthesizer}});var P0=Mh;Object.defineProperty(e,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return P0.SpeechSynthesisOutputFormat}});var w0=jx();Object.defineProperty(e,"SpeechSynthesizer",{enumerable:!0,get:function(){return w0.SpeechSynthesizer}});var E0=Jl;Object.defineProperty(e,"SynthesisResult",{enumerable:!0,get:function(){return E0.SynthesisResult}});var T0=Lx();Object.defineProperty(e,"SpeechSynthesisResult",{enumerable:!0,get:function(){return T0.SpeechSynthesisResult}});var I0=Ql;Object.defineProperty(e,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return I0.SpeechSynthesisEventArgs}});var _0=Gl;Object.defineProperty(e,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return _0.SpeechSynthesisWordBoundaryEventArgs}});var A0=Xl;Object.defineProperty(e,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return A0.SpeechSynthesisBookmarkEventArgs}});var b0=Yl;Object.defineProperty(e,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return b0.SpeechSynthesisVisemeEventArgs}});var k0=RP;Object.defineProperty(e,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return k0.SpeechSynthesisBoundaryType}});var x0=$x();Object.defineProperty(e,"SynthesisVoicesResult",{enumerable:!0,get:function(){return x0.SynthesisVoicesResult}});var Cu=PP;Object.defineProperty(e,"SynthesisVoiceGender",{enumerable:!0,get:function(){return Cu.SynthesisVoiceGender}}),Object.defineProperty(e,"SynthesisVoiceType",{enumerable:!0,get:function(){return Cu.SynthesisVoiceType}}),Object.defineProperty(e,"VoiceInfo",{enumerable:!0,get:function(){return Cu.VoiceInfo}});var O0=Zl;Object.defineProperty(e,"SpeakerAudioDestination",{enumerable:!0,get:function(){return O0.SpeakerAudioDestination}});var N0=Kx();Object.defineProperty(e,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return N0.ConversationTranscriptionCanceledEventArgs}});var M0=Jx();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return M0.MeetingTranscriptionCanceledEventArgs}});var D0=wP;Object.defineProperty(e,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return D0.PronunciationAssessmentGradingSystem}});var j0=EP;Object.defineProperty(e,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return j0.PronunciationAssessmentGranularity}});var z0=Qx();Object.defineProperty(e,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return z0.PronunciationAssessmentConfig}});var L0=Gx();Object.defineProperty(e,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return L0.PronunciationAssessmentResult}});var B0=Fh;Object.defineProperty(e,"LanguageIdMode",{enumerable:!0,get:function(){return B0.LanguageIdMode}});var F0=Xx();Object.defineProperty(e,"AvatarConfig",{enumerable:!0,get:function(){return F0.AvatarConfig}});var q0=_P;Object.defineProperty(e,"AvatarEventArgs",{enumerable:!0,get:function(){return q0.AvatarEventArgs}});var U0=Yx();Object.defineProperty(e,"AvatarSynthesizer",{enumerable:!0,get:function(){return U0.AvatarSynthesizer}});var of=Zr;Object.defineProperty(e,"AvatarVideoFormat",{enumerable:!0,get:function(){return of.AvatarVideoFormat}}),Object.defineProperty(e,"Coordinate",{enumerable:!0,get:function(){return of.Coordinate}});var $0=tO();Object.defineProperty(e,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return $0.AvatarWebRTCConnectionResult}});var W0=nO();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return W0.Diagnostics}});var V0=Oh;Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return V0.LogLevel}})}(lp)),lp}var Em;function rO(){if(Em)return xi;Em=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.ProxyInfo=void 0;const e=b();let t=class bP{constructor(r,i,o,a){this.privProxyHostName=r,this.privProxyPort=i,this.privProxyUserName=o,this.privProxyPassword=a}static fromParameters(r){return new bP(r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPort),10),r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName),r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(r){return this.fromParameters(r.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return xi.ProxyInfo=t,xi}var kP={};const iO=new Set(["json","buffer","string"]);var sO=e=>(...t)=>{const n=new Set;let r,i,o,a="";return t.forEach(s=>{if(typeof s=="string")if(s.toUpperCase()===s)if(r){const c=`Can't set method to ${s}, already set to ${r}.`;throw new Error(c)}else r=s;else if(s.startsWith("http:")||s.startsWith("https:"))a=s;else if(iO.has(s))i=s;else throw new Error(`Unknown encoding, ${s}`);else if(typeof s=="number")n.add(s);else if(typeof s=="object")if(Array.isArray(s)||s instanceof Set)s.forEach(c=>n.add(c));else{if(o)throw new Error("Cannot set headers twice.");o=s}else throw new Error(`Unknown type: ${typeof s}`)}),r||(r="GET"),n.size===0&&n.add(200),e(n,r,i,o,a)};const oO=sO;class Wh extends Error{constructor(t,...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,Wh),this.name="StatusError",this.message=t.statusMessage,this.statusCode=t.status,this.res=t,this.json=t.json.bind(t),this.text=t.text.bind(t),this.arrayBuffer=t.arrayBuffer.bind(t);let r;Object.defineProperty(this,"responseBody",{get:()=>(r||(r=this.arrayBuffer()),r)}),this.headers={};for(const[o,a]of t.headers.entries())this.headers[o.toLowerCase()]=a}}const aO=(e,t,n,r,i)=>async(o,a,s={})=>{o=i+(o||"");let c=new URL(o);if(r||(r={}),c.username&&(r.Authorization="Basic "+btoa(c.username+":"+c.password),c=new URL(c.protocol+"//"+c.host+c.pathname+c.search)),c.protocol!=="https:"&&c.protocol!=="http:")throw new Error(`Unknown protocol, ${c.protocol}`);if(a&&!(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="string"))if(typeof a=="object")a=JSON.stringify(a),r["Content-Type"]="application/json";else throw new Error("Unknown body type.");s=new Headers({...r||{},...s});const l=await fetch(c,{method:t,headers:s,body:a});if(l.statusCode=l.status,!e.has(l.status))throw new Wh(l);return n==="json"?l.json():n==="buffer"?l.arrayBuffer():n==="string"?l.text():l};var cO=oO(aO);(function(e){var t=W&&W.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RestMessageAdapter=e.RestRequestType=void 0;const n=t(cO),r=z();var i;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(i=e.RestRequestType||(e.RestRequestType={}));class o{constructor(s){if(!s)throw new r.ArgumentNullError("configParams");this.privHeaders=s.headers,this.privIgnoreCache=s.ignoreCache}static extractHeaderValue(s,c){let l="";try{const u=c.trim().split(/[\r\n]+/),p={};u.forEach(d=>{const h=d.split(": "),v=h.shift().toLowerCase(),S=h.join(": ");p[v]=S}),l=p[s.toLowerCase()]}catch{}return l}set options(s){this.privHeaders=s.headers,this.privIgnoreCache=s.ignoreCache}setHeaders(s,c){this.privHeaders[s]=c}request(s,c,l={},u=null){const p=new r.Deferred,d=s===i.File?"POST":s,h=(S,C={})=>{const f=S;return{data:JSON.stringify(C),headers:JSON.stringify(S.headers),json:C,ok:S.statusCode>=200&&S.statusCode<300,status:S.statusCode,statusText:C.error?C.error.message:f.statusText?f.statusText:f.statusMessage}},v=S=>{const C=(0,n.default)(c,d,this.privHeaders,200,201,202,204,400,401,402,403,404),f=this.queryParams(l)===""?"":`?${this.queryParams(l)}`;C(f,S).then(async g=>{if(s===i.Delete||g.statusCode===204)p.resolve(h(g));else try{const y=await g.json();p.resolve(h(g,y))}catch{p.resolve(h(g))}}).catch(g=>{p.reject(g)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),s===i.Post&&u&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),v(u),p.promise}queryParams(s={}){return Object.keys(s).map(c=>encodeURIComponent(c)+"="+encodeURIComponent(s[c])).join("&")}}e.RestMessageAdapter=o})(kP);var va={};Object.defineProperty(va,"__esModule",{value:!0});va.RestConfigBase=void 0;class En{static get requestOptions(){return En.privDefaultRequestOptions}static get configParams(){return En.privDefaultParams}static get restErrors(){return En.privRestErrors}}va.RestConfigBase=En;En.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};En.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};En.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var Tm;function Se(){return Tm||(Tm=1,function(e){var t=W&&W.__createBinding||(Object.create?function(r,i,o,a){a===void 0&&(a=o),Object.defineProperty(r,a,{enumerable:!0,get:function(){return i[o]}})}:function(r,i,o,a){a===void 0&&(a=o),r[a]=i[o]}),n=W&&W.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(_l,e),n(BR,e),n(ik(),e),n(sk(),e),n(Al,e),n(bl,e),n(ua,e),n(kl,e),n(rO(),e),n(kP,e),n(va,e)}(op)),op}var Im;function lO(){if(Im)return Ai;Im=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.IntentConnectionFactory=void 0;const e=Se(),t=b(),n=It(),r=M(),i=ye;let o=class extends n.ConnectionFactoryBase{create(s,c,l){let u=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!u){const v=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_IntentRegion),S=n.ConnectionFactoryBase.getHostSuffix(v);u=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+v+".sr.speech"+S)+"/speech/recognition/interactive/cognitiveservices/v1"}const p={format:"simple",language:s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(s,p,u);const d={};c.token!==void 0&&c.token!==""&&(d[c.headerName]=c.token),d[i.HeaderNames.ConnectionId]=l,s.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,u);const h=s.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(u,p,d,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(s),h,l))}getSpeechRegionFromIntentRegion(s){switch(s){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return s}}};return Ai.IntentConnectionFactory=o,Ai}var Gn={},_m;function uO(){if(_m)return Gn;_m=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.VoiceProfileConnectionFactory=Gn.SpeakerRecognitionConnectionFactory=void 0;const e=Se(),t=b(),n=It(),r=M(),i=ye;class o extends n.ConnectionFactoryBase{create(l,u,p,d){let h=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const f=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),g=n.ConnectionFactoryBase.getHostSuffix(f),y=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`wss://${f}.spr-frontend.speech${g}`),R=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");h=`${y}/speaker/ws/${this.scenarioToPath(R)}/${p}`}const v={format:"simple",language:l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(l,v,h);const S={};u.token!==void 0&&u.token!==""&&(S[u.headerName]=u.token),S[i.HeaderNames.ConnectionId]=d,S[i.HeaderNames.SpIDAuthKey]=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Key),l.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,h);const C=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(h,v,S,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),C,d))}scenarioToPath(l){switch(l){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let a=class extends o{create(l,u,p){return super.create(l,u,"recognition",p)}};Gn.SpeakerRecognitionConnectionFactory=a;class s extends o{create(l,u,p){return super.create(l,u,"profile",p)}}return Gn.VoiceProfileConnectionFactory=s,Gn}var eu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionEndedEvent=e.RecognitionCompletionStatus=e.RecognitionStartedEvent=e.ConnectingToServiceEvent=e.ListeningStartedEvent=e.RecognitionTriggeredEvent=e.SpeechRecognitionEvent=void 0;const t=z();class n extends t.PlatformEvent{constructor(u,p,d,h=t.EventType.Info){super(u,h),this.privRequestId=p,this.privSessionId=d}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}e.SpeechRecognitionEvent=n;class r extends n{constructor(u,p,d,h){super("RecognitionTriggeredEvent",u,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.RecognitionTriggeredEvent=r;class i extends n{constructor(u,p,d,h){super("ListeningStartedEvent",u,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.ListeningStartedEvent=i;class o extends n{constructor(u,p,d){super("ConnectingToServiceEvent",u,d),this.privAuthFetchEventid=p}get authFetchEventid(){return this.privAuthFetchEventid}}e.ConnectingToServiceEvent=o;class a extends n{constructor(u,p,d,h,v){super("RecognitionStartedEvent",u,v),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}e.RecognitionStartedEvent=a;var s;(function(l){l[l.Success=0]="Success",l[l.AudioSourceError=1]="AudioSourceError",l[l.AudioSourceTimeout=2]="AudioSourceTimeout",l[l.AuthTokenFetchError=3]="AuthTokenFetchError",l[l.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",l[l.UnAuthorized=5]="UnAuthorized",l[l.ConnectTimeout=6]="ConnectTimeout",l[l.ConnectError=7]="ConnectError",l[l.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",l[l.UnknownError=9]="UnknownError"})(s=e.RecognitionCompletionStatus||(e.RecognitionCompletionStatus={}));class c extends n{constructor(u,p,d,h,v,S,C,f){super("RecognitionEndedEvent",u,v,C===s.Success?t.EventType.Info:t.EventType.Error),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h,this.privStatus=C,this.privError=f,this.privServiceTag=S}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}e.RecognitionEndedEvent=c})(eu);var Ns={},Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.SpeechConnectionMessage=void 0;const fp=z(),Lt=ye;class Vh extends fp.ConnectionMessage{constructor(t,n,r,i,o,a,s,c){if(!n)throw new fp.ArgumentNullError("path");if(!r)throw new fp.ArgumentNullError("requestId");const l={};if(l[Lt.HeaderNames.Path]=n,l[Lt.HeaderNames.RequestId]=r,l[Lt.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(l[Lt.HeaderNames.ContentType]=i),a&&(l[Lt.HeaderNames.RequestStreamId]=a),s)for(const u in s)u&&(l[u]=s[u]);c?super(t,o,l,c):super(t,o,l),this.privPath=n,this.privRequestId=r,this.privContentType=i,this.privStreamId=a,this.privAdditionalHeaders=s}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(t){let n=null,r=null,i=null,o=null;const a={};if(t.headers)for(const s in t.headers)s&&(s.toLowerCase()===Lt.HeaderNames.Path.toLowerCase()?n=t.headers[s]:s.toLowerCase()===Lt.HeaderNames.RequestId.toLowerCase()?r=t.headers[s]:s.toLowerCase()===Lt.HeaderNames.ContentType.toLowerCase()?i=t.headers[s]:s.toLowerCase()===Lt.HeaderNames.RequestStreamId.toLowerCase()?o=t.headers[s]:a[s]=t.headers[s]);return new Vh(t.messageType,n,r,i,t.body,o,a,t.id)}}Zt.SpeechConnectionMessage=Vh;var xP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SegmentationMode=void 0,function(t){t.Normal="Normal",t.Disabled="Disabled",t.Custom="Custom",t.Semantic="Semantic"}(e.SegmentationMode||(e.SegmentationMode={}))})(xP);var OP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,function(t){t.None="None",t.Synthesize="Synthesize"}(e.NextAction||(e.NextAction={}))})(OP);var NP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Mode=void 0,function(t){t.None="None",t.Always="Always"}(e.Mode||(e.Mode={}))})(NP);var MP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdDetectionPriority=e.LanguageIdDetectionMode=void 0,function(t){t.DetectAtAudioStart="DetectAtAudioStart",t.DetectContinuous="DetectContinuous",t.DetectSegments="DetectSegments"}(e.LanguageIdDetectionMode||(e.LanguageIdDetectionMode={})),function(t){t.Auto="Auto",t.PrioritizeLatency="PrioritizeLatency",t.PrioritizeAccuracy="PrioritizeAccuracy"}(e.LanguageIdDetectionPriority||(e.LanguageIdDetectionPriority={}))})(MP);var DP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,function(t){t.Recognize="Recognize",t.None="None"}(e.NextAction||(e.NextAction={}))})(DP);var jP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OnUnknownAction=void 0,function(t){t.RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",t.None="None"}(e.OnUnknownAction||(e.OnUnknownAction={}))})(jP);var zP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResultType=void 0,function(t){t.Auto="Auto",t.StableFragment="StableFragment",t.Hypothesis="Hypothesis",t.None="None"}(e.ResultType||(e.ResultType={}))})(zP);var LP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PhraseResultOutputType=void 0,function(t){t.Always="Always",t.None="None"}(e.PhraseResultOutputType||(e.PhraseResultOutputType={}))})(LP);var BP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,function(t){t.None="None",t.Translate="Translate"}(e.NextAction||(e.NextAction={}))})(BP);var Am;function pO(){if(Am)return Ns;Am=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.ServiceRecognizerBase=void 0;const e=Se(),t=z(),n=b(),r=M(),i=Zt,o=xP,a=ot,s=OP,c=NP,l=MP,u=DP,p=jP,d=zP,h=LP,v=BP;let S=class fo{constructor(f,g,y,R,P){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!f)throw new t.ArgumentNullError("authentication");if(!g)throw new t.ArgumentNullError("connectionFactory");if(!y)throw new t.ArgumentNullError("audioSource");if(!R)throw new t.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=R.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=f,this.privConnectionFactory=g,this.privAudioSource=y,this.privRecognizerConfig=R,this.privIsDisposed=!1,this.privRecognizer=P,this.privRequestSession=new r.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privDynamicGrammar=new r.DynamicGrammarBuilder,this.privSpeechContext=new r.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new r.AgentConfig,this.privRecognizerConfig.parameters.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=t.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(T=>{if(T.name==="ConnectionClosedEvent"){const E=T;(E.statusCode===1003||E.statusCode===1007||E.statusCode===1002||E.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(n.CancellationReason.Error,E.statusCode===1007?n.CancellationErrorCode.BadRequestParameters:n.CancellationErrorCode.ConnectionFailure,`${E.reason} websocket error code: ${E.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,t.createNoDashGuid)())}setTranslationJson(){const f=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(f!==void 0){const g=f.split(","),y=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),R=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),P=y!==void 0?s.NextAction.Synthesize:s.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:P},onSuccess:{action:P},output:{includePassThroughResults:!0,interimResults:{mode:c.Mode.Always}},targetLanguages:g},R!==void 0&&(this.privSpeechContext.getContext().translation.category=R),y!==void 0){const T={};for(const E of g)T[E]=y;this.privSpeechContext.getContext().synthesis={defaultVoices:T}}const w=this.privSpeechContext.getContext().phraseDetection||{};w.onSuccess={action:v.NextAction.Translate},w.onInterim={action:v.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=w}}setSpeechSegmentationTimeoutJson(){const f=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),g=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),y=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationStrategy,void 0),R={mode:o.SegmentationMode.Normal};let P=!1;if(y!==void 0){P=!0;let w=o.SegmentationMode.Normal;switch(y.toLowerCase()){case"default":break;case"time":w=o.SegmentationMode.Custom;break;case"semantic":w=o.SegmentationMode.Semantic;break}R.mode=w}if(f!==void 0){P=!0;const w=parseInt(f,10);R.mode=o.SegmentationMode.Custom,R.segmentationSilenceTimeoutMs=w}if(g!==void 0){P=!0;const w=parseInt(g,10);R.mode=o.SegmentationMode.Custom,R.segmentationForcedTimeoutMs=w}if(P){const w=this.privSpeechContext.getContext().phraseDetection||{};switch(w.mode=this.recognitionMode,this.recognitionMode){case a.RecognitionMode.Conversation:w.conversation=w.conversation??{segmentation:{}},w.conversation.segmentation=R;break;case a.RecognitionMode.Interactive:w.interactive=w.interactive??{segmentation:{}},w.interactive.segmentation=R;break;case a.RecognitionMode.Dictation:w.dictation=w.dictation??{},w.dictation.segmentation=R;break}this.privSpeechContext.getContext().phraseDetection=w}}setLanguageIdJson(){const f=this.privSpeechContext.getContext().phraseDetection||{};if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const g=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");g.length===1&&g[0]===r.AutoDetectSourceLanguagesOpenRangeOptionName&&(g[0]="UND");let y;this.privRecognizerConfig.languageIdMode==="Continuous"?y=l.LanguageIdDetectionMode.DetectContinuous:y=l.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:g,mode:y,onSuccess:{action:u.NextAction.Recognize},onUnknown:{action:p.OnUnknownAction.None},priority:l.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:d.ResultType.Auto},phraseResults:{resultType:h.PhraseResultOutputType.Always}};const R=this.privRecognizerConfig.sourceLanguageModels;R!==void 0&&(f.customModels=R,f.onInterim={action:v.NextAction.None},f.onSuccess={action:v.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=f}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(r.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase()===n.OutputFormat[n.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(f){this.privRecognizerConfig.parameters.setProperty(n.PropertyId.ConversationTranslator_Token,f)}set voiceProfileType(f){this.privRecognizerConfig.parameters.setProperty(n.PropertyId.SpeechServiceConnection_SpeakerIdMode,f)}set authentication(f){this.privAuthentication=f}isDisposed(){return this.privIsDisposed}async dispose(f){if(this.privIsDisposed=!0,this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose(f)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(f,g,y){if(this.recognizeOverride!==void 0){await this.recognizeOverride(f,g,y);return}if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=f,this.privRecognizerConfig.recognitionEndpointVersion==="2"){const E=this.privSpeechContext.getContext().phraseDetection||{};E.mode=f,this.privSpeechContext.getContext().phraseDetection=E}this.setLanguageIdJson(),this.setTranslationJson(),this.privRecognizerConfig.autoDetectSourceLanguages!==void 0&&this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.privSuccessCallback=g,this.privErrorCallback=y,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const R=this.connectImpl();let P;try{const E=await this.audioSource.attach(this.privRequestSession.audioNodeId),x=await this.audioSource.format,D=await this.audioSource.deviceInfo;this.privIsLiveAudio=D.type&&D.type===r.type.Microphones,P=new e.ReplayableAudioNode(E,x.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(P,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:D}}catch(E){throw await this.privRequestSession.onStopRecognizing(),E}try{await R}catch(E){await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,E);return}const w=new n.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,w),this.receiveMessage(),this.sendAudio(P).catch(async E=>{await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,E)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(f,g){this.connectImpl().then(()=>{try{f&&f()}catch(y){g&&g(y)}},y=>{try{g&&g(y)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(f){}async sendNetworkMessage(f,g){const y=typeof g=="string"?t.MessageType.Text:t.MessageType.Binary,R=typeof g=="string"?"application/json":"";return(await this.fetchConnection()).send(new i.SpeechConnectionMessage(y,f,this.privRequestSession.requestId,R,g))}set activityTemplate(f){this.privActivityTemplate=f}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(f){this.privExpectContentAssessmentResponse=f}async sendTelemetryData(){const f=this.privRequestSession.getTelemetry();if(fo.telemetryDataEnabled!==!0||this.privIsDisposed||f===null)return;if(fo.telemetryData)try{fo.telemetryData(f)}catch{}await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",f))}async cancelRecognitionLocal(f,g,y){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,f,g,y))}async receiveMessage(){try{if(this.privIsDisposed)return;let f=await this.fetchConnection();const g=await f.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!g)return this.receiveMessage();this.privServiceHasSentMessage=!0;const y=i.SpeechConnectionMessage.fromConnectionMessage(g);if(y.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(y.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const R=r.SpeechDetected.fromJSON(y.textBody,this.privRequestSession.currentTurnAudioOffset),P=new n.RecognitionEventArgs(R.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,P);break;case"speech.enddetected":let w;y.textBody.length>0?w=y.textBody:w="{ Offset: 0 }";const T=r.SpeechDetected.fromJSON(w,this.privRequestSession.currentTurnAudioOffset),E=new n.RecognitionEventArgs(T.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,E);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(n.CancellationReason.EndOfStream,n.CancellationErrorCode.NoError,void 0));const x=new n.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,x);return}else f=await this.fetchConnection(),await this.sendPrePayloadJSON(f);break;default:await this.processTypeSpecificMessages(y)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(y.path.toLowerCase(),y.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const f=this.privRequestSession.recognitionBytesSent,g=this.privAverageBytesPerMs!==0?f/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(g)}sendSpeechContext(f,g){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const y=this.speechContext.toJSON();if(g&&this.privRequestSession.onSpeechContext(),y)return f.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",y))}setupTranslationWithLanguageId(){const f=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),g=this.privRecognizerConfig.autoDetectSourceLanguages!==void 0;if(f!==void 0&&g){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:d.ResultType.None},phraseResults:{resultType:h.PhraseResultOutputType.None}};const y=this.privSpeechContext.getContext().translation;if(y){const R=this.privRecognizerConfig.sourceLanguageModels;if(R!==void 0&&R.length>0){const w=this.privSpeechContext.getContext().phraseDetection||{};w.customModels=R,this.privSpeechContext.getContext().phraseDetection=w}this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&(y.onSuccess={action:s.NextAction.Synthesize},y.onPassthrough={action:s.NextAction.Synthesize})}}}noOp(){}async sendPrePayloadJSON(f,g=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(f);await this.sendSpeechContext(f,g),await this.sendWaveHeader(f)}async sendWaveHeader(f){const g=await this.audioSource.format;return f.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",g.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(f=>f.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(f,g,y){if(g.onSpeechContext(),fo.telemetryDataEnabled!==!0){const P={context:{system:JSON.parse(y).context.system}};y=JSON.stringify(P)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const R=JSON.parse(y);R.context.DisableReferenceChannel="True",R.context.MicSpec="1_0_0",y=JSON.stringify(R)}if(y)return f.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.config",g.requestId,"application/json",y))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(f=>f.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(f){const g=await this.audioSource.format;this.privAverageBytesPerMs=g.avgBytesPerSec/1e3;let y=Date.now();const R=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),P=g.avgBytesPerSec/1e3*parseInt(R,10),w=this.privRequestSession.recogNumber,T=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===w){const E=await this.fetchConnection(),x=await f.read();if(this.privRequestSession.isSpeechEnded)return;let D,G;if(!x||x.isEnd?(D=null,G=0):(D=x.buffer,this.privRequestSession.onAudioSent(D.byteLength),P>=this.privRequestSession.bytesSent?G=0:G=Math.max(0,y-Date.now())),G!==0&&await this.delay(G),D!==null&&(y=Date.now()+D.byteLength*1e3/(g.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===w)if(E.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,D)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),x!=null&&x.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return T()}};return T()}async retryableConnect(){let f=!1;this.privAuthFetchEventId=(0,t.createNoDashGuid)();const g=this.privRequestSession.sessionId;this.privConnectionId=g!==void 0?g:(0,t.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let y=0,R="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();const w=await(f?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const T=await this.privConnectionFactory.create(this.privRecognizerConfig,w,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(T.events),T.events.attach(x=>{this.connectionEvents.onEvent(x)});const E=await T.open();if(E.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(E.statusCode),Promise.resolve(T);E.statusCode===1006&&(f=!0),y=E.statusCode,R=E.reason}return await this.privRequestSession.onConnectionEstablishCompleted(y,R),Promise.reject(`Unable to contact server. StatusCode: ${y}, ${this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${R}`)}delay(f){return new Promise(g=>this.privSetTimeout(g,f))}writeBufferToConsole(f){let g="Buffer Size: ";if(f===null)g+="null";else{const y=new Uint8Array(f);g+=`${f.byteLength}\r
`;for(let R=0;R<f.byteLength;R++)g+=y[R].toString(16).padStart(2,"0")+" ",(R+1)%16===0&&(console.info(g),g="")}console.info(g)}async sendFinalAudio(){await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const f=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(f):(await this.sendSpeechServiceConfig(f,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(f,!1),f)}};return Ns.ServiceRecognizerBase=S,S.telemetryDataEnabled=!0,Ns}var Ms={},bm;function dO(){if(bm)return Ms;bm=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.ConversationServiceRecognizer=void 0;const e=b(),t=M();let n=class extends t.ServiceRecognizerBase{constructor(i,o,a,s,c){super(i,o,a,s,c),this.handleSpeechPhraseMessage=async l=>this.handleSpeechPhrase(l),this.handleSpeechHypothesisMessage=l=>this.handleSpeechHypothesis(l)}processTypeSpecificMessages(i){}handleRecognizedCallback(i,o,a){}handleRecognizingCallback(i,o,a){}async processSpeechMessages(i){let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(i.textBody),o=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(i.textBody),o=!0;break}return o}cancelRecognition(i,o,a,s,c){}async handleSpeechPhrase(i){const o=t.SimpleSpeechPhrase.fromJSON(i,this.privRequestSession.currentTurnAudioOffset),a=t.EnumTranslation.implTranslateRecognitionResult(o.RecognitionStatus);let s;const c=new e.PropertyCollection;if(c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i),this.privRequestSession.onPhraseRecognized(o.Offset+o.Duration),e.ResultReason.Canceled===a){const l=t.EnumTranslation.implTranslateCancelResult(o.RecognitionStatus),u=t.EnumTranslation.implTranslateCancelErrorCode(o.RecognitionStatus);await this.cancelRecognitionLocal(l,u,t.EnumTranslation.implTranslateErrorDetails(u))}else if(o.RecognitionStatus!==t.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,o.DisplayText,o.Duration,o.Offset,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,o.asJson(),c);else{const l=t.DetailedSpeechPhrase.fromJSON(i,this.privRequestSession.currentTurnAudioOffset);s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,l.Text,l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,l.SpeakerId,void 0,l.asJson(),c)}this.handleRecognizedCallback(s,s.offset,this.privRequestSession.sessionId)}}handleSpeechHypothesis(i){const o=t.SpeechHypothesis.fromJSON(i,this.privRequestSession.currentTurnAudioOffset),a=new e.PropertyCollection;a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i);const s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,o.Text,o.Duration,o.Offset,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,o.asJson(),a);this.privRequestSession.onHypothesis(o.Offset),this.handleRecognizingCallback(s,o.Duration,this.privRequestSession.sessionId)}};return Ms.ConversationServiceRecognizer=n,Ms}var vp={},km;function hO(){return km||(km=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognizerConfig=e.SpeechResultFormat=void 0;const t=b(),n=M(),r=ot;(function(o){o[o.Simple=0]="Simple",o[o.Detailed=1]="Detailed"})(e.SpeechResultFormat||(e.SpeechResultFormat={}));class i{constructor(a,s){this.privSpeechServiceConfig=a||new n.SpeechServiceConfig(new n.Context(null)),this.privParameters=s,this.privMaxRetryCount=parseInt(s.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=s.getProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===r.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=r.RecognitionMode[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==r.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(a){this.parameters.setProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,a)}get sourceLanguageModels(){const a=[];let s=!1;if(this.autoDetectSourceLanguages!==void 0)for(const c of this.autoDetectSourceLanguages.split(",")){const l=c+t.PropertyId.SpeechServiceConnection_EndpointId.toString(),u=this.parameters.getProperty(l,void 0);u!==void 0?(a.push({language:c,endpoint:u}),s=!0):a.push({language:c,endpoint:""})}return s?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}e.RecognizerConfig=i}(vp)),vp}var FP={};Object.defineProperty(FP,"__esModule",{value:!0});var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.WebsocketMessageFormatter=void 0;const at=z(),xm=`\r
`;class fO{toConnectionMessage(t){const n=new at.Deferred;try{if(t.messageType===at.MessageType.Text){const r=t.textContent;let i={},o=null;if(r){const a=r.split(`\r
\r
`);a&&a.length>0&&(i=this.parseHeaders(a[0]),a.length>1&&(o=a[1]))}n.resolve(new at.ConnectionMessage(t.messageType,o,i,t.id))}else if(t.messageType===at.MessageType.Binary){const r=t.binaryContent;let i={},o=null;if(!r||r.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const a=new DataView(r),s=a.getInt16(0);if(r.byteLength<s+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let l=0;l<s;l++)c+=String.fromCharCode(a.getInt8(l+2));i=this.parseHeaders(c),r.byteLength>s+2&&(o=r.slice(2+s)),n.resolve(new at.ConnectionMessage(t.messageType,o,i,t.id))}}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(t){const n=new at.Deferred;try{if(t.messageType===at.MessageType.Text){const r=`${this.makeHeaders(t)}${xm}${t.textBody?t.textBody:""}`;n.resolve(new at.RawWebsocketMessage(at.MessageType.Text,r,t.id))}else if(t.messageType===at.MessageType.Binary){const r=this.makeHeaders(t),i=t.binaryBody,o=this.stringToArrayBuffer(r),a=new Int8Array(o),s=a.byteLength,c=new Int8Array(2+s+(i?i.byteLength:0));if(c[0]=s>>8&255,c[1]=s&255,c.set(a,2),i){const u=new Int8Array(i);c.set(u,2+s)}const l=c.buffer;n.resolve(new at.RawWebsocketMessage(at.MessageType.Binary,l,t.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}makeHeaders(t){let n="";if(t.headers)for(const r in t.headers)r&&(n+=`${r}: ${t.headers[r]}${xm}`);return n}parseHeaders(t){const n={};if(t){const r=t.match(/[^\r\n]+/g);if(n){for(const i of r)if(i){const o=i.indexOf(":"),a=o>0?i.substr(0,o).trim().toLowerCase():i,s=o>0&&i.length>o+1?i.substr(o+1).trim():"";n[a]=s}}}return n}stringToArrayBuffer(t){const n=new ArrayBuffer(t.length),r=new DataView(n);for(let i=0;i<t.length;i++)r.setUint8(i,t.charCodeAt(i));return n}}tu.WebsocketMessageFormatter=fO;var Ds={},Om;function vO(){if(Om)return Ds;Om=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.SpeechConnectionFactory=void 0;const e=Se(),t=M(),n=b(),r=It(),i=M(),o=ye,a=Tt,s=ot;let c=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}async create(u,p,d){let h=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);const v=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,void 0),S=r.ConnectionFactoryBase.getHostSuffix(v),C=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://"+v+".stt.speech"+S),f={},g=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),y=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(g?(!h||h.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(f[a.QueryParameterNames.CustomSpeechDeploymentId]=g):y&&(!h||h.search(a.QueryParameterNames.Language)===-1)&&(f[a.QueryParameterNames.Language]=y),(!h||h.search(a.QueryParameterNames.Format)===-1)&&(f[a.QueryParameterNames.Format]=u.parameters.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase()),u.autoDetectSourceLanguages!==void 0&&(f[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(u,f,h),h){const E=new URL(h),x=E.pathname;(x===""||x==="/")&&(E.pathname=this.universalUri+u.recognitionEndpointVersion,h=await r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(E.toString()))}if(!h)switch(u.recognitionMode){case s.RecognitionMode.Conversation:u.parameters.getProperty(t.ForceDictationPropertyName,"false")==="true"?h=C+this.dictationRelativeUri:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?h=`${C}${this.universalUri}${u.recognitionEndpointVersion}`:h=C+this.conversationRelativeUri;break;case s.RecognitionMode.Dictation:h=C+this.dictationRelativeUri;break;default:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?h=`${C}${this.universalUri}${u.recognitionEndpointVersion}`:h=C+this.interactiveRelativeUri;break}const R={};p.token!==void 0&&p.token!==""&&(R[p.headerName]=p.token),R[o.HeaderNames.ConnectionId]=d,R.connectionId=d;const P=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",w=new e.WebsocketConnection(h,f,R,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),P,d),T=w.uri;return u.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,T),w}};return Ds.SpeechConnectionFactory=c,Ds}var js={},Nm;function gO(){if(Nm)return js;Nm=1,Object.defineProperty(js,"__esModule",{value:!0}),js.ConversationTranscriberConnectionFactory=void 0;const e=Se(),t=b(),n=M(),r=It(),i=M(),o=ye,a=Tt;let s=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2"}async create(l,u,p){let d=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),v=r.ConnectionFactoryBase.getHostSuffix(h),S=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+v),C={},f=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(f?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(C[a.QueryParameterNames.CustomSpeechDeploymentId]=f):g&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(C[a.QueryParameterNames.Language]=g),l.autoDetectSourceLanguages!==void 0&&(C[a.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(l,C,d),d){const T=new URL(d),E=T.pathname;(E===""||E==="/")&&(T.pathname=this.universalUri,d=await r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(T.toString()))}d||(d=`${S}${this.universalUri}`);const y={};u.token!==void 0&&u.token!==""&&(y[u.headerName]=u.token),y[o.HeaderNames.ConnectionId]=p;const R=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new e.WebsocketConnection(d,C,y,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),R,p),w=P.uri;return l.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,w),P}setV2UrlParams(l,u,p){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((v,S)=>{this.setUrlParameter(S,v,l,u,p)});const h=JSON.parse(l.parameters.getProperty(n.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(v=>{u[v]=h[v]})}};return js.ConversationTranscriberConnectionFactory=s,js}var zs={},Mm;function mO(){if(Mm)return zs;Mm=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.TranscriberConnectionFactory=void 0;const e=Se(),t=b(),n=It(),r=M(),i=ye,o=Tt;let a=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(c,l,u){let p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"centralus"),h=n.ConnectionFactoryBase.getHostSuffix(d),v="wss://transcribe."+d+".cts.speech"+h+this.multiaudioRelativeUri,S=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,v),C={};this.setQueryParams(C,c,p),p||(p=S);const f={};l.token!==void 0&&l.token!==""&&(f[l.headerName]=l.token),f[i.HeaderNames.ConnectionId]=u,c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,p);const g=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(p,C,f,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(c),g,u))}setQueryParams(c,l,u){const p=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),d=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);p&&!(o.QueryParameterNames.CustomSpeechDeploymentId in c)&&(c[o.QueryParameterNames.CustomSpeechDeploymentId]=p),d&&!(o.QueryParameterNames.Language in c)&&(c[o.QueryParameterNames.Language]=d);const h=l.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",v=l.parameters.getProperty(r.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple])!==t.OutputFormat[t.OutputFormat.Simple];(h||v)&&(c[o.QueryParameterNames.Format]=t.OutputFormat[t.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(l,c,u)}};return zs.TranscriberConnectionFactory=a,zs}var Ls={},Dm;function yO(){if(Dm)return Ls;Dm=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.TranslationConnectionFactory=void 0;const e=Se(),t=fa,n=b(),r=It(),i=M(),o=ye,a=Tt,s=ot;let c=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}async create(u,p,d){let h=this.getEndpointUrl(u);const v={};if(this.setQueryParams(v,u,h),h){const g=new URL(h),y=g.pathname;(y===""||y==="/")&&(g.pathname=this.universalUri,h=await r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(g.toString()))}const S={};p.token!==void 0&&p.token!==""&&(S[p.headerName]=p.token),S[o.HeaderNames.ConnectionId]=d,u.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,h);const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(h,v,S,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),C,d)}getEndpointUrl(u,p){const d=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),h=r.ConnectionFactoryBase.getHostSuffix(d);let v=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);return v?p===!0?v:t.StringUtils.formatString(v,{region:d}):(u.parameters.getProperty("SPEECH-ForceV1Endpoint","false")==="true"?v=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+h)+this.translationV1Uri:v=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+h)+this.universalUri,p===!0?v:t.StringUtils.formatString(v,{region:d}))}setQueryParams(u,p,d){u.from=p.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),u.to=p.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages),u.scenario=p.recognitionMode===s.RecognitionMode.Interactive?"interactive":p.recognitionMode===s.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(p,u,d),this.setUrlParameter(n.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,p,u,d);const h=p.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);h!==void 0&&(u.voice=h,u.features="requireVoice")}};return Ls.TranslationConnectionFactory=c,Ls}var Bs={},jm;function SO(){if(jm)return Bs;jm=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.EnumTranslation=void 0;const e=b(),t=M();let n=class{static implTranslateRecognitionResult(i,o=!1){let a=e.ResultReason.Canceled;switch(i){case t.RecognitionStatus.Success:a=e.ResultReason.RecognizedSpeech;break;case t.RecognitionStatus.EndOfDictation:a=o?e.ResultReason.RecognizedSpeech:e.ResultReason.NoMatch;break;case t.RecognitionStatus.NoMatch:case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:a=e.ResultReason.NoMatch;break;case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:a=e.ResultReason.Canceled;break}return a}static implTranslateCancelResult(i){let o=e.CancellationReason.EndOfStream;switch(i){case t.RecognitionStatus.Success:case t.RecognitionStatus.EndOfDictation:case t.RecognitionStatus.NoMatch:o=e.CancellationReason.EndOfStream;break;case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:o=e.CancellationReason.Error;break}return o}static implTranslateCancelErrorCode(i){let o=e.CancellationErrorCode.NoError;switch(i){case t.RecognitionStatus.Error:o=e.CancellationErrorCode.ServiceError;break;case t.RecognitionStatus.TooManyRequests:o=e.CancellationErrorCode.TooManyRequests;break;case t.RecognitionStatus.BadRequest:o=e.CancellationErrorCode.BadRequestParameters;break;case t.RecognitionStatus.Forbidden:o=e.CancellationErrorCode.Forbidden;break;default:o=e.CancellationErrorCode.NoError;break}return o}static implTranslateErrorDetails(i){let o="The speech service encountered an internal error and could not continue.";switch(i){case e.CancellationErrorCode.Forbidden:o="The recognizer is using a free subscription that ran out of quota.";break;case e.CancellationErrorCode.BadRequestParameters:o="Invalid parameter or unsupported audio format in the request.";break;case e.CancellationErrorCode.TooManyRequests:o="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return o}};return Bs.EnumTranslation=n,Bs}var qP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionStatus=e.SynthesisStatus=void 0,function(t){t[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error"}(e.SynthesisStatus||(e.SynthesisStatus={})),function(t){t[t.Success=0]="Success",t[t.NoMatch=1]="NoMatch",t[t.InitialSilenceTimeout=2]="InitialSilenceTimeout",t[t.BabbleTimeout=3]="BabbleTimeout",t[t.Error=4]="Error",t[t.EndOfDictation=5]="EndOfDictation",t[t.TooManyRequests=6]="TooManyRequests",t[t.BadRequest=7]="BadRequest",t[t.Forbidden=8]="Forbidden"}(e.RecognitionStatus||(e.RecognitionStatus={}))})(qP);var Fs={},zm;function CO(){if(zm)return Fs;zm=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.TranslationSynthesisEnd=void 0;const e=M();let t=class UP{constructor(r){this.privSynthesisEnd=JSON.parse(r),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(r){return new UP(r)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Fs.TranslationSynthesisEnd=t,Fs}var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.TranslationHypothesis=void 0;const RO=B,Lm=El;class Nc{constructor(t,n){this.privTranslationHypothesis=t,this.privTranslationHypothesis.Offset+=n,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(t,n){return new Nc(JSON.parse(t),n)}static fromTranslationResponse(t,n){RO.Contracts.throwIfNullOrUndefined(t,"translationHypothesis");const r=t.SpeechHypothesis;return t.SpeechHypothesis=void 0,r.Translation=t,new Nc(r,n)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var t;return(t=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:t.Language}asJson(){const t={...this.privTranslationHypothesis};return t.Translation!==void 0?JSON.stringify({...t,TranslationStatus:Lm.TranslationStatus[t.Translation.TranslationStatus]}):JSON.stringify(t)}mapTranslationStatus(t){if(typeof t=="string")return Lm.TranslationStatus[t];if(typeof t=="number")return t}}nu.TranslationHypothesis=Nc;var qs={},Bm;function PO(){if(Bm)return qs;Bm=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.TranslationPhrase=void 0;const e=B,t=M(),n=El;let r=class Td{constructor(o,a){this.privTranslationPhrase=o,this.privTranslationPhrase.Offset+=a,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(o,a){return new Td(JSON.parse(o),a)}static fromTranslationResponse(o,a){e.Contracts.throwIfNullOrUndefined(o,"translationResponse");const s=o.SpeechPhrase;return o.SpeechPhrase=void 0,s.Translation=o,s.Text=s.DisplayText,new Td(s,a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var o;return(o=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:o.Language}get Confidence(){var o;return(o=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:o.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){const o={...this.privTranslationPhrase},a={...o,RecognitionStatus:t.RecognitionStatus[o.RecognitionStatus]};return o.Translation&&(a.Translation={...o.Translation,TranslationStatus:n.TranslationStatus[o.Translation.TranslationStatus]}),JSON.stringify(a)}mapRecognitionStatus(o){if(typeof o=="string")return t.RecognitionStatus[o];if(typeof o=="number")return o}mapTranslationStatus(o){if(typeof o=="string")return n.TranslationStatus[o];if(typeof o=="number")return o}};return qs.TranslationPhrase=r,qs}var Us={},Fm;function wO(){if(Fm)return Us;Fm=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.TranslationServiceRecognizer=void 0;const e=z(),t=b(),n=M();let r=class extends n.ConversationServiceRecognizer{constructor(o,a,s,c,l){super(o,a,s,c,l),this.privTranslationRecognizer=l,this.connectionEvents.attach(u=>{u.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(o){const a=new t.PropertyCollection;let s=await this.processSpeechMessages(o);if(s)return!0;const c=async u=>{if(a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,u.asJson()),this.privRequestSession.onPhraseRecognized(u.Offset+u.Duration),u.RecognitionStatus===n.RecognitionStatus.Success){const p=this.fireEventForResult(u,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const p=n.EnumTranslation.implTranslateRecognitionResult(u.RecognitionStatus),d=new t.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,p,u.Text,u.Duration,u.Offset,u.Language,u.Confidence,void 0,u.asJson(),a);if(p===t.ResultReason.Canceled){const h=n.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus),v=n.EnumTranslation.implTranslateCancelErrorCode(u.RecognitionStatus);await this.cancelRecognitionLocal(h,v,n.EnumTranslation.implTranslateErrorDetails(v))}else if(u.RecognitionStatus!==n.RecognitionStatus.EndOfDictation){const h=new t.TranslationRecognitionEventArgs(d,d.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(d)}catch(v){this.privErrorCallback&&this.privErrorCallback(v)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0}},l=u=>{a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,u.asJson());const p=this.fireEventForResult(u,a);if(this.privRequestSession.onHypothesis(p.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,p)}catch{}s=!0};switch(o.messageType===e.MessageType.Text&&a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"translation.hypothesis":l(n.TranslationHypothesis.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":const u=JSON.parse(o.textBody);if(u.SpeechPhrase)await c(n.TranslationPhrase.fromTranslationResponse(u,this.privRequestSession.currentTurnAudioOffset));else{const d=JSON.parse(o.textBody);d.SpeechHypothesis&&l(n.TranslationHypothesis.fromTranslationResponse(d,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":await c(n.TranslationPhrase.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(o.binaryBody,this.privRequestSession.sessionId),s=!0;break;case"audio.end":case"translation.synthesis.end":const p=n.TranslationSynthesisEnd.fromJSON(o.textBody);switch(p.SynthesisStatus){case n.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const d=new t.TranslationSynthesisResult(t.ResultReason.Canceled,void 0),h=new t.TranslationSynthesisEventArgs(d,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h)}catch{}}if(this.privTranslationRecognizer.canceled){const d=new t.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,t.CancellationReason.Error,p.FailureReason,t.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}break;case n.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}s=!0;break}return s}cancelRecognition(o,a,s,c,l){const u=new t.PropertyCollection;if(u.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privTranslationRecognizer.canceled){const p=new t.TranslationRecognitionCanceledEventArgs(o,s,l,c,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new t.TranslationRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,l,void 0,u);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(o,a,s){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(o),a,s);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}}handleRecognizedCallback(o,a,s){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(o),a,s);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch{}}fireEventForResult(o,a){let s;if(o.Translation.Translations!==void 0){s=new t.Translations;for(const h of o.Translation.Translations)s.set(h.Language,h.Text||h.DisplayText)}let c,l;o instanceof n.TranslationPhrase?(o.Translation&&o.Translation.TranslationStatus===e.TranslationStatus.Success?c=t.ResultReason.TranslatedSpeech:c=t.ResultReason.RecognizedSpeech,l=o.Confidence):c=t.ResultReason.TranslatingSpeech;const u=o.Language,p=new t.TranslationRecognitionResult(s,this.privRequestSession.requestId,c,o.Text,o.Duration,o.Offset,u,l,o.Translation.FailureReason,o.asJson(),a);return new t.TranslationRecognitionEventArgs(p,o.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(o,a){const s=o===void 0?t.ResultReason.SynthesizingAudioCompleted:t.ResultReason.SynthesizingAudio,c=new t.TranslationSynthesisResult(s,o),l=new t.TranslationSynthesisEventArgs(c,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,l)}catch{}}};return Us.TranslationServiceRecognizer=r,Us}var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.SpeechDetected=void 0;class Hh{constructor(t,n){this.privSpeechStartDetected=JSON.parse(t),this.privSpeechStartDetected.Offset+=n}static fromJSON(t,n){return new Hh(t,n)}get Offset(){return this.privSpeechStartDetected.Offset}}ru.SpeechDetected=Hh;var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.SpeechHypothesis=void 0;class Kh{constructor(t,n){this.privSpeechHypothesis=JSON.parse(t),this.updateOffset(n)}static fromJSON(t,n){return new Kh(t,n)}updateOffset(t){this.privSpeechHypothesis.Offset+=t}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}iu.SpeechHypothesis=Kh;var su={};Object.defineProperty(su,"__esModule",{value:!0});su.SpeechKeyword=void 0;class Jh{constructor(t,n){this.privSpeechKeyword=JSON.parse(t),this.privSpeechKeyword.Offset+=n}static fromJSON(t,n){return new Jh(t,n)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}}su.SpeechKeyword=Jh;var $s={},qm;function EO(){if(qm)return $s;qm=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.SpeechServiceRecognizer=void 0;const e=b(),t=M();let n=class extends t.ServiceRecognizerBase{constructor(i,o,a,s,c){super(i,o,a,s,c),this.privSpeechRecognizer=c}async processTypeSpecificMessages(i){let o;const a=new e.PropertyCollection;let s=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=t.SpeechHypothesis.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,c.asJson()),o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,c.Text,c.Duration,c.Offset,c.Language,c.LanguageDetectionConfidence,void 0,void 0,c.asJson(),a),this.privRequestSession.onHypothesis(c.Offset);const l=new e.SpeechRecognitionEventArgs(o,c.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch{}s=!0;break;case"speech.phrase":const u=t.SimpleSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,u.asJson());const p=t.EnumTranslation.implTranslateRecognitionResult(u.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(u.Offset+u.Duration),e.ResultReason.Canceled===p){const d=t.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus),h=t.EnumTranslation.implTranslateCancelErrorCode(u.RecognitionStatus);await this.cancelRecognitionLocal(d,h,t.EnumTranslation.implTranslateErrorDetails(h))}else{if(u.RecognitionStatus===t.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,p,u.DisplayText,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,void 0,void 0,u.asJson(),a);else{const h=t.DetailedSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,h.asJson()),o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,p,h.RecognitionStatus===t.RecognitionStatus.Success?h.NBest[0].Display:"",h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,h.asJson(),a)}const d=new e.SpeechRecognitionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,d)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(o)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0;break}return s}cancelRecognition(i,o,a,s,c){const l=new e.PropertyCollection;if(l.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[s]),this.privSpeechRecognizer.canceled){const u=new e.SpeechRecognitionCanceledEventArgs(a,c,s,void 0,i);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,u)}catch{}}if(this.privSuccessCallback){const u=new e.SpeechRecognitionResult(o,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,l);try{this.privSuccessCallback(u),this.privSuccessCallback=void 0}catch{}}}};return $s.SpeechServiceRecognizer=n,$s}var Ws={},$P={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.IdentityProvider=e.SpeakerDiarizationMode=void 0,function(t){t.None="None",t.Identity="Identity",t.Anonymous="Anonymous"}(e.SpeakerDiarizationMode||(e.SpeakerDiarizationMode={})),function(t){t.CallCenter="CallCenter"}(e.IdentityProvider||(e.IdentityProvider={}))})($P);var Um;function TO(){if(Um)return Ws;Um=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.ConversationTranscriptionServiceRecognizer=void 0;const e=b(),t=M(),n=$P,r=ot;let i=class extends t.ServiceRecognizerBase{constructor(a,s,c,l,u){super(a,s,c,l,u),this.privConversationTranscriber=u,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const a=this.privSpeechContext.getContext().phraseDetection||{};a.mode=r.RecognitionMode.Conversation;const s={};s.mode=n.SpeakerDiarizationMode.Anonymous,s.audioSessionId=this.privDiarizationSessionId,s.audioOffsetMs=0,s.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",a.speakerDiarization=s,this.privSpeechContext.getContext().phraseDetection=a}}async processTypeSpecificMessages(a){let s;const c=new e.PropertyCollection;c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,a.textBody);let l=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const u=t.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);s=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,u.Text,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,u.SpeakerId,void 0,u.asJson(),c),this.privRequestSession.onHypothesis(u.Offset);const p=new e.ConversationTranscriptionEventArgs(s,u.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,p)}catch{}l=!0;break;case"speech.phrase":const d=t.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset),h=t.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(d.Offset+d.Duration),e.ResultReason.Canceled===h){const v=t.EnumTranslation.implTranslateCancelResult(d.RecognitionStatus),S=t.EnumTranslation.implTranslateCancelErrorCode(d.RecognitionStatus);await this.cancelRecognitionLocal(v,S,t.EnumTranslation.implTranslateErrorDetails(S))}else if(!(this.privRequestSession.isSpeechEnded&&h===e.ResultReason.NoMatch&&d.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])s=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,h,d.DisplayText,d.Duration,d.Offset,d.Language,d.LanguageDetectionConfidence,d.SpeakerId,void 0,d.asJson(),c);else{const S=t.DetailedSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);s=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,h,S.RecognitionStatus===t.RecognitionStatus.Success?S.NBest[0].Display:void 0,S.Duration,S.Offset,S.Language,S.LanguageDetectionConfidence,d.SpeakerId,void 0,S.asJson(),c)}const v=new e.ConversationTranscriptionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,v)}catch{}}l=!0;break}return l}cancelRecognition(a,s,c,l,u){if(new e.PropertyCollection().setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[l]),this.privConversationTranscriber.canceled){const d=new e.ConversationTranscriptionCanceledEventArgs(c,u,l,void 0,a);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,d)}catch{}}}};return Ws.ConversationTranscriptionServiceRecognizer=i,Ws}var Vs={},$m;function IO(){if($m)return Vs;$m=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.TranscriptionServiceRecognizer=void 0;const e=z(),t=b(),n=M(),r=Zt;let i=class extends n.ConversationServiceRecognizer{constructor(a,s,c,l,u){super(a,s,c,l,u),this.privTranscriberRecognizer=u,this.sendPrePayloadJSONOverride=p=>this.sendTranscriptionStartJSON(p),this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,s){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createSpeechEventPayload(a,s))}}async sendMeetingSpeechEventAsync(a,s){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,s))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,s,c){try{const l=new t.SpeechRecognitionEventArgs(a,s,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,l),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(u){this.privErrorCallback&&this.privErrorCallback(u)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,s,c){try{const l=new t.SpeechRecognitionEventArgs(a,s,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,l)}catch{}}cancelRecognition(a,s,c,l,u){const p=new t.PropertyCollection;if(p.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[l]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const d=new t.MeetingTranscriptionCanceledEventArgs(c,u,l,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const d=new t.ConversationTranscriptionCanceledEventArgs(c,u,l,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new t.SpeechRecognitionResult(s,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,u,void 0,p);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const s=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(s,"start");await this.sendSpeechEvent(a,c)}else{const s=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(s,"start");await this.sendSpeechEvent(a,c)}await this.sendWaveHeader(a)}sendSpeechEvent(a,s){const c=JSON.stringify(s);if(c)return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,s){const c={id:"meeting",name:s,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,s){const c={id:"meeting",name:s,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}};return Vs.TranscriptionServiceRecognizer=i,Vs}var Hs={},Wm;function _O(){if(Wm)return Hs;Wm=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.DetailedSpeechPhrase=void 0;const e=M();let t=class WP{constructor(r,i){this.privDetailedSpeechPhrase=JSON.parse(r),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(i)}static fromJSON(r,i){return new WP(r,i)}updateOffsets(r){if(this.privDetailedSpeechPhrase.Offset+=r,this.privDetailedSpeechPhrase.NBest)for(const i of this.privDetailedSpeechPhrase.NBest){if(i.Words)for(const o of i.Words)o.Offset+=r;if(i.DisplayWords)for(const o of i.DisplayWords)o.Offset+=r}}asJson(){const r={...this.privDetailedSpeechPhrase};return JSON.stringify({...r,RecognitionStatus:e.RecognitionStatus[r.RecognitionStatus]})}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(r){if(typeof r=="string")return e.RecognitionStatus[r];if(typeof r=="number")return r}};return Hs.DetailedSpeechPhrase=t,Hs}var Ks={},Vm;function AO(){if(Vm)return Ks;Vm=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.SimpleSpeechPhrase=void 0;const e=M();let t=class VP{constructor(r,i=0){this.privSimpleSpeechPhrase=JSON.parse(r),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(i)}static fromJSON(r,i){return new VP(r,i)}updateOffset(r){this.privSimpleSpeechPhrase.Offset+=r}asJson(){const r={...this.privSimpleSpeechPhrase};return JSON.stringify({...r,RecognitionStatus:e.RecognitionStatus[r.RecognitionStatus]})}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(r){if(typeof r=="string")return e.RecognitionStatus[r];if(typeof r=="number")return r}};return Ks.SimpleSpeechPhrase=t,Ks}var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.AddedLmIntent=void 0;class bO{constructor(t,n){this.modelImpl=t,this.intentName=n}}ou.AddedLmIntent=bO;var Js={},Hm;function kO(){if(Hm)return Js;Hm=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.IntentServiceRecognizer=void 0;const e=z(),t=b(),n=M();let r=class extends n.ServiceRecognizerBase{constructor(o,a,s,c,l){super(o,a,s,c,l),this.privIntentRecognizer=l,this.privIntentDataSent=!1,c.recognitionEndpointVersion="1"}setIntents(o,a){this.privAddedLmIntents=o,this.privUmbrellaIntent=a,this.privIntentDataSent=!0}processTypeSpecificMessages(o){let a,s,c=!1;const l=new t.PropertyCollection;switch(o.messageType===e.MessageType.Text&&l.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speech.hypothesis":const p=n.SpeechHypothesis.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset);if(a=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,t.ResultReason.RecognizingIntent,p.Text,p.Duration,p.Offset,p.Language,p.LanguageDetectionConfidence,void 0,p.asJson(),l),this.privRequestSession.onHypothesis(a.offset),s=new t.IntentRecognitionEventArgs(a,p.Offset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,s)}catch{}c=!0;break;case"speech.phrase":const d=n.SimpleSpeechPhrase.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset);a=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,n.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),d.DisplayText,d.Duration,d.Offset,d.Language,d.LanguageDetectionConfidence,void 0,d.asJson(),l),s=new t.IntentRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(S){this.privErrorCallback&&this.privErrorCallback(S)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||t.ResultReason.NoMatch===s.result.reason?(this.privRequestSession.onPhraseRecognized(s.offset+s.result.duration),h()):this.privPendingIntentArgs=s,c=!0;break;case"response":if(s=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,s===void 0){if(o.textBody==="")return;s=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const v=n.IntentResponse.fromJSON(o.textBody);if(v!==null&&v.topScoringIntent&&v.topScoringIntent.intent){let S=this.privAddedLmIntents[v.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(S=this.privUmbrellaIntent),S){const C=S===void 0||S.intentName===void 0?v.topScoringIntent.intent:S.intentName;let f=s.result.reason;C!==void 0&&(f=t.ResultReason.RecognizedIntent);const g=s.result.properties!==void 0?s.result.properties:new t.PropertyCollection;g.setProperty(t.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,o.textBody),s=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult(C,s.result.resultId,f,s.result.text,s.result.duration,s.result.offset,void 0,void 0,s.result.errorDetails,s.result.json,g),s.offset,s.sessionId)}}if(this.privRequestSession.onPhraseRecognized(s.offset+s.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(s.result)}catch(S){this.privErrorCallback&&this.privErrorCallback(S)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}c=!0;break}const u=new e.Deferred;return u.resolve(c),u.promise}cancelRecognition(o,a,s,c,l){const u=new t.PropertyCollection;if(u.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privIntentRecognizer.canceled){const p=new t.IntentRecognitionCanceledEventArgs(s,l,c,void 0,void 0,o);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new t.IntentRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,l,void 0,u);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}};return Js.IntentServiceRecognizer=r,Js}var au={};Object.defineProperty(au,"__esModule",{value:!0});au.IntentResponse=void 0;class Qh{constructor(t){t===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(t)}static fromJSON(t){return new Qh(t)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}au.IntentResponse=Qh;var HP={};Object.defineProperty(HP,"__esModule",{value:!0});var cu={},lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.ServiceTelemetryListener=void 0;const Bt=z(),Km=eu;class xO{constructor(t,n,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=t,this.privAudioSourceId=n,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(t){t>0&&this.privPhraseLatencies.push(Date.now()-t)}hypothesisReceived(t){t>0&&this.privHypothesisLatencies.push(Date.now()-t)}onEvent(t){if(!this.privIsDisposed&&(t instanceof Km.RecognitionTriggeredEvent&&t.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:t.eventTime,Name:"ListeningTrigger",Start:t.eventTime}),t instanceof Bt.AudioStreamNodeAttachingEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=t.eventTime),t instanceof Bt.AudioStreamNodeAttachedEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=t.eventTime),t instanceof Bt.AudioSourceErrorEvent&&t.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Error:t.error,Name:"Microphone",Start:this.privMicStartTime})),t instanceof Bt.AudioStreamNodeErrorEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Error:t.error,Name:"Microphone",Start:this.privMicStartTime})),t instanceof Bt.AudioStreamNodeDetachedEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Name:"Microphone",Start:this.privMicStartTime})),t instanceof Km.ConnectingToServiceEvent&&t.requestId===this.privRequestId&&(this.privConnectionId=t.sessionId),t instanceof Bt.ConnectionStartEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionStartTime=t.eventTime),t instanceof Bt.ConnectionEstablishedEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:t.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),t instanceof Bt.ConnectionEstablishErrorEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:t.eventTime,Error:this.getConnectionError(t.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),t instanceof Bt.ConnectionMessageReceivedEvent&&t.connectionId===this.privConnectionId&&t.message&&t.message.headers&&t.message.headers.path)){this.privReceivedMessages[t.message.headers.path]||(this.privReceivedMessages[t.message.headers.path]=new Array);const n=50;this.privReceivedMessages[t.message.headers.path].length<n&&this.privReceivedMessages[t.message.headers.path].push(t.networkReceivedTime)}}getTelemetry(){const t=new Array;this.privListeningTriggerMetric&&t.push(this.privListeningTriggerMetric),this.privMicMetric&&t.push(this.privMicMetric),this.privConnectionEstablishMetric&&t.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&t.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&t.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const n={Metrics:t,ReceivedMessages:this.privReceivedMessages},r=JSON.stringify(n);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],r}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(t){switch(t){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+t.toString()}}}lu.ServiceTelemetryListener=xO;Object.defineProperty(cu,"__esModule",{value:!0});cu.RequestSession=void 0;const Tr=z(),ja=eu,OO=lu;class NO{constructor(t){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=t,this.privRequestId=(0,Tr.createNoDashGuid)(),this.privAudioNodeId=(0,Tr.createNoDashGuid)(),this.privTurnDeferral=new Tr.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(t){this.privServiceTelemetryListener&&this.privDetachables.push(t.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new OO.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new ja.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(t,n){this.privAudioNode=t,this.privIsAudioNodeDetached=!1,n?await this.onComplete():this.onEvent(new ja.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(t,n){this.privAuthFetchEventId=t,this.privSessionId=n,this.onEvent(new ja.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(t){t&&await this.onComplete()}async onConnectionEstablishCompleted(t,n){if(t===200){this.onEvent(new ja.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else t===403&&await this.onComplete()}async onServiceTurnEndResponse(t){this.privTurnDeferral.resolve(),!t||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=(0,Tr.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new Tr.Deferred}onHypothesis(t){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(t)))}onPhraseRecognized(t){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(t)),this.onServiceRecognized(t)}onServiceRecognized(t){this.privLastRecoOffset=t,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(t),this.privConnectionAttempts=0}onAudioSent(t){this.privBytesSent+=t,this.privRecognitionBytesSent+=t}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const t of this.privDetachables)await t.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(t){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(t),Tr.Events.instance.onEvent(t)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}cu.RequestSession=NO;var uu={},KP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TentativePhraseResultsOption=e.OutputFormat=e.PhraseExtension=e.PhraseOption=void 0,function(t){t.WordTimings="WordTimings",t.SNR="SNR",t.Pronunciation="Pronunciation",t.WordPronunciation="WordPronunciation",t.WordConfidence="WordConfidence",t.Words="Words",t.Sentiment="Sentiment",t.PronunciationAssessment="PronunciationAssessment",t.ContentAssessment="ContentAssessment",t.PhraseAMScore="PhraseAMScore",t.PhraseLMScore="PhraseLMScore",t.WordAMScore="WordAMScore",t.WordLMScore="WordLMScore",t.RuleTree="RuleTree",t.NBestTimings="NBestTimings",t.DecoderDiagnostics="DecoderDiagnostics",t.DisplayWordTimings="DisplayWordTimings",t.DisplayWords="DisplayWords"}(e.PhraseOption||(e.PhraseOption={})),function(t){t.Graph="Graph",t.Corrections="Corrections",t.Sentiment="Sentiment"}(e.PhraseExtension||(e.PhraseExtension={})),function(t){t.Simple="Simple",t.Detailed="Detailed"}(e.OutputFormat||(e.OutputFormat={})),function(t){t.None="None",t.Always="Always"}(e.TentativePhraseResultsOption||(e.TentativePhraseResultsOption={}))})(KP);Object.defineProperty(uu,"__esModule",{value:!0});uu.SpeechContext=void 0;const MO=ot,nn=KP;class DO{constructor(t){this.privContext={},this.privDynamicGrammar=t}getContext(){return this.privContext}setPronunciationAssessmentParams(t,n,r=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(t)||{},r&&(this.privContext.phraseDetection.mode=MO.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(nn.PhraseOption.PronunciationAssessment),this.privContext.phraseOutput.detailed.options.indexOf(nn.PhraseOption.SNR)===-1&&this.privContext.phraseOutput.detailed.options.push(nn.PhraseOption.SNR),n&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:n},this.privContext.phraseOutput.detailed.options.push(nn.PhraseOption.ContentAssessment))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=nn.OutputFormat.Detailed}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=nn.OutputFormat.Detailed,this.privContext.phraseOutput.detailed.options.indexOf(nn.PhraseOption.WordTimings)===-1&&this.privContext.phraseOutput.detailed.options.push(nn.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(t){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=t}toJSON(){const t=this.privDynamicGrammar.generateGrammarObject();return this.privContext.dgi=t,JSON.stringify(this.privContext)}}uu.SpeechContext=DO;var pu={},JP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SubstringMatchType=e.GroupType=void 0,function(t){t.IntentText="IntentText",t.IntentEntity="IntentEntity",t.Generic="Generic",t.People="People",t.Place="Place",t.DynamicEntity="DynamicEntity"}(e.GroupType||(e.GroupType={})),function(t){t.None="None",t.LeftRooted="LeftRooted",t.PartialName="PartialName",t.MiddleOfSentence="MiddleOfSentence"}(e.SubstringMatchType||(e.SubstringMatchType={}))})(JP);Object.defineProperty(pu,"__esModule",{value:!0});pu.DynamicGrammarBuilder=void 0;const jO=JP;class zO{constructor(){this.privWeight=1}addPhrase(t){this.privPhrases||(this.privPhrases=[]),t instanceof Array?this.privPhrases=this.privPhrases.concat(t):this.privPhrases.push(t)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(t){this.privGrammars||(this.privGrammars=[]),t instanceof Array?this.privGrammars=this.privGrammars.concat(t):this.privGrammars.push(t)}clearGrammars(){this.privGrammars=void 0}setWeight(t){this.privWeight=t}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const t={};if(t.referenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const n=[];this.privPhrases.forEach(r=>{n.push({text:r})}),t.groups=[{type:jO.GroupType.Generic,items:n}],t.bias=this.privWeight}return t}}pu.DynamicGrammarBuilder=zO;var Qs={},du={},hu={},Gh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDataStreamType=e.ActivityPayloadResponse=void 0;class t{constructor(r){this.privActivityResponse=JSON.parse(r)}static fromJSON(r){return new t(r)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}e.ActivityPayloadResponse=t,function(n){n[n.None=0]="None",n[n.TextToSpeechAudio=1]="TextToSpeechAudio"}(e.MessageDataStreamType||(e.MessageDataStreamType={}))})(Gh);Object.defineProperty(hu,"__esModule",{value:!0});hu.DialogServiceTurnState=void 0;const LO=Dn,BO=Pe,FO=Gh;class qO{constructor(t,n){this.privRequestId=n,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=t,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(t,n){return t.messageDataStreamType===FO.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=BO.AudioOutputStream.createPullStream(),this.privAudioStream.format=n!==void 0?n:LO.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}hu.DialogServiceTurnState=qO;Object.defineProperty(du,"__esModule",{value:!0});du.DialogServiceTurnStateManager=void 0;const Jm=Ee,UO=hu;class $O{constructor(){this.privTurnMap=new Map}StartTurn(t){if(this.privTurnMap.has(t))throw new Jm.InvalidOperationError("Service error: There is already a turn with id:"+t);const n=new UO.DialogServiceTurnState(this,t);return this.privTurnMap.set(t,n),this.privTurnMap.get(t)}GetTurn(t){return this.privTurnMap.get(t)}CompleteTurn(t){if(!this.privTurnMap.has(t))throw new Jm.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+t);const n=this.privTurnMap.get(t);return n.complete(),this.privTurnMap.delete(t),n}}du.DialogServiceTurnStateManager=$O;var QP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InvocationSource=void 0,function(t){t.None="None",t.VoiceActivationWithKeyword="VoiceActivationWithKeyword"}(e.InvocationSource||(e.InvocationSource={}))})(QP);var GP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OnRejectAction=e.KeywordDetectionType=void 0,function(t){t.StartTrigger="StartTrigger"}(e.KeywordDetectionType||(e.KeywordDetectionType={})),function(t){t.EndOfTurn="EndOfTurn",t.Continue="Continue"}(e.OnRejectAction||(e.OnRejectAction={}))})(GP);var Qm;function WO(){if(Qm)return Qs;Qm=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.DialogServiceAdapter=void 0;const e=Se(),t=fr,n=z(),r=Dn,i=b(),o=du,a=M(),s=Gh,c=QP,l=GP,u=Zt;let p=class extends a.ServiceRecognizerBase{constructor(h,v,S,C,f){super(h,v,S,C,f),this.privEvents=new n.EventSource,this.privDialogServiceConnector=f,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new o.DialogServiceTurnStateManager,this.recognizeOverride=(g,y,R)=>this.listenOnce(g,y,R),this.postConnectImplOverride=g=>this.dialogConnectImpl(g),this.configConnectionOverride=g=>this.configConnection(g),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=S,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(g=>{g.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(h){const v=(0,n.createGuid)(),S=(0,n.createNoDashGuid)(),C={context:{interactionId:v},messagePayload:JSON.parse(h),version:.5},f=JSON.stringify(C);await(await this.fetchConnection()).send(new u.SpeechConnectionMessage(n.MessageType.Text,"agent",S,"application/json",f))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(h){const v=new i.PropertyCollection;h.messageType===n.MessageType.Text&&v.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,h.textBody);let S,C;switch(h.path.toLowerCase()){case"speech.phrase":const g=a.SimpleSpeechPhrase.fromJSON(h.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(g.Offset+g.Duration),g.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&g.RecognitionStatus!==a.RecognitionStatus.Error){const T=this.fireEventForResult(g,v);if(this.privLastResult=T.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,T)}catch{}}C=!0;break;case"speech.hypothesis":const y=a.SpeechHypothesis.fromJSON(h.textBody,this.privRequestSession.currentTurnAudioOffset);S=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,y.Text,y.Duration,y.Offset,y.Language,y.LanguageDetectionConfidence,void 0,void 0,y.asJson(),v),this.privRequestSession.onHypothesis(y.Offset);const R=new i.SpeechRecognitionEventArgs(S,y.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,R)}catch{}C=!0;break;case"speech.keyword":const P=a.SpeechKeyword.fromJSON(h.textBody,this.privRequestSession.currentTurnAudioOffset);S=new i.SpeechRecognitionResult(this.privRequestSession.requestId,P.Status==="Accepted"?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,P.Text,P.Duration,P.Offset,void 0,void 0,void 0,void 0,P.asJson(),v),P.Status!=="Accepted"&&(this.privLastResult=S);const w=new i.SpeechRecognitionEventArgs(S,S.duration,S.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,w)}catch{}C=!0;break;case"audio":{const T=h.requestId.toUpperCase(),E=this.privTurnStateManager.GetTurn(T);try{h.binaryBody?E.audioStream.write(h.binaryBody):E.endAudioStream()}catch{}}C=!0;break;case"response":this.handleResponseMessage(h),C=!0;break}const f=new n.Deferred;return f.resolve(C),f.promise}async cancelRecognition(h,v,S,C,f){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const g=new i.PropertyCollection;g.setProperty(a.CancellationErrorCodePropertyName,i.CancellationErrorCode[C]);const y=new i.SpeechRecognitionCanceledEventArgs(S,f,C,void 0,h);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,y)}catch{}if(this.privSuccessCallback){const R=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,f,void 0,g);try{this.privSuccessCallback(R),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(h,v,S){this.privRecognizerConfig.recognitionMode=h,this.privSuccessCallback=v,this.privErrorCallback=S,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const C=this.connectImpl(),f=this.sendPreAudioMessages(),g=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),y=await this.privDialogAudioSource.format,R=await this.privDialogAudioSource.deviceInfo,P=new e.ReplayableAudioNode(g,y.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(P,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:R};try{await C,await f}catch(E){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,E),Promise.resolve()}const w=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,w),this.sendAudio(P).then(()=>{},async E=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,E)})}dialogConnectImpl(h){return this.privConnectionLoop=this.startMessageLoop(),h}receiveDialogMessageOverride(){const h=new n.Deferred,v=async()=>{try{const S=this.isDisposed(),C=!this.isDisposed()&&this.terminateMessageLoop;if(S||C){h.resolve(void 0);return}const g=await(await this.fetchConnection()).read();if(!g)return v();const y=u.SpeechConnectionMessage.fromConnectionMessage(g);switch(y.path.toLowerCase()){case"turn.start":{const D=y.requestId.toUpperCase(),G=this.privRequestSession.requestId.toUpperCase();D!==G?this.privTurnStateManager.StartTurn(D):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const P=a.SpeechDetected.fromJSON(y.textBody,this.privRequestSession.currentTurnAudioOffset),w=new i.RecognitionEventArgs(P.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,w);break;case"speech.enddetected":let T;y.textBody.length>0?T=y.textBody:T="{ Offset: 0 }";const E=a.SpeechDetected.fromJSON(T,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(E.Offset);const x=new i.RecognitionEventArgs(E.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,x);break;case"turn.end":{const D=y.requestId.toUpperCase(),G=this.privRequestSession.requestId.toUpperCase();if(D!==G)this.privTurnStateManager.CompleteTurn(D);else{const We=new i.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,We),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(ne){this.privErrorCallback&&this.privErrorCallback(ne)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(y)||this.serviceEvents&&this.serviceEvents.onEvent(new n.ServiceEvent(y.path.toLowerCase(),y.textBody))}catch{}}return v()}catch{this.terminateMessageLoop=!0,h.resolve()}};return v().catch(S=>{n.Events.instance.onEvent(new n.BackgroundEvent(S))}),h.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(h){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,h)}return Promise.resolve()}async configConnection(h){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(h,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(h),h)}async sendPreAudioMessages(){const h=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(h,!0),await this.sendAgentContext(h),await this.sendWaveHeader(h)}sendAgentConfig(h){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const S=this.agentConfig.get();S.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(S)}this.onEvent(new t.SendingAgentContextMessageEvent(this.agentConfig));const v=this.agentConfig.toJsonString();return this.agentConfigSent=!0,h.send(new u.SpeechConnectionMessage(n.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",v))}}sendAgentContext(h){const v=(0,n.createGuid)(),S=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),f=JSON.stringify({channelData:"",context:{interactionId:v},messagePayload:typeof S===void 0?void 0:S,version:.5});return h.send(new u.SpeechConnectionMessage(n.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",f))}fireEventForResult(h,v){const S=a.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus),C=new i.SpeechRecognitionResult(this.privRequestSession.requestId,S,h.DisplayText,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,h.asJson(),v);return new i.SpeechRecognitionEventArgs(C,h.Offset,this.privRequestSession.sessionId)}handleResponseMessage(h){const v=JSON.parse(h.textBody);switch(v.messageType.toLowerCase()){case"message":const S=h.requestId.toUpperCase(),C=s.ActivityPayloadResponse.fromJSON(h.textBody),f=this.privTurnStateManager.GetTurn(S);if(C.conversationId){const R=this.agentConfig.get();R.botInfo.conversationId=C.conversationId,this.agentConfig.set(R)}const g=f.processActivityPayload(C,r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),y=new i.ActivityReceivedEventArgs(C.messagePayload,g);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,y)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(h.textBody))}catch{}break;default:n.Events.instance.onEvent(new n.BackgroundEvent(`Unexpected response of type ${v.messageType}. Ignoring.`));break}}onEvent(h){this.privEvents.onEvent(h),n.Events.instance.onEvent(h)}addKeywordContextData(){const h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(h===void 0)return;const v=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),S=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),C=h.split(";"),f=v===void 0?[]:v.split(";"),g=S===void 0?[]:S.split(";"),y=[];for(let R=0;R<C.length;R++){const P={text:C[R]};R<f.length&&(P.startOffset=Number(f[R])),R<g.length&&(P.duration=Number(g[R])),y.push(P)}this.speechContext.getContext().invocationSource=c.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:y,onReject:{action:l.OnRejectAction.EndOfTurn},type:l.KeywordDetectionType.StartTrigger}]}};return Qs.DialogServiceAdapter=p,Qs}var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.AgentConfig=void 0;class VO{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(t){this.iPrivConfig=t}}fu.AgentConfig=VO;var gp={},Gs={},di={};Object.defineProperty(di,"__esModule",{value:!0});di.ConversationConnectionConfig=void 0;const HO=va;class De extends HO.RestConfigBase{static get host(){return De.privHost}static get apiVersion(){return De.privApiVersion}static get clientAppId(){return De.privClientAppId}static get defaultLanguageCode(){return De.privDefaultLanguageCode}static get restPath(){return De.privRestPath}static get webSocketPath(){return De.privWebSocketPath}static get transcriptionEventKeys(){return De.privTranscriptionEventKeys}}di.ConversationConnectionConfig=De;De.privHost="dev.microsofttranslator.com";De.privRestPath="/capito/room";De.privApiVersion="2.0";De.privDefaultLanguageCode="en-US";De.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";De.privWebSocketPath="/capito/translate";De.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var Gm;function KO(){if(Gm)return Gs;Gm=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.ConversationManager=void 0;const e=Se(),t=B,n=b(),r=di;let i=class{constructor(){this.privRequestParams=r.ConversationConnectionConfig.configParams,this.privErrors=r.ConversationConnectionConfig.restErrors,this.privHost=r.ConversationConnectionConfig.host,this.privApiVersion=r.ConversationConnectionConfig.apiVersion,this.privRestPath=r.ConversationConnectionConfig.restPath,this.privRestAdapter=new e.RestMessageAdapter({})}createOrJoin(a,s,c,l){try{t.Contracts.throwIfNullOrUndefined(a,"args");const u=a.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,r.ConversationConnectionConfig.defaultLanguageCode),p=a.getProperty(n.PropertyId.ConversationTranslator_Name,"conversation_host"),d=a.getProperty(n.PropertyId.ConversationTranslator_Host,this.privHost),h=a.getProperty(n.PropertyId.ConversationTranslator_CorrelationId),v=a.getProperty(n.PropertyId.SpeechServiceConnection_Key),S=a.getProperty(n.PropertyId.SpeechServiceConnection_Region),C=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token);t.Contracts.throwIfNullOrWhitespace(u,"languageCode"),t.Contracts.throwIfNullOrWhitespace(p,"nickname"),t.Contracts.throwIfNullOrWhitespace(d,"endpointHost");const f={};f[this.privRequestParams.apiVersion]=this.privApiVersion,f[this.privRequestParams.languageCode]=u,f[this.privRequestParams.nickname]=p;const g={};h&&(g[this.privRequestParams.correlationId]=h),g[this.privRequestParams.clientAppId]=r.ConversationConnectionConfig.clientAppId,s!==void 0?f[this.privRequestParams.roomId]=s:(t.Contracts.throwIfNullOrUndefined(S,this.privErrors.authInvalidSubscriptionRegion),g[this.privRequestParams.subscriptionRegion]=S,v?g[this.privRequestParams.subscriptionKey]=v:C?g[this.privRequestParams.authorization]=`Bearer ${C}`:t.Contracts.throwIfNullOrUndefined(v,this.privErrors.authInvalidSubscriptionKey));const y={};y.headers=g,this.privRestAdapter.options=y;const R=`https://${d}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Post,R,f,null).then(P=>{const w=e.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,P.headers);if(!P.ok){if(l){let E=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",P.status.toString()),x;try{x=JSON.parse(P.data),E+=` [${x.error.code}: ${x.error.message}]`}catch{E+=` [${P.data}]`}w&&(E+=` ${w}`),l(E)}return}const T=JSON.parse(P.data);if(T&&(T.requestId=w),c){try{c(T)}catch(E){l&&l(E)}c=void 0}}).catch(()=>{})}catch(u){if(l)if(u instanceof Error){const p=u;l(p.name+": "+p.message)}else l(u)}}leave(a,s){return new Promise((c,l)=>{try{t.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),t.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","token"));const u=a.getProperty(n.PropertyId.ConversationTranslator_Host,this.privHost),p=a.getProperty(n.PropertyId.ConversationTranslator_CorrelationId),d={};d[this.privRequestParams.apiVersion]=this.privApiVersion,d[this.privRequestParams.sessionToken]=s;const h={};p&&(h[this.privRequestParams.correlationId]=p);const v={};v.headers=h,this.privRestAdapter.options=v;const S=`https://${u}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Delete,S,d,null).then(C=>{C.ok,c()}).catch(()=>{})}catch(u){if(u instanceof Error){const p=u;l(p.name+": "+p.message)}else l(u)}})}};return Gs.ConversationManager=i,Gs}var Xn={},Xs={},vu={},ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.ConversationConnectionMessage=void 0;const JO=z();class QO extends JO.ConnectionMessage{constructor(t,n,r,i){super(t,n,r,i);const o=JSON.parse(this.textBody);o.type!==void 0&&(this.privConversationMessageType=o.type)}get conversationMessageType(){return this.privConversationMessageType}}ga.ConversationConnectionMessage=QO;Object.defineProperty(vu,"__esModule",{value:!0});vu.ConversationWebsocketMessageFormatter=void 0;const Yn=z(),Xm=ga;class GO{toConnectionMessage(t){const n=new Yn.Deferred;try{if(t.messageType===Yn.MessageType.Text){const r=new Xm.ConversationConnectionMessage(t.messageType,t.textContent,{},t.id);n.resolve(r)}else t.messageType===Yn.MessageType.Binary&&n.resolve(new Xm.ConversationConnectionMessage(t.messageType,t.binaryContent,void 0,t.id))}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(t){const n=new Yn.Deferred;try{if(t.messageType===Yn.MessageType.Text){const r=`${t.textBody?t.textBody:""}`;n.resolve(new Yn.RawWebsocketMessage(Yn.MessageType.Text,r,t.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}}vu.ConversationWebsocketMessageFormatter=GO;var Ym;function XO(){if(Ym)return Xs;Ym=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.ConversationConnectionFactory=void 0;const e=Se(),t=z(),n=B,r=b(),i=It(),o=di,a=vu;let s=class extends i.ConnectionFactoryBase{create(l,u,p){const d=l.parameters.getProperty(r.PropertyId.ConversationTranslator_Host,o.ConversationConnectionConfig.host),h=l.parameters.getProperty(r.PropertyId.ConversationTranslator_CorrelationId,(0,t.createGuid)()),v=`wss://${d}${o.ConversationConnectionConfig.webSocketPath}`,S=l.parameters.getProperty(r.PropertyId.ConversationTranslator_Token,void 0);n.Contracts.throwIfNullOrUndefined(S,"token");const C={};C[o.ConversationConnectionConfig.configParams.apiVersion]=o.ConversationConnectionConfig.apiVersion,C[o.ConversationConnectionConfig.configParams.token]=S,C[o.ConversationConnectionConfig.configParams.correlationId]=h;const f=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(v,C,{},new a.ConversationWebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),f,p))}};return Xs.ConversationConnectionFactory=s,Xs}var Ys={},gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.ConversationRequestSession=void 0;const mp=z();class YO{constructor(t){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=t,this.privRequestId=(0,mp.createNoDashGuid)(),this.privRequestCompletionDeferral=new mp.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(t,n){this.privSessionId=n}onAuthCompleted(t){t&&this.onComplete()}onConnectionEstablishCompleted(t){t!==200&&t===403&&this.onComplete()}onServiceTurnEndResponse(t){t?this.privRequestId=(0,mp.createNoDashGuid)():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const t of this.privDetachables)await t.detach()}}onComplete(){}}gu.ConversationRequestSession=YO;var Be={},Zm;function XP(){if(Zm)return Be;Zm=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.ConversationReceivedTranslationEventArgs=Be.ParticipantsListEventArgs=Be.ParticipantAttributeEventArgs=Be.ParticipantEventArgs=Be.LockRoomEventArgs=Be.MuteAllEventArgs=void 0;const e=b();class t extends e.SessionEventArgs{constructor(c,l){super(l),this.privIsMuted=c}get isMuted(){return this.privIsMuted}}Be.MuteAllEventArgs=t;class n extends e.SessionEventArgs{constructor(c,l){super(l),this.privIsLocked=c}get isMuted(){return this.privIsLocked}}Be.LockRoomEventArgs=n;class r extends e.SessionEventArgs{constructor(c,l){super(l),this.privParticipant=c}get participant(){return this.privParticipant}}Be.ParticipantEventArgs=r;class i extends e.SessionEventArgs{constructor(c,l,u,p){super(p),this.privKey=l,this.privValue=u,this.privParticipantId=c}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}Be.ParticipantAttributeEventArgs=i;class o extends e.SessionEventArgs{constructor(c,l,u,p,d,h,v,S,C){super(C),this.privRoomId=c,this.privSessionToken=l,this.privTranslateTo=u,this.privProfanityFilter=p,this.privRoomProfanityFilter=d,this.privIsRoomLocked=h,this.privIsRoomLocked=v,this.privParticipants=S}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}Be.ParticipantsListEventArgs=o;class a{constructor(c,l,u){this.privPayload=l,this.privCommand=c,this.privSessionId=u}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return Be.ConversationReceivedTranslationEventArgs=a,Be}var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.ConversationTranslatorCommandTypes=Ht.ConversationTranslatorMessageTypes=Ht.InternalParticipants=void 0;class ZO{constructor(t=[],n){this.participants=t,this.meId=n}addOrUpdateParticipant(t){if(t===void 0)return;const n=this.getParticipantIndex(t.id);return n>-1?this.participants.splice(n,1,t):this.participants.push(t),this.getParticipant(t.id)}getParticipantIndex(t){return this.participants.findIndex(n=>n.id===t)}getParticipant(t){return this.participants.find(n=>n.id===t)}deleteParticipant(t){this.participants=this.participants.filter(n=>n.id!==t)}get host(){return this.participants.find(t=>t.isHost===!0)}get me(){return this.getParticipant(this.meId)}}Ht.InternalParticipants=ZO;Ht.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};Ht.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var YP={},mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.CommandResponsePayload=void 0;const eN=e=>JSON.parse(e);class Xh{constructor(t){this.privCommandResponse=eN(t)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(t){return new Xh(t)}}mu.CommandResponsePayload=Xh;var ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.ParticipantPayloadResponse=ei.ParticipantsListPayloadResponse=void 0;const tN=e=>JSON.parse(e),nN=e=>JSON.parse(e);class Yh{constructor(t){this.privParticipantsPayloadResponse=tN(t)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(t){return new Yh(t)}}ei.ParticipantsListPayloadResponse=Yh;class Zh{constructor(t){this.privParticipantPayloadResponse=nN(t)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(t){return new Zh(t)}}ei.ParticipantPayloadResponse=Zh;var ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.TextResponsePayload=ti.SpeechResponsePayload=void 0;const rN=e=>JSON.parse(e),iN=e=>JSON.parse(e);class ef{constructor(t){this.privSpeechResponse=rN(t)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(t){return new ef(t)}}ti.SpeechResponsePayload=ef;class tf{constructor(t){this.privTextResponse=iN(t)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(t){return new tf(t)}}ti.TextResponsePayload=tf;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextResponsePayload=e.SpeechResponsePayload=e.ParticipantPayloadResponse=e.ParticipantsListPayloadResponse=e.CommandResponsePayload=void 0;var t=mu;Object.defineProperty(e,"CommandResponsePayload",{enumerable:!0,get:function(){return t.CommandResponsePayload}});var n=ei;Object.defineProperty(e,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantsListPayloadResponse}}),Object.defineProperty(e,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantPayloadResponse}});var r=ti;Object.defineProperty(e,"SpeechResponsePayload",{enumerable:!0,get:function(){return r.SpeechResponsePayload}}),Object.defineProperty(e,"TextResponsePayload",{enumerable:!0,get:function(){return r.TextResponsePayload}})})(YP);var ey;function sN(){if(ey)return Ys;ey=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.ConversationServiceAdapter=void 0;const e=z(),t=b(),n=M(),r=ga,i=gu,o=XP(),a=Ht,s=YP;let c=class extends n.ServiceRecognizerBase{constructor(u,p,d,h,v){super(u,p,d,h,v),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=v,this.privConversationAuthentication=u,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=S=>this.conversationConnectImpl(S),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession((0,e.createNoDashGuid)()),this.privConversationConnectionFactory=p,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(u){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(u),await super.dispose(u)}async sendMessage(u){return(await this.fetchConnection()).send(new r.ConversationConnectionMessage(e.MessageType.Text,u))}async sendMessageAsync(u){await(await this.fetchConnection()).send(new r.ConversationConnectionMessage(e.MessageType.Text,u))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(u,p,d,h,v){this.terminateMessageLoop=!0;const S=new t.ConversationTranslationCanceledEventArgs(d,v,h,void 0,u);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,S)}catch{}}async conversationConnectImpl(u){return this.privConnectionLoop=this.startMessageLoop(),u}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const u=new e.Deferred;try{const d=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return u.resolve(),Promise.resolve();if(!d)return this.receiveConversationMessageOverride();const h=this.privConversationRequestSession.sessionId,v=d.conversationMessageType.toLowerCase();let S=!1;try{switch(v){case"info":case"participant_command":case"command":const C=s.CommandResponsePayload.fromJSON(d.textBody);switch(C.command.toLowerCase()){case"participantlist":const w=s.ParticipantsListPayloadResponse.fromJSON(d.textBody),T=w.participants.map(ne=>({avatar:ne.avatar,displayName:ne.nickname,id:ne.participantId,isHost:ne.ishost,isMuted:ne.ismuted,isUsingTts:ne.usetts,preferredLanguage:ne.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new o.ParticipantsListEventArgs(w.roomid,w.token,w.translateTo,w.profanityFilter,w.roomProfanityFilter,w.roomLocked,w.muteAll,T,h));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(C.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,C.value,h));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(C.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,C.value,h));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(C.participantId,a.ConversationTranslatorCommandTypes.setMute,C.value,h));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new o.MuteAllEventArgs(C.value,h));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new t.ConversationExpirationEventArgs(C.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(C.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,C.value,h));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new o.LockRoomEventArgs(C.value,h));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(C.participantId,a.ConversationTranslatorCommandTypes.changeNickname,C.value,h));break;case"joinsession":const E=s.ParticipantPayloadResponse.fromJSON(d.textBody),x={avatar:E.avatar,displayName:E.nickname,id:E.participantId,isHost:E.ishost,isMuted:E.ismuted,isUsingTts:E.usetts,preferredLanguage:E.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(x,h));break;case"leavesession":const D={id:C.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(D,h));break;case"disconnectsession":const G={id:C.participantId};break;case"token":const We=new n.CognitiveTokenAuthentication(()=>{const ne=C.token;return Promise.resolve(ne)},()=>{const ne=C.token;return Promise.resolve(ne)});this.authentication=We,this.privConversationServiceConnector.onToken(We);break;default:break}break;case"partial":case"final":const f=s.SpeechResponsePayload.fromJSON(d.textBody),g=v==="final"?t.ResultReason.TranslatedParticipantSpeech:t.ResultReason.TranslatingParticipantSpeech,y=new t.ConversationTranslationResult(f.participantId,this.getTranslations(f.translations),f.language,f.id,g,f.recognition,void 0,void 0,d.textBody,void 0);f.isFinal?((y.text!==void 0&&y.text.length>0||f.id===this.privLastPartialUtteranceId)&&(S=!0),S&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,y,h))):y.text!==void 0&&(this.privLastPartialUtteranceId=f.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,y,h)));break;case"translated_message":const R=s.TextResponsePayload.fromJSON(d.textBody),P=new t.ConversationTranslationResult(R.participantId,this.getTranslations(R.translations),R.language,void 0,void 0,R.originalText,void 0,void 0,void 0,d.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,P,h));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return u.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const u=this.receiveConversationMessageOverride();try{return await u}catch(p){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,p),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(u=>u.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(u=>u),this.privConnectionConfigPromise)}getTranslations(u){let p;if(u!==void 0){p=new t.Translations;for(const d of u)p.set(d.lang,d.translation)}return p}};return Ys.ConversationServiceAdapter=c,Ys}var ty;function oN(){if(ty)return Xn;ty=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.ConversationTranslatorRecognizer=Xn.ConversationRecognizerFactory=void 0;const e=M(),t=z(),n=B,r=b(),i=XO(),o=sN();class a{static fromConfig(l,u,p){return new s(l,u,p)}}Xn.ConversationRecognizerFactory=a;let s=class extends r.Recognizer{constructor(l,u,p){const d=u;n.Contracts.throwIfNull(d,"speechConfig");const h=l;n.Contracts.throwIfNull(h,"conversationImpl"),super(p,d.properties,new i.ConversationConnectionFactory),this.privConversation=h,this.privIsDisposed=!1,this.privProperties=d.properties.clone(),this.privConnection=r.Connection.fromRecognizer(this),this.privProperties.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=t.Timeout.setTimeout,this.privClearTimeout=t.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(l){this.privConnection.connected=l}set disconnected(l){this.privConnection.disconnected=l}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(l,u,p){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfNullOrWhitespace(l,"token"),this.privReco.conversationTranslatorToken=l,this.resetConversationTimeout(),this.privReco.connectAsync(u,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d)}}disconnect(l,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{l&&l()},p=>{u&&u(p)})}catch(p){if(u)if(p instanceof Error){const d=p;u(d.name+": "+d.message)}else u(p);this.dispose(!0).catch(d=>{t.Events.instance.onEvent(new t.BackgroundEvent(d))})}}sendRequest(l,u,p){try{n.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(l,u,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d);this.dispose(!0).catch(h=>{t.Events.instance.onEvent(new t.BackgroundEvent(h))})}}onToken(l){this.privConversation.onToken(l)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(l){this.privIsDisposed||l&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(l))}createRecognizerConfig(l){return new e.RecognizerConfig(l,this.privProperties)}createServiceRecognizer(l,u,p,d){const h=p;return new o.ConversationServiceAdapter(l,u,h,d,this)}sendMessage(l,u,p){const d=this.privReco;((v,S,C)=>{v!==void 0?v.then(()=>{try{S&&S()}catch(f){C&&C(`'Unhandled error on promise callback: ${f}'`)}},f=>{try{C&&C(f)}catch{}}):C&&C("Null promise")})(d.sendMessageAsync(l),u,p),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return Xn.ConversationTranslatorRecognizer=s,Xn}var Zs={},ny;function aN(){if(ny)return Zs;ny=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.TranscriberRecognizer=void 0;const e=z(),t=B,n=b(),r=M(),i=ot;let o=class extends n.Recognizer{constructor(s,c){const l=s;t.Contracts.throwIfNull(l,"speechTranslationConfig");const u=c;t.Contracts.throwIfNull(u,"audioConfigImpl"),t.Contracts.throwIfNullOrWhitespace(l.speechRecognitionLanguage,n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(c,l.properties,new r.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){t.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,s)}set conversation(s){t.Contracts.throwIfNullOrUndefined(s,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=s}getConversationInfo(){return t.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(s){t.Contracts.throwIfNullOrUndefined(s,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=s}getMeetingInfo(){return t.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(s,c){(0,e.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),s,c)}stopContinuousRecognitionAsync(s,c){(0,e.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),s,c)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(s,c){const l=this.privReco;t.Contracts.throwIfNullOrUndefined(l,"serviceRecognizer"),await l.sendSpeechEventAsync(s,c)}async pushMeetingEvent(s,c){const l=this.privReco;t.Contracts.throwIfNullOrUndefined(l,"serviceRecognizer"),await l.sendMeetingSpeechEventAsync(s,c)}async enforceAudioGating(){const l=(await this.audioConfig.format).channels;if(l===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(l!==8)throw new Error(`Unsupported audio configuration: Detected ${l}-channel audio`)}connectMeetingCallbacks(s){this.isMeetingRecognizer=!0,this.canceled=(c,l)=>{s.canceled&&s.canceled(s,l)},this.recognizing=(c,l)=>{s.transcribing&&s.transcribing(s,l)},this.recognized=(c,l)=>{s.transcribed&&s.transcribed(s,l)},this.sessionStarted=(c,l)=>{s.sessionStarted&&s.sessionStarted(s,l)},this.sessionStopped=(c,l)=>{s.sessionStopped&&s.sessionStopped(s,l)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(s){this.privDisposedRecognizer||(s&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(s))}createRecognizerConfig(s){return new r.RecognizerConfig(s,this.properties)}createServiceRecognizer(s,c,l,u){const p=l;return new r.TranscriptionServiceRecognizer(s,c,p,u,this)}};return Zs.TranscriberRecognizer=o,Zs}var ry;function cN(){return ry||(ry=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InternalParticipants=e.ConversationTranslatorMessageTypes=e.ConversationTranslatorCommandTypes=e.ParticipantsListEventArgs=e.ParticipantEventArgs=e.ParticipantAttributeEventArgs=e.MuteAllEventArgs=e.LockRoomEventArgs=e.ConversationReceivedTranslationEventArgs=e.TranscriberRecognizer=e.ConversationRecognizerFactory=e.ConversationConnectionConfig=e.ConversationManager=void 0;var t=KO();Object.defineProperty(e,"ConversationManager",{enumerable:!0,get:function(){return t.ConversationManager}});var n=di;Object.defineProperty(e,"ConversationConnectionConfig",{enumerable:!0,get:function(){return n.ConversationConnectionConfig}});var r=oN();Object.defineProperty(e,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return r.ConversationRecognizerFactory}});var i=aN();Object.defineProperty(e,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var o=XP();Object.defineProperty(e,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return o.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(e,"LockRoomEventArgs",{enumerable:!0,get:function(){return o.LockRoomEventArgs}}),Object.defineProperty(e,"MuteAllEventArgs",{enumerable:!0,get:function(){return o.MuteAllEventArgs}}),Object.defineProperty(e,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return o.ParticipantAttributeEventArgs}}),Object.defineProperty(e,"ParticipantEventArgs",{enumerable:!0,get:function(){return o.ParticipantEventArgs}}),Object.defineProperty(e,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return o.ParticipantsListEventArgs}});var a=Ht;Object.defineProperty(e,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(e,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(e,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}(gp)),gp}var nf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesisAudioMetadata=e.MetadataType=void 0,function(n){n.WordBoundary="WordBoundary",n.Bookmark="Bookmark",n.Viseme="Viseme",n.SentenceBoundary="SentenceBoundary",n.SessionEnd="SessionEnd",n.AvatarSignal="TalkingAvatarSignal"}(e.MetadataType||(e.MetadataType={}));class t{constructor(r){this.privSynthesisAudioMetadata=JSON.parse(r)}static fromJSON(r){return new t(r)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}e.SynthesisAudioMetadata=t})(nf);var eo={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.SynthesisStartedEvent=xt.ConnectingToSynthesisServiceEvent=xt.SynthesisTriggeredEvent=xt.SpeechSynthesisEvent=void 0;const iy=z();class yu extends iy.PlatformEvent{constructor(t,n,r=iy.EventType.Info){super(t,r),this.privRequestId=n}get requestId(){return this.privRequestId}}xt.SpeechSynthesisEvent=yu;class lN extends yu{constructor(t,n,r){super("SynthesisTriggeredEvent",t),this.privSessionAudioDestinationId=n,this.privTurnAudioDestinationId=r}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}xt.SynthesisTriggeredEvent=lN;class uN extends yu{constructor(t,n){super("ConnectingToSynthesisServiceEvent",t),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}}xt.ConnectingToSynthesisServiceEvent=uN;class pN extends yu{constructor(t,n){super("SynthesisStartedEvent",t),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}}xt.SynthesisStartedEvent=pN;var sy;function dN(){if(sy)return eo;sy=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.SynthesisTurn=void 0;const e=z(),t=Pe,n=b(),r=nf,i=xt;let o=class Id{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,e.createNoDashGuid)(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(s){this.privStreamId=s}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(s){this.privAudioOutputFormat=s}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const s=new n.PropertyCollection;return s.setProperty(n.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),s}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const s=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(s),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(s,c,l,u){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=s,this.privRawText=c,this.privIsSSML=l,this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",u!==void 0&&(this.privTurnAudioDestination=u,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,u===void 0?void 0:u.id()))}onPreConnectionStart(s){this.privAuthFetchEventId=s,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(s){s&&this.onComplete()}onConnectionEstablishCompleted(s){if(s===200){this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else s===403&&this.onComplete()}onServiceResponseMessage(s){const c=JSON.parse(s);this.streamId=c.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(s){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred;const c=JSON.parse(s);c.webrtc&&(this.privWebRTCSDP=c.webrtc.connectionString)}onAudioChunkReceived(s){this.isSynthesizing&&(this.privAudioOutputStream.write(s),this.privBytesReceived+=s.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(s))}onTextBoundaryEvent(s){this.updateTextOffset(s.Data.text.Text,s.Type)}onVisemeMetadataReceived(s){s.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=s.Data.AnimationChunk)}onSessionEnd(s){this.privAudioDuration=s.Data.Offset}async constructSynthesisResult(){const s=await this.getAllReceivedAudioWithHeader();return new n.SpeechSynthesisResult(this.requestId,n.ResultReason.SynthesizingAudioCompleted,s,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const s=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",s}onEvent(s){e.Events.instance.onEvent(s)}static isXmlTag(s){return s.length>=2&&s[0]==="<"&&s[s.length-1]===">"}updateTextOffset(s,c){c===r.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(s,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+s.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!Id.isXmlTag(s)&&this.updateTextOffset(s,c))):(this.privSentenceOffset=this.privRawText.indexOf(s,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+s.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!Id.isXmlTag(s)&&this.updateTextOffset(s,c)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(s){return this.privRawText.indexOf("<",s+1)>this.privRawText.indexOf(">",s+1)}};return eo.SynthesisTurn=o,eo}var to={},oy;function hN(){if(oy)return to;oy=1,Object.defineProperty(to,"__esModule",{value:!0}),to.SynthesisAdapterBase=void 0;const e=z(),t=b(),n=M(),r=Zt;let i=class{constructor(a,s,c,l){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new e.ArgumentNullError("authentication");if(!s)throw new e.ArgumentNullError("connectionFactory");if(!c)throw new e.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=s,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=l,this.privSynthesisTurn=new n.SynthesisTurn,this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privSynthesisContext=new n.SynthesisContext,this.privAgentConfig=new n.AgentConfig,this.connectionEvents.attach(u=>{if(u.name==="ConnectionClosedEvent"){const p=u;p.statusCode!==1e3&&this.cancelSynthesisLocal(t.CancellationReason.Error,p.statusCode===1007?t.CancellationErrorCode.BadRequestParameters:t.CancellationErrorCode.ConnectionFailure,`${p.reason} websocket error code: ${p.statusCode}`)}})}get synthesizerConfig(){return this.privSynthesizerConfig}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,s){const c=typeof s=="string"?e.MessageType.Text:e.MessageType.Binary,l=typeof s=="string"?"application/json":"";return(await this.fetchConnection()).send(new r.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,l,s))}async Speak(a,s,c,l,u,p){let d;if(s?d=a:d=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(d,c,l,u);this.privSuccessCallback=l,this.privErrorCallback=u,this.privSynthesisTurn.startNewSynthesis(c,a,s,p);try{await this.connectImpl();const h=await this.fetchConnection();await this.sendSynthesisContext(h),await this.sendSsmlMessage(h,d,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(h){return this.cancelSynthesisLocal(t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,h),Promise.reject(h)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new r.SpeechConnectionMessage(e.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,s,c,l){const u=new t.PropertyCollection;u.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]);const p=new t.SpeechSynthesisResult(a,t.ResultReason.Canceled,void 0,l,u);if(this.onSynthesisCancelled(p),this.privSuccessCallback)try{this.privSuccessCallback(p)}catch{}}cancelSynthesisLocal(a,s,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,s,c))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const s=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!s)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const c=r.SpeechConnectionMessage.fromConnectionMessage(s);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":const l=n.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata;for(const p of l)switch(p.Type){case n.MetadataType.WordBoundary:case n.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(p);const d=new t.SpeechSynthesisWordBoundaryEventArgs(p.Data.Offset,p.Data.Duration,p.Data.text.Text,p.Data.text.Length,p.Type===n.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,p.Data.text.BoundaryType);this.onWordBoundary(d);break;case n.MetadataType.Bookmark:const h=new t.SpeechSynthesisBookmarkEventArgs(p.Data.Offset,p.Data.Bookmark);this.onBookmarkReached(h);break;case n.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(p),p.Data.IsLastAnimation){const v=new t.SpeechSynthesisVisemeEventArgs(p.Data.Offset,p.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(v)}break;case n.MetadataType.AvatarSignal:this.onAvatarEvent(p);break;case n.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(p);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let u;try{u=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(u)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.onSynthesisCompleted(u);break;default:this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const s=this.synthesisContext.toJSON();if(s)return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",s))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(c=>c.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,e.createNoDashGuid)(),this.privConnectionId=(0,e.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const s=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=s.then(async c=>{this.privSynthesisTurn.onAuthCompleted(!1);const l=await this.privConnectionFactory.create(this.privSynthesizerConfig,c,this.privConnectionId);l.events.attach(p=>{this.connectionEvents.onEvent(p)});const u=await l.open();return u.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(u.statusCode),Promise.resolve(l)):u.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(u.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${u.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Url)} Reason: ${u.reason}`))},c=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(c)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,s){if(s)return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",s))}sendSsmlMessage(a,s,c){return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"ssml",c,"application/ssml+xml",s))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return to.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,to}var no={},ay;function fN(){if(ay)return no;ay=1,Object.defineProperty(no,"__esModule",{value:!0}),no.AvatarSynthesisAdapter=void 0;const e=b(),t=M();let n=class extends t.SynthesisAdapterBase{constructor(i,o,a,s,c){super(i,o,a,void 0),this.privAvatarSynthesizer=s,this.privSynthesizer=s,this.privAvatarConfig=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var i,o,a,s,c,l,u,p,d,h,v,S,C,f,g,y,R;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(i=this.privAvatarConfig.videoFormat)==null?void 0:i.bitrate,codec:(o=this.privAvatarConfig.videoFormat)==null?void 0:o.codec,crop:{bottomRight:{x:(c=(s=(a=this.privAvatarConfig.videoFormat)==null?void 0:a.cropRange)==null?void 0:s.bottomRight)==null?void 0:c.x,y:(p=(u=(l=this.privAvatarConfig.videoFormat)==null?void 0:l.cropRange)==null?void 0:u.bottomRight)==null?void 0:p.y},topLeft:{x:(v=(h=(d=this.privAvatarConfig.videoFormat)==null?void 0:d.cropRange)==null?void 0:h.topLeft)==null?void 0:v.x,y:(f=(C=(S=this.privAvatarConfig.videoFormat)==null?void 0:S.cropRange)==null?void 0:C.topLeft)==null?void 0:f.y}},resolution:{height:(g=this.privAvatarConfig.videoFormat)==null?void 0:g.height,width:(y=this.privAvatarConfig.videoFormat)==null?void 0:y.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:(R=this.privAvatarConfig.backgroundImage)==null?void 0:R.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const o=new e.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,o)}catch{}}}};return no.AvatarSynthesisAdapter=n,no}var ro={},cy;function vN(){if(cy)return ro;cy=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.SpeechSynthesisAdapter=void 0;const e=b(),t=M();let n=class extends t.SynthesisAdapterBase{constructor(i,o,a,s,c){super(i,o,a,c),this.privSpeechSynthesizer=s,this.privSynthesizer=s}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const o=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(i,e.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,o)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const o=this.privSynthesisTurn.audioOutputFormat.addHeader(i),a=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(this.privSynthesisTurn.requestId,e.ResultReason.SynthesizingAudio,o));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const o=new e.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,o)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new e.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return ro.SpeechSynthesisAdapter=n,ro}var io={},ly;function gN(){if(ly)return io;ly=1,Object.defineProperty(io,"__esModule",{value:!0}),io.SynthesisRestAdapter=void 0;const e=Se(),t=b(),n=It(),r=ye;let i=class{constructor(a,s){let c=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!c){const u=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"westus"),p=n.ConnectionFactoryBase.getHostSuffix(u);c=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`https://${u}.tts.speech${p}`)}this.privUri=`${c}/cognitiveservices/voices/list`;const l=e.RestConfigBase.requestOptions;this.privRestAdapter=new e.RestMessageAdapter(l),this.privAuthentication=s}getVoicesList(a){return this.privRestAdapter.setHeaders(r.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(s=>(this.privRestAdapter.setHeaders(s.headerName,s.token),this.privRestAdapter.request(e.RestRequestType.Get,this.privUri)))}};return io.SynthesisRestAdapter=i,io}var yp={},uy;function mN(){return uy||(uy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesizerConfig=e.SynthesisServiceType=void 0;const t=M();var n;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(n=e.SynthesisServiceType||(e.SynthesisServiceType={}));class r{constructor(o,a){this.privSynthesisServiceType=n.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=o||new t.SpeechServiceConfig(new t.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(o){this.privSynthesisServiceType=o}set synthesisVideoSection(o){this.privSpeechServiceConfig.Context.synthesis={video:o}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}setContextFromJson(o){const a=JSON.parse(o);a.system&&(this.privSpeechServiceConfig.Context.system=a.system),a.os&&(this.privSpeechServiceConfig.Context.os=a.os),a.audio&&(this.privSpeechServiceConfig.Context.audio=a.audio),a.synthesis&&(this.privSpeechServiceConfig.Context.synthesis=a.synthesis)}}e.SynthesizerConfig=r}(yp)),yp}var so={},py;function yN(){if(py)return so;py=1,Object.defineProperty(so,"__esModule",{value:!0}),so.SynthesisContext=void 0;const e=b();let t=class{constructor(){this.privContext={}}setSection(r,i){this.privContext[r]=i}set audioOutputFormat(r){this.privAudioOutputFormat=r}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(r){const i=this.buildSynthesisContext(r);this.setSection("synthesis",i)}buildSynthesisContext(r){return{audio:{metadataOptions:{bookmarkEnabled:!!(r!=null&&r.bookmarkReached),punctuationBoundaryEnabled:r==null?void 0:r.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(r!=null&&r.wordBoundary)),sentenceBoundaryEnabled:r==null?void 0:r.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(r!=null&&r.visemeReceived),wordBoundaryEnabled:r==null?void 0:r.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(r!=null&&r.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:r==null?void 0:r.autoDetectSourceLanguage}}}};return so.SynthesisContext=t,so}var oo={},dy;function SN(){if(dy)return oo;dy=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.SpeakerRecognitionConfig=void 0;const e=M();let t=class{constructor(r,i){this.privContext=r||new e.Context(null),this.privParameters=i}get parameters(){return this.privParameters}get Context(){return this.privContext}};return oo.SpeakerRecognitionConfig=t,oo}var ao={},hy;function CN(){if(hy)return ao;hy=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.SpeakerServiceRecognizer=void 0;const e=Se(),t=z(),n=b(),r=M(),i=Zt;let o=class extends r.ServiceRecognizerBase{constructor(s,c,l,u,p){super(s,c,l,u,p),this.privSpeakerRecognizer=p,this.privSpeakerAudioSource=l,this.recognizeSpeaker=d=>this.recognizeSpeakerOnce(d),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(s){let c=!1;const l=new n.PropertyCollection;switch(s.messageType===t.MessageType.Text&&l.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speaker.response":const p=JSON.parse(s.textBody);let d;p.status.statusCode.toLowerCase()!=="success"?d=new n.SpeakerRecognitionResult(p,n.ResultReason.Canceled,n.CancellationErrorCode.ServiceError,p.status.reason):d=new n.SpeakerRecognitionResult(p,n.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(d),c=!0;break}const u=new t.Deferred;return u.resolve(c),u.promise}cancelRecognition(s,c,l,u,p){if(new n.PropertyCollection().setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[u]),this.privResultDeferral){const h=new n.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:p,reason:p}},n.ResultReason.Canceled,u,p);try{this.privResultDeferral.resolve(h)}catch(v){this.privResultDeferral.reject(v)}}}async recognizeSpeakerOnce(s){this.privSpeakerModel=s,this.voiceProfileType=s.scenario,this.privResultDeferral||(this.privResultDeferral=new t.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(n.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),l=this.sendPreAudioMessages(this.extractSpeakerContext(s)),u=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),p=await this.privSpeakerAudioSource.format,d=await this.privSpeakerAudioSource.deviceInfo,h=new e.ReplayableAudioNode(u,p.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d};try{await c,await l}catch(C){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,C)}const v=new n.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,v),this.receiveMessage(),this.sendAudio(h).then(()=>{},C=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,C)}),this.privResultDeferral.promise}async sendPreAudioMessages(s){const c=await this.fetchConnection();await this.sendSpeakerRecognition(c,s)}async sendSpeakerRecognition(s,c){const l=JSON.stringify(c);return s.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",l))}extractSpeakerContext(s){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:s.profileIds,scenario:s.scenario}}};return ao.SpeakerServiceRecognizer=o,ao}var co={},fy;function RN(){if(fy)return co;fy=1,Object.defineProperty(co,"__esModule",{value:!0}),co.VoiceServiceRecognizer=void 0;const e=Se(),t=z(),n=b(),r=M(),i=Zt;let o=class extends r.ServiceRecognizerBase{constructor(s,c,l,u,p){super(s,c,l,u,p),this.privDeferralMap=new t.DeferralMap,this.privSpeakerAudioSource=l,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(s){this.privSpeakerAudioSource=s}processTypeSpecificMessages(s){let c=!1;const l=new n.PropertyCollection;switch(s.messageType===t.MessageType.Text&&l.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speaker.profiles":const p=JSON.parse(s.textBody);switch(p.operation.toLowerCase()){case"create":this.handleCreateResponse(p,s.requestId);break;case"delete":case"reset":this.handleResultResponse(p,s.requestId);break;case"fetch":const S=JSON.parse(s.textBody);this.handleFetchResponse(S,s.requestId);break}c=!0;break;case"speaker.phrases":const d=JSON.parse(s.textBody);this.handlePhrasesResponse(d,s.requestId),c=!0;break;case"speaker.profile.enrollment":const h=JSON.parse(s.textBody),v=new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollment?h.enrollment.enrollmentStatus:h.status.statusCode),h.enrollment?JSON.stringify(h.enrollment):void 0,h.status.reason);this.privDeferralMap.getId(s.requestId)&&this.privDeferralMap.complete(s.requestId,v),this.privRequestSession.onSpeechEnded(),c=!0;break}const u=new t.Deferred;return u.resolve(c),u.promise}cancelRecognition(s,c,l,u,p){new n.PropertyCollection().setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[u]);const h=new n.VoiceProfileEnrollmentResult(n.ResultReason.Canceled,p,p);this.privDeferralMap.getId(c)&&this.privDeferralMap.complete(c,h)}async createProfile(s,c){this.voiceProfileType=s.toString();const l=this.connectImpl();try{const u=new t.Deferred;return await l,await this.sendCreateProfile(u,s,c),this.receiveMessage(),u.promise}catch(u){throw u}}async resetProfile(s){return this.voiceProfileType=s.profileType.toString(),this.sendCommonRequest("reset",s.profileType,s)}async deleteProfile(s){return this.voiceProfileType=s.profileType.toString(),this.sendCommonRequest("delete",s.profileType,s)}async retrieveEnrollmentResult(s){return this.voiceProfileType=s.profileType.toString(),this.privExpectedProfileId=s.profileId,this.sendCommonRequest("fetch",s.profileType,s)}async getAllProfiles(s){return this.voiceProfileType=s.toString(),this.sendCommonRequest("fetch",s)}async getActivationPhrases(s,c){this.voiceProfileType=s.toString();const l=this.connectImpl();try{const u=new t.Deferred;return await l,await this.sendPhrasesRequest(u,s,c),this.receiveMessage(),u.promise}catch(u){throw u}}async enrollProfile(s){this.voiceProfileType=s.profileType.toString();const c=new t.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(n.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const l=this.connectImpl(),u=this.sendPreAudioMessages(s,c),p=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,h=await this.privSpeakerAudioSource.deviceInfo,v=new e.ReplayableAudioNode(p,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(v,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h};try{await l,await u}catch(f){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,f)}const S=new n.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,S),this.receiveMessage(),this.sendAudio(v).then(()=>{},f=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,f)}),c.promise}async sendPreAudioMessages(s,c){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,c),await this.sendBaseRequest(l,"enroll",this.scenarioFrom(s.profileType),s)}async sendPhrasesRequest(s,c,l){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,s);const p=this.scenarioFrom(c),d={locale:l,scenario:p};return u.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCreateProfile(s,c,l){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,s);const p=c===n.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":c===n.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",d={locale:l,number:"1",scenario:p};return u.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCommonRequest(s,c,l=void 0){const u=this.connectImpl();try{const p=new t.Deferred;this.privRequestSession.onSpeechContext(),await u;const d=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,p),await this.sendBaseRequest(d,s,this.scenarioFrom(c),l),this.receiveMessage(),p.promise}catch(p){throw p}}async sendBaseRequest(s,c,l,u){const p={scenario:l};return u?p.profileIds=[u.profileId]:p.maxPageSize=-1,s.send(new i.SpeechConnectionMessage(t.MessageType.Text,`speaker.profile.${c}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}extractSpeakerContext(s){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:s.profileIds,scenario:s.scenario}}handlePhrasesResponse(s,c){if(this.privDeferralMap.getId(c))if(s.status.statusCode.toLowerCase()!=="success"){const l=n.ResultReason.Canceled,u=new n.VoiceProfilePhraseResult(l,s.status.statusCode,s.passPhraseType,[]);this.privDeferralMap.complete(c,u)}else if(s.phrases&&s.phrases.length>0){const l=n.ResultReason.EnrollingVoiceProfile,u=new n.VoiceProfilePhraseResult(l,s.status.statusCode,s.passPhraseType,s.phrases);this.privDeferralMap.complete(c,u)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${c} not found`)}handleCreateResponse(s,c){if(s.profiles&&s.profiles.length>0)if(this.privDeferralMap.getId(c)){const l=s.profiles.map(u=>u.profileId);this.privDeferralMap.complete(c,l)}else throw new Error(`Voice Profile create request for requestID ${c} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(s,c){if(this.privDeferralMap.getId(c)){const l=s.operation.toLowerCase()==="delete"?n.ResultReason.DeletedVoiceProfile:n.ResultReason.ResetVoiceProfile,u=s.status.statusCode.toLowerCase()==="success"?l:n.ResultReason.Canceled,p=new n.VoiceProfileResult(u,`statusCode: ${s.status.statusCode}, errorDetails: ${s.status.reason}`);this.privDeferralMap.complete(c,p)}else throw new Error(`Voice Profile create request for requestID ${c} not found`)}handleFetchResponse(s,c){if(this.privDeferralMap.getId(c)&&s.profiles[0]){if(this.privExpectedProfileId&&s.profiles.length===1&&s.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const l=s.profiles[0],u=new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(l.enrollmentStatus),JSON.stringify(l),s.status.reason);this.privDeferralMap.complete(c,u)}else if(s.profiles.length>0){const l=s.profiles,u=[];for(const p of l)u.push(new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(p.enrollmentStatus),JSON.stringify(p),s.status.reason));this.privDeferralMap.complete(c,u)}}else throw new Error(`Voice Profile fetch request for requestID ${c} not found`)}enrollmentReasonFrom(s){switch(s.toLowerCase()){case"enrolled":return n.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return n.ResultReason.Canceled;default:return n.ResultReason.EnrollingVoiceProfile}}scenarioFrom(s){return s===n.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":s===n.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return co.VoiceServiceRecognizer=o,co}var ZP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.type=e.connectivity=e.Device=e.OS=e.System=e.Context=e.SpeechServiceConfig=void 0;class t{constructor(s){this.context=s}serialize(){return JSON.stringify(this,(s,c)=>{if(c&&typeof c=="object"&&!Array.isArray(c)){const l={};for(const u in c)Object.hasOwnProperty.call(c,u)&&(l[u&&u.charAt(0).toLowerCase()+u.substring(1)]=c[u]);return l}return c})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(s){this.recognition=s.toLowerCase()}}e.SpeechServiceConfig=t;class n{constructor(s){this.system=new r,this.os=s}}e.Context=n;class r{constructor(){const s="1.45.0";this.name="SpeechSDK",this.version=s,this.build="JavaScript",this.lang="JavaScript"}}e.System=r;class i{constructor(s,c,l){this.platform=s,this.name=c,this.version=l}}e.OS=i;class o{constructor(s,c,l){this.manufacturer=s,this.model=c,this.version=l}}e.Device=o,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(e.connectivity||(e.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(e.type||(e.type={}))})(ZP);var vy;function M(){return vy||(vy=1,function(e){var t=W&&W.__createBinding||(Object.create?function(o,a,s,c){c===void 0&&(c=s),Object.defineProperty(o,c,{enumerable:!0,get:function(){return a[s]}})}:function(o,a,s,c){c===void 0&&(c=s),o[c]=a[s]}),n=W&&W.__exportStar||function(o,a){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&t(a,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoDetectSourceLanguagesOpenRangeOptionName=e.ForceDictationPropertyName=e.ServicePropertiesPropertyName=e.CancellationErrorCodePropertyName=e.OutputFormatPropertyName=e.SpeechSynthesisAdapter=e.AvatarSynthesisAdapter=void 0,n(sl,e),n(Il,e),n(pi,e),n(zR,e),n(LR,e),n(lO(),e),n(uO(),e),n(eu,e),n(pO(),e),n(dO(),e),n(hO(),e),n(FP,e),n(tu,e),n(vO(),e),n(gO(),e),n(mO(),e),n(yO(),e),n(AP(),e),n(SO(),e),n(qP,e),n(CO(),e),n(nu,e),n(PO(),e),n(wO(),e),n(ru,e),n(iu,e),n(su,e),n(EO(),e),n(TO(),e),n(IO(),e),n(_O(),e),n(AO(),e),n(ou,e),n(kO(),e),n(au,e),n(HP,e),n(cu,e),n(uu,e),n(pu,e),n(WO(),e),n(fu,e),n(cN(),e),n(nf,e),n(dN(),e),n(hN(),e);var r=fN();Object.defineProperty(e,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return r.AvatarSynthesisAdapter}});var i=vN();Object.defineProperty(e,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),n(gN(),e),n(mN(),e),n(yN(),e),n(SN(),e),n(CN(),e),n(RN(),e),n(ZP,e),e.OutputFormatPropertyName="OutputFormat",e.CancellationErrorCodePropertyName="CancellationErrorCode",e.ServicePropertiesPropertyName="ServiceProperties",e.ForceDictationPropertyName="ForceDictation",e.AutoDetectSourceLanguagesOpenRangeOptionName="UND"}(Yu)),Yu}(function(e){var t=W&&W.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a),Object.defineProperty(i,s,{enumerable:!0,get:function(){return o[a]}})}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),n=W&&W.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,i,a)};Object.defineProperty(e,"__esModule",{value:!0});const r=M();new r.AgentConfig,n(b(),e)})(rn);function PN(){const[e,t]=_.useState(!1),[n,r]=_.useState(),i=_.useRef([]),o=_.useRef(null),a=_.useRef(null),s=_.useRef(""),c=_.useRef(!1),l=async v=>{if(!e)try{r(void 0);const S=await fetch(`${an}/speech/token`);if(!S.ok)throw new Error(`Failed to get speech token: ${S.status}`);const{token:C,region:f}=await S.json(),g=rn.SpeechConfig.fromAuthorizationToken(C,f);g.speechRecognitionLanguage="en-US",g.setProperty(rn.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,"1500"),g.setProperty(rn.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,"3000");const y=await navigator.mediaDevices.getUserMedia({audio:!0});a.current=y;const R=rn.AudioConfig.fromDefaultMicrophoneInput(),P=new rn.SpeechRecognizer(g,R);o.current=P,i.current=[],s.current="",P.recognizing=(w,T)=>{var E;(E=T.result)!=null&&E.text&&(s.current=T.result.text,console.log("Partial:",T.result.text))},P.recognized=(w,T)=>{var E;if(((E=T.result)==null?void 0:E.reason)===rn.ResultReason.RecognizedSpeech&&T.result.text){const x={text:T.result.text,offsetMs:T.result.offset/1e4,durationMs:T.result.duration/1e4};i.current.push(x),console.log("Final:",x.text),s.current=""}},P.speechEndDetected=(w,T)=>{console.log(" Silence Detected (speech end). Triggering callback."),o.current&&(o.current.speechEndDetected=void 0),v(),u()},P.canceled=(w,T)=>{console.log("Recognition canceled:",T.reason),T.reason===rn.CancellationReason.Error&&r(`Recognition error: ${T.errorDetails}`),u()},P.sessionStopped=()=>{console.log("Recognition session stopped"),u()},await new Promise((w,T)=>{P.startContinuousRecognitionAsync(()=>{console.log("Continuous recognition started"),t(!0),w()},E=>{console.error("Failed to start recognition:",E),r(`Failed to start recognition: ${E}`),T(E)})})}catch(S){const C=S instanceof Error?S.message:String(S);console.error("STT start error:",C),r(C),t(!1)}},u=async()=>{if(e)try{const v=o.current;o.current=null,v.recognizing=void 0,v.recognized=void 0,v.speechEndDetected=void 0,v.canceled=void 0,v.sessionStopped=void 0,await new Promise(S=>{v.stopContinuousRecognitionAsync(S,S)}),v.close(),a.current&&(a.current.getTracks().forEach(S=>S.stop()),a.current=null),t(!1)}catch(v){console.error("Error during STT stop:",v),t(!1)}},p=()=>i.current.map(v=>v.text).join(" ").trim(),d=()=>i.current,h=()=>s.current;return _.useEffect(()=>{if(c.current!==!0)return c.current=!0,()=>{console.log("Cleanup effect for Azure STT is running."),o.current&&u(),c.current=!1}},[]),{start:l,stop:u,listening:e,error:n,getFinalTranscript:p,getTimedWords:d,getCurrentPartial:h}}function wN(){const e=yr(),{sessionId:t}=oi(),{videoRef:n,say:r,ready:i,error:o,stop:a}=vR(),{start:s,stop:c,listening:l,getFinalTranscript:u}=PN(),p=_.useRef(null),[d,h]=_.useState(null),[v,S]=_.useState(""),[C,f]=_.useState(null),[g,y]=_.useState("setup"),[R,P]=_.useState(0),[w,T]=_.useState(null),[E,x]=_.useState(!1),D=_.useRef(!0);_.useEffect(()=>((async()=>{try{if(!t){console.error("No session ID found, redirecting to mock config"),e("/mock");return}S(t),console.log("Using existing interview session:",t);const O=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});h(O),p.current&&(p.current.srcObject=O,p.current.play().catch(console.warn))}catch(O){console.error("Initialization error:",O)}})(),()=>{d&&d.getTracks().forEach(O=>O.stop())}),[t,e]),_.useEffect(()=>{i&&E&&v&&!C&&g==="setup"&&G(v)},[i,E,v,C,g]);const G=async A=>{try{const j=await(await fetch(`/api/video-session/${A}/next`)).json();if(j.text==="__DONE__"){y("done"),await jn(A);return}f(j),P(H=>H+1),y("asking"),console.log("Loading question:",j.text),D.current&&(console.log("First question, pausing for 1 second before speaking..."),await new Promise(H=>setTimeout(H,1e3)),D.current=!1),await r(j.text),console.log("Interviewer finished speaking. Pausing for a natural gap before listening..."),setTimeout(()=>{We()},1500)}catch(O){console.error("Failed to load next question:",O)}},We=async()=>{try{if(g==="listening")return;y("listening"),await s(ne),console.log("Started listening for user answer (with auto-finish).")}catch(A){console.error("Failed to start listening:",A)}},ne=async()=>{if(g==="listening")try{y("processing"),console.log("Phase changed to 'processing'. Finalizing the answer."),await c();const A=u();if(console.log("Final transcript:",A),!A||A.trim()===""){console.log("Empty transcript detected. Moving to the next question without saving."),setTimeout(()=>{t&&G(t)},1500);return}let O=null;if(C&&t){console.log("Submitting answer to the backend...");try{const j=await fetch(`/api/session/${t}/answer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:t,orderNo:C.questionId,answerText:A})});if(j.ok){const H=await j.json();O=H.evaluationJson?JSON.parse(H.evaluationJson):null,console.log("Answer evaluation received:",O),O&&C&&console.log("Evaluation saved for question:",C.questionId)}else console.error("Failed to submit answer:",j.status)}catch(j){console.error("Error submitting answer:",j)}}setTimeout(()=>{t&&G(t)},2e3)}catch(A){console.error("Failed to finish answer:",A)}},jn=async A=>{try{const O=await fetch(`/api/session/${A}/report`,{method:"POST"});if(!O.ok)throw new Error(`Failed to generate report: ${O.status}`);const j=await O.json();T(j.reportJson),console.log("Generated final report:",j.reportJson)}catch(O){console.error("Failed to generate report:",O),T({Overall:"0",Verdict:"Error",QuestionEvaluations:[],error:"Report generation failed"})}},hi=()=>{window.location.reload()},en=async()=>{try{console.log("Finishing interview..."),l&&await c(),await a(),d&&(d.getTracks().forEach(A=>A.stop()),h(null)),y("setup"),f(null),P(0),T(null),x(!1),D.current=!0,e(t?`/report/${t}`:"/mock")}catch(A){console.error("Error finishing interview:",A),e(t?`/report/${t}`:"/mock")}},zn=()=>{e("/")};return m.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:m.jsxs("div",{className:"max-w-6xl mx-auto",children:[m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"AI Video Interview Room"}),m.jsx("button",{onClick:en,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",title:"Finish interview and view report",children:"Finish"})]}),m.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[m.jsxs("span",{className:`px-3 py-1 rounded-full ${g==="setup"?"bg-yellow-100 text-yellow-800":g==="asking"?"bg-blue-100 text-blue-800":g==="listening"?"bg-green-100 text-green-800":g==="processing"?"bg-orange-100 text-orange-800":"bg-purple-100 text-purple-800"}`,children:["Phase: ",g]}),m.jsxs("span",{className:"text-gray-600",children:["Question: ",R]}),m.jsxs("span",{className:`px-2 py-1 rounded text-xs ${i?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:["D-ID: ",i?"Connected":"Connecting..."]}),l&&m.jsx("span",{className:"px-2 py-1 rounded bg-red-100 text-red-800 text-xs animate-pulse",children:" Recording"})]})]}),g!=="done"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[m.jsxs("div",{className:"relative",children:[m.jsx("h3",{className:"font-semibold mb-3 text-gray-900",children:"AI Interviewer"}),m.jsx("video",{ref:n,playsInline:!0,autoPlay:!0,muted:!1,className:"w-full h-[500px] rounded-lg bg-gray-100 object-cover transition-all duration-300"}),i&&!E&&g==="setup"&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx("button",{onClick:()=>x(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition-colors font-medium",children:"Start"})}),!i&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 rounded-lg",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Connecting to interviewer..."})]})}),o&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50 rounded-lg",children:m.jsxs("p",{className:"text-sm text-red-600 text-center px-4",children:["Connection Error: ",o]})})]}),m.jsxs("div",{className:"absolute bottom-6 right-6 w-1/4 max-w-[200px] bg-white p-2 rounded-lg shadow-xl border border-gray-200",children:[m.jsx("h3",{className:"font-semibold text-sm mb-2 text-gray-800 text-center",children:"Your Camera"}),m.jsx("video",{ref:p,playsInline:!0,autoPlay:!0,muted:!0,className:"w-full rounded bg-gray-100 object-cover"})]})]}),C&&m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Current Question"}),m.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${C.type==="technical"?"bg-blue-100 text-blue-800":C.type==="behavioral"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:C.type})]}),m.jsx("p",{className:"text-gray-800 text-lg leading-relaxed",children:C.text})]}),m.jsx("div",{className:"flex justify-center space-x-4 h-12 items-center",children:g==="listening"?m.jsx("p",{className:"text-gray-600 italic animate-pulse",children:"I'm listening... finish speaking and I will process your answer."}):g==="asking"?m.jsx("p",{className:"text-gray-600 italic",children:"Listen to the question..."}):m.jsxs("div",{className:"text-gray-600",children:[g==="setup"&&"Setting up interview...",g==="processing"&&"Processing your answer..."]})})]}),g==="done"&&m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Interview Complete! "}),w?m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:w.overallScore||"N/A"}),m.jsx("div",{className:"text-gray-600",children:"Overall Score"})]}),w.dimensions&&m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.dimensions.map((A,O)=>m.jsxs("div",{className:"p-4 border rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h4",{className:"font-medium",children:A.name}),m.jsxs("span",{className:"font-bold text-blue-600",children:[A.score,"/10"]})]}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:A.advice})]},O))}),w.keyStrengths&&m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Key Strengths:"}),m.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700",children:w.keyStrengths.map((A,O)=>m.jsx("li",{children:A},O))})]}),w.improvements&&m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold text-orange-800 mb-2",children:"Areas for Improvement:"}),m.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700",children:w.improvements.map((A,O)=>m.jsx("li",{children:A},O))})]}),w.questionEvaluations&&w.questionEvaluations.length>0&&m.jsxs("div",{className:"mt-8",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Detailed Question Feedback"}),m.jsx("div",{className:"space-y-6",children:w.questionEvaluations.map((A,O)=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${A.questionType==="technical"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:A.questionType}),m.jsxs("span",{className:"text-sm text-gray-600",children:["Question ",O+1]})]}),m.jsx("h4",{className:"text-lg font-medium text-gray-900",children:A.questionText})]}),m.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[m.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded",children:m.jsx("div",{className:"h-2 bg-blue-600 rounded",style:{width:`${A.score/10*100}%`}})}),m.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[A.score,"/10"]})]})]}),m.jsxs("div",{className:"space-y-4",children:[A.feedback&&m.jsxs("div",{children:[m.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"AI Feedback:"}),m.jsx("p",{className:"text-gray-800 bg-white p-3 rounded border",children:A.feedback})]}),A.strengths&&A.strengths.length>0&&m.jsxs("div",{children:[m.jsx("h5",{className:"text-sm font-medium text-green-700 mb-2",children:"Strengths:"}),m.jsx("ul",{className:"list-disc list-inside text-sm text-green-800 space-y-1",children:A.strengths.map((j,H)=>m.jsx("li",{children:j},H))})]}),A.weaknesses&&A.weaknesses.length>0&&m.jsxs("div",{children:[m.jsx("h5",{className:"text-sm font-medium text-orange-700 mb-2",children:"Areas for Improvement:"}),m.jsx("ul",{className:"list-disc list-inside text-sm text-orange-800 space-y-1",children:A.weaknesses.map((j,H)=>m.jsx("li",{children:j},H))})]}),A.suggestions&&A.suggestions.length>0&&m.jsxs("div",{children:[m.jsx("h5",{className:"text-sm font-medium text-blue-700 mb-2",children:"Suggestions:"}),m.jsx("ul",{className:"list-disc list-inside text-sm text-blue-800 space-y-1",children:A.suggestions.map((j,H)=>m.jsx("li",{children:j},H))})]})]})]},O))})]}),w.error&&m.jsx("div",{className:"mt-6 bg-red-50 border-l-4 border-red-400 p-4",children:m.jsx("div",{className:"flex",children:m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm text-red-700",children:[m.jsx("strong",{children:"Report Generation Error:"})," ",w.error]})})})})]}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Generating your interview report..."})]}),m.jsxs("div",{className:"flex justify-center space-x-4 mt-8",children:[m.jsx("button",{onClick:hi,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"New Interview"}),m.jsx("button",{onClick:en,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Finish & Exit"}),m.jsx("button",{onClick:zn,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Back to Home"})]})]})]})})}function EN(){return m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx(K1,{}),m.jsx("main",{className:"pt-16",children:m.jsxs(u1,{children:[m.jsx(tr,{path:"/",element:m.jsx(B_,{})}),m.jsx(tr,{path:"/questions",element:m.jsx(F_,{})}),m.jsx(tr,{path:"/mock",element:m.jsx(U_,{})}),m.jsx(tr,{path:"/interview/:id",element:m.jsx(W_,{})}),m.jsx(tr,{path:"/report/:id",element:m.jsx(V_,{})}),m.jsx(tr,{path:"/interview-room",element:m.jsx(wN,{})})]})})]})}Sp.createRoot(document.getElementById("root")).render(m.jsx(xd.StrictMode,{children:m.jsx(m1,{children:m.jsx(EN,{})})}));
